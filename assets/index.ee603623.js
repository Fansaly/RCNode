var F=Object.defineProperty,G=Object.defineProperties;var J=Object.getOwnPropertyDescriptors;var w=Object.getOwnPropertySymbols;var R=Object.prototype.hasOwnProperty,$=Object.prototype.propertyIsEnumerable;var S=(t,a,e)=>a in t?F(t,a,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[a]=e,j=(t,a)=>{for(var e in a||(a={}))R.call(a,e)&&S(t,e,a[e]);if(w)for(var e of w(a))$.call(a,e)&&S(t,e,a[e]);return t},I=(t,a)=>G(t,J(a));var A=(t,a)=>{var e={};for(var r in t)R.call(t,r)&&a.indexOf(r)<0&&(e[r]=t[r]);if(t!=null&&w)for(var r of w(t))a.indexOf(r)<0&&$.call(t,r)&&(e[r]=t[r]);return e};import{c as P,i as W,r as H,g,d as x,e as b,P as K,h as v,k as C,l as N,_ as m,n as k,b as o,p as f,G as O,a5 as Q,U as X,a as Z,R as tt,j as l,W as at,a6 as d,J as u,I as et,T,a7 as U,a8 as Y}from"./index.5e723353.js";import{d as rt}from"./Create.c02587ea.js";import{d as ot}from"./ExpandMore.5276a59c.js";import{A as it}from"./index.4e8fd2e6.js";import{C as pt}from"./Collapse.9bf0d35a.js";const dt=({min:t=0,max:a=1})=>(t=Math.ceil(t),a=Math.floor(a),Math.floor(Math.random()*(a-t+1))+t);var z={},nt=W.exports;Object.defineProperty(z,"__esModule",{value:!0});var q=z.default=void 0,st=nt(P),ct=H,lt=(0,st.default)((0,ct.jsx)("path",{d:"M21.99 4c0-1.1-.89-2-1.99-2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h14l4 4-.01-18zM18 14H6v-2h12v2zm0-3H6V9h12v2zm0-3H6V6h12v2z"}),"Comment");q=z.default=lt;var _={},ht=W.exports;Object.defineProperty(_,"__esModule",{value:!0});var B=_.default=void 0,ft=ht(P),mt=H,yt=(0,ft.default)((0,mt.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"}),"Visibility");B=_.default=yt;function ut(t){return g("MuiCard",t)}x("MuiCard",["root"]);const wt=["className","raised"],gt=t=>{const{classes:a}=t;return k({root:["root"]},ut,a)},xt=b(K,{name:"MuiCard",slot:"Root",overridesResolver:(t,a)=>a.root})(()=>({overflow:"hidden"})),bt=v.exports.forwardRef(function(a,e){const r=C({props:a,name:"MuiCard"}),{className:h,raised:n=!1}=r,s=N(r,wt),p=m({},r,{raised:n}),c=gt(p);return o(xt,m({className:f(c.root,h),elevation:n?8:void 0,ref:e,ownerState:p},s))});var vt=bt;function Ct(t){return g("MuiCardActions",t)}x("MuiCardActions",["root","spacing"]);const Nt=["disableSpacing","className"],kt=t=>{const{classes:a,disableSpacing:e}=t;return k({root:["root",!e&&"spacing"]},Ct,a)},zt=b("div",{name:"MuiCardActions",slot:"Root",overridesResolver:(t,a)=>{const{ownerState:e}=t;return[a.root,!e.disableSpacing&&a.spacing]}})(({ownerState:t})=>m({display:"flex",alignItems:"center",padding:8},!t.disableSpacing&&{"& > :not(:first-of-type)":{marginLeft:8}})),_t=v.exports.forwardRef(function(a,e){const r=C({props:a,name:"MuiCardActions"}),{disableSpacing:h=!1,className:n}=r,s=N(r,Nt),p=m({},r,{disableSpacing:h}),c=kt(p);return o(zt,m({className:f(c.root,n),ownerState:p,ref:e},s))});var Mt=_t;function St(t){return g("MuiCardContent",t)}x("MuiCardContent",["root"]);const Rt=["className","component"],$t=t=>{const{classes:a}=t;return k({root:["root"]},St,a)},jt=b("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(t,a)=>a.root})(()=>({padding:16,"&:last-child":{paddingBottom:24}})),It=v.exports.forwardRef(function(a,e){const r=C({props:a,name:"MuiCardContent"}),{className:h,component:n="div"}=r,s=N(r,Rt),p=m({},r,{component:n}),c=$t(p);return o(jt,m({as:n,className:f(c.root,h),ownerState:p,ref:e},s))});var At=It;const Tt=O(t=>({button:{display:"flex",padding:0,fontWeight:"inherit",fontFamily:"inherit",lineHeight:"inherit",letterSpacing:"inherit",textTransform:"inherit"},expand:{margin:0,transform:"rotate(0deg)",transition:t.transitions.create("transform",{duration:t.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"},title:{"& h5":{color:t.palette.mode==="light"?"rgba(0,0,0,.92)":"rgba(200,200,200,.95)"}},state:{color:t.palette.mode==="light"?"rgba(0,0,0,.5)":"rgba(125,125,125,.5)","& button":{color:t.palette.mode==="light"?"rgba(0,0,0,.4)":"rgba(125,125,125,.4)"}}})),Ut=({className:t,simple:a=!1,item:e})=>{const r=Tt(),h=Q(),n=X("up","sm"),{cardPreview:s}=Z(i=>i.settings),[p,c]=tt.useState(s),M=[],y=i=>{i!==null&&M.push(i)},V=i=>{M.includes(i.target)&&h(`/topic/${e.id}`)},D=()=>{c(i=>!i)},E=i=>{const L=dt({min:200,max:400});return i=i.replace(/<[^>]+>/g,""),i.substr(0,L)};return l(vt,{className:f("topicard",t,{expanded:!a&&p}),children:[o(at,{className:r.button,component:"div",disableFocusRipple:!0,onClick:V,children:l(d,{className:"topicard-header-wrapper",container:!0,alignItems:"center",children:[l(d,{ref:i=>y(i),className:"topicard-header",container:!0,alignItems:"center",justifyContent:"flex-start",children:[o(it,{className:"avatar",name:e.author.loginname,image:e.author.avatar_url,url:`/user/${e.author.loginname}`}),o(d,{className:"topicard-title",container:!0,alignItems:"center",justifyContent:"flex-start",children:l(d,{className:f("title",r.title),item:!0,children:[!a&&o(d,{className:"type",item:!0,children:o(u,{size:"large",children:o(et,{tab:e.tab,good:e.good,top:e.top})})}),o(T,{ref:i=>y(i),variant:"h5",children:o(U,{to:`/topic/${e.id}`,children:e.title})}),!a&&o(Mt,{className:"action",children:o(u,{className:f(r.expand,{[r.expandOpen]:p}),"aria-expanded":p,"aria-label":"Show more",size:"large",onClick:D,children:o(ot,{})})})]})})]}),o(d,{ref:i=>y(i),className:"state-wrapper",container:!0,wrap:"nowrap",alignItems:"center",children:l(d,{ref:i=>y(i),className:f("state",r.state),container:!0,wrap:"nowrap",alignItems:"center",children:[l(d,{ref:i=>y(i),container:!0,item:!0,zeroMinWidth:!0,wrap:"nowrap",alignItems:"center",children:[o(d,{className:"author",item:!0,zeroMinWidth:!0,children:o(U,{to:`/user/${e.author.loginname}`,children:e.author.loginname})}),!a&&l(d,{className:"create",item:!0,children:[o(u,{size:"large",children:o(rt,{})}),Y(e.create_at).fromNow()]})]}),l(d,{className:"count",item:!0,children:[l(d,{className:"reply",item:!0,children:[o(u,{size:"large",children:o(q,{})}),a?Y(e.last_reply_at).fromNow():o("span",{children:e.reply_count})]}),!a&&l(d,{className:"visit",item:!0,children:[o(u,{size:"large",children:o(B,{})}),o("span",{children:e.visit_count})]})]})]})})]})}),!a&&o(pt,{className:"collapse",in:p,timeout:"auto",unmountOnExit:n,children:o(At,{className:"context",children:o(T,{children:E(e.content)})})})]})},Yt=O(()=>({margin:{marginTop:20,"&:first-child":{marginTop:0},"@media (max-width: 768px)":{marginTop:16}}})),Vt=n=>{var s=n,{className:t,classes:a={},simple:e=!1,items:r}=s,h=A(s,["className","classes","simple","items"]);const p=Yt();return o("div",I(j({className:f(p.margin,t,a.root)},h),{children:r.map(c=>o(Ut,{className:f(a.card),simple:e,item:c},c.id))}))};export{Vt as T,Ut as a};
