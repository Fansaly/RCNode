(this.webpackJsonpRCNode=this.webpackJsonpRCNode||[]).push([[0],{198:function(e,t,a){e.exports=a.p+"static/media/houses_beautiful_beach_photo_wallpaper.b764c878.jpg"},274:function(e,t,a){e.exports=a(491)},331:function(e,t,a){},333:function(e,t,a){},341:function(e,t,a){},342:function(e,t,a){},344:function(e,t,a){},345:function(e,t,a){},368:function(e,t){},383:function(e,t){},384:function(e,t){},385:function(e,t){},400:function(e,t){},465:function(e,t,a){},466:function(e,t,a){},467:function(e,t,a){},488:function(e,t,a){},489:function(e,t,a){},490:function(e,t,a){},491:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(17),o=a.n(c),l=a(21),i=a(55),s=a(23),u=a(9),m=a(30),d=a(57),p=a(6),f=a(193),b=a.n(f),g=function(e){return b()(e,4)},h=a(15),E={},v={tab:Object(p.a)({all:{path:"/",name:"\u5168\u90e8",isTopicType:!1},good:{path:"/?tab=good",name:"\u7cbe\u534e",isTopicType:!1},share:{path:"/?tab=share",name:"\u5206\u4eab",isTopicType:!0},ask:{path:"/?tab=ask",name:"\u95ee\u7b54",isTopicType:!0},job:{path:"/?tab=job",name:"\u62db\u8058",isTopicType:!0},dev:{path:"/?tab=dev",name:"\u6d4b\u8bd5",isTopicType:!0}},E),topic:{path:"/topic",name:"\u4e3b\u9898"},user:{path:"/user",name:"\u7528\u6237"}},O=[],y={},j=v.tab;for(var w in j)"object"===typeof j&&(O.push(Object(p.a)({},j[w],{tab:w})),y=Object(p.a)({},y,Object(h.a)({},w,j[w])));var x=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=t.pathname,n=t.search;return!!e&&e==="".concat(a).concat(n)},N=[],k=v.tab;for(var C in k)k[C].isTopicType&&N.push(C);var S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.pathname,a=e.search,n=void 0===a?"":a,r=n.match(/\?tab=(\w+)/);return r?r[1]:"/"===t?"all":null},T=function(e){if(e instanceof Array)return e.map((function(e){return"(".concat(e,")")})).join("|")},_=function(){var e=["/?"];for(var t in v)"tab"===t?e.push("/\\?tab=(".concat(T(Object.keys(v[t])),")")):e.push("/".concat(t,"/\\w+"));return T(e)}(),R=function(e){var t="^(http(s)?://)?(www.)?".concat("cnodejs.org","(").concat(_,")$"),a=new RegExp(t,"i");return e.replace(a,(function(e,t,a,n,r){var c="cnodejs.org";return"undefined"!==typeof window&&(t=t&&"".concat(window.location.protocol,"//"),c=window.location.host),"".concat(t=t||"").concat(c).concat("/RCNode").concat(r)}))},A=a(194),I=a.n(A),M=function(e){var t=e.open,a=e.response,n=void 0===a?{}:a;return t||I.a.isEmpty(n)},L={accesstoken:void 0,avatar:void 0,uname:void 0,uid:void 0,isAuthed:!1},P=JSON.parse(localStorage.getItem("AUTH"));P=null!==P&&g(P.accesstoken)?Object(p.a)({},P,{isAuthed:!0}):L;var z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.data;switch(a){case"UPDATE_AUTH":n.isAuthed;var r=Object(l.a)(n,["isAuthed"]);return localStorage.setItem("AUTH",JSON.stringify(Object(p.a)({},r))),Object(p.a)({},n);case"DELETE_AUTH":return localStorage.removeItem("AUTH"),L;default:return e}},H={count:0},B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.data;switch(a){case"READ_MESSAGE":var r=e.count;return{count:r=Math.max(--r,0)};case"READ_ALL_MESSAGE":return H;case"UPDATE_MESSAGE":return{count:n};case"CLEAN_MESSAGE":return H;default:return e}},U={open:!1},D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:U,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.data;switch(a){case"OPEN_EDITOR":var r=n.action,c=Object(l.a)(n,["action"]);return Object(p.a)({open:!0,action:r||"create"},c);case"CLOSE_EDITOR":return Object(p.a)({},n,{open:!1});default:return e}},W={url:"",open:!1},F=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.data;switch(a){case"OPEN_SHARE":return"string"===typeof n&&(n={url:n,post:null}),Object(p.a)({},n,{open:!0});case"CLOSE_SHARE":return Object(p.a)({},e,{open:!1});default:return e}},G={open:!1},V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.data;switch(a){case"OPEN_ZOOM":return Object(p.a)({},n,{open:!0});case"CLOSE_ZOOM":return Object(p.a)({},e,{open:!1});default:return e}},Y={message:"",status:"success",open:!1},X=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.data;switch(a){case"OPEN_NOTIFICATION":return"string"===typeof n&&(n={message:n,status:"success"}),Object(p.a)({},n,{open:!0});case"CLOSE_NOTIFICATION":return Object(p.a)({},e,{open:!1});default:return e}},$={autoFollow:!0,themeMode:"light",cardPreview:!1,time:0},q=JSON.parse(localStorage.getItem("SETTINGS"))||{},J=q,K=J.autoFollow,Q=void 0===K||K,Z=J.themeMode,ee=void 0===Z?"light":Z,te=J.cardPreview,ae=void 0!==te&&te,ne=J.time;q={autoFollow:Q,themeMode:ee,cardPreview:ae,time:void 0===ne?0:ne};var re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.data;switch(a){case"UPDATE_SETTINGS":return localStorage.setItem("SETTINGS",JSON.stringify(Object(p.a)({},n))),Object(p.a)({},n);case"RESTORE_SETTINGS":return localStorage.removeItem("SETTINGS"),$;default:return e}},ce=JSON.parse(localStorage.getItem("THEME")),oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_COLORS":return Object(p.a)({},t.data);default:return e}},le=Object(d.c)({auth:z,message:B,editor:D,share:F,zoom:V,notification:X,settings:re,colors:oe}),ie=Object(d.d)(le,d.a.apply(void 0,Object(m.a)([]))),se=a(544),ue=a(247),me=a(492),de=a(195),pe=a.n(de),fe=(a(286),a(287),a(288),a(289),a(290),a(291),a(292),a(293),a(294),a(295),a(296),a(297),a(298),a(299),a(300),a(301),a(302),a(303),a(304),a(305),a(306),a(307),a(308),a(309),a(310),a(311),a(312),a(146)),be=a(147),ge=pe.a,he={h:"c",rb:"ruby",py:"python",sh:"bash",yml:"yaml",golang:"go",dockerfile:"docker",tex:"latex",bat:"batch",ps1:"powershell",psm1:"powershell"},Ee=document.querySelector("#prismjs"),ve={primary:{main:"#0082ea",dark:"#0376d2",light:"#2092ec"},background:{default:"#f4f4f4"}},Oe={primary:{main:"#0963ab",contrastText:"#ccc"},secondary:{main:"#ab003d",contrastText:"#ccc"},action:{active:"#ccc"},text:{primary:"#ccc"},background:{default:"#212121"},divider:"rgba(128,128,128,.12)"},ye=function(e){var t=Object(me.a)("(prefers-color-scheme: light)")?"light":"dark",a=Object(u.c)((function(e){return e.settings})),n=a.autoFollow,c=a.themeMode,o=n?t:c;r.a.useEffect((function(){!function(e){Ee.textContent=e}("light"===o?fe.a:be.a)}),[o]);var l=r.a.useMemo((function(){return Object(ue.a)({palette:Object(p.a)({},"light"===o?ve:Oe,{type:o})})}),[o]);return r.a.useEffect((function(){0}),[l]),r.a.createElement(se.a,{theme:l},e.children)},je=function(){var e=Object(i.h)(),t=e.pathname,a=e.search;return r.a.useEffect((function(){window.scrollTo(0,0)}),[t,a]),null},we=a(197),xe=a(546),Ne=Object(we.a)((function(e){return{root:{position:"fixed",top:0,left:0,right:0}}})),ke=function(){var e=Ne();return r.a.createElement("div",{className:e.root},r.a.createElement(xe.a,null))},Ce=a(11),Se=a(560),Te=function(e,t){if("html"===e)e=document.documentElement;else if("body"===e)e=document.body;else if(!document.body.contains(e))return;t=Object.assign({id:null,class:null},t),Object.keys(t).forEach((function(a){var n=t[a];Boolean(n)?e.setAttribute(a,n):e.removeAttribute(a)}))},_e=a(2),Re=a(556),Ae=a(584),Ie=a(557),Me=a(558),Le=a(249),Pe=a(210),ze=a.n(Pe),He=a(8),Be=a.n(He),Ue=a(91),De=a.n(Ue),We=a(198),Fe=a.n(We),Ge=function(e){var t,a,n;return Be.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return e="https://bing.fansaly.com",t={copyright:"\u9ed8\u8ba4\u80cc\u666f",url:Fe.a,time:(new Date).getTime()},r.prev=2,r.next=5,Be.a.awrap(De.a.get(e));case 5:return a=r.sent,n=a.data,r.abrupt("return",n);case 10:return r.prev=10,r.t0=r.catch(2),console.warn("Get Bing's image failed."),r.abrupt("return",t);case 14:case"end":return r.stop()}}),null,null,[[2,10]])},Ve=De.a.create({baseURL:"https://cnodejs.org/api/v1",timeout:3e3}),Ye=function(e){var t,a,n,r,c,o,l,i,s,u;return Be.a.async((function(m){for(;;)switch(m.prev=m.next){case 0:return t=e.url,a=e.method,n=void 0===a?"GET":a,r=e.params,c=void 0===r?{}:r,c="GET"===n?{params:c}:{data:c},m.prev=2,m.next=5,Be.a.awrap(Ve(Object(p.a)({method:n,url:t},c)));case 5:return o=m.sent,l=o.data,m.abrupt("return",{success:!0,data:"GET"===n?l.data:l});case 10:if(m.prev=10,m.t0=m.catch(2),i=m.t0.response,Boolean(i)){m.next=15;break}return m.abrupt("return",{success:!1,err_msg:"\u53d1\u751f\u5f02\u5e38"});case 15:return i.status,s=i.data.error_msg,u=void 0===s?"":s,m.abrupt("return",{success:!1,err_msg:(Boolean(u),u)});case 17:case"end":return m.stop()}}),null,null,[[2,10]])},Xe=function(e){var t,a;return Be.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.url,a=e.params,n.next=3,Be.a.awrap(Ye({method:"GET",url:t,params:a}));case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}}))},$e=function(e){var t,a;return Be.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.url,a=e.params,n.next=3,Be.a.awrap(Ye({method:"POST",url:t,params:a}));case 3:return n.abrupt("return",n.sent);case 4:case"end":return n.stop()}}))},qe=a(547),Je=a(553),Ke=a(587),Qe=a(495),Ze=a(135),et=a(77),tt=a(493),at=a(550),nt=a(549),rt=a(551),ct=a(552),ot=a(94),lt=a.n(ot),it=a(200),st=a.n(it),ut=a(201),mt=a.n(ut),dt=a(202),pt=a.n(dt),ft=a(92),bt="-2 -2 20 20",gt="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z",ht="\n  M 19 3\n  c 1.1 0 2 0.9 2 2\n  v 4\n  h -2\n  V 5\n  H 5\n  v 14\n  h 14\n  v -4\n  h 2\n  v 4\n  c 0 1.11 -0.9 2 -2 2\n  H 5\n  c -1.11 0 -2 -0.9 -2 -2\n  V 5\n  c 0 -1.1 0.89 -2 2 -2\n  Z\n\n  M 13.09 15.59\n  L 14.5 17\n  l 5 -5\n  l -5 -5\n  l -1.41 1.41\n  L 15.67 11\n  h -9.67\n  v 2\n  h 9.67\n  l -2.58 2.59\n  Z\n".replace(/\s{2,}/g," ").trim(),Et=r.a.createElement(ft.a,{viewBox:bt},r.a.createElement("path",{d:gt})),vt=r.a.createElement(ft.a,null,r.a.createElement("path",{d:ht}));function Ot(){return(Ot=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}var yt=function(e){e.styles;var t=Object(l.a)(e,["styles"]);return r.a.createElement("svg",Ot({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},t),r.a.createElement("path",{fill:"#4AC6C6",d:"M12 24C5.4 24 0 18.6 0 12S5.4 0 12 0s12 5.4 12 12-5.4 12-12 12z"}),r.a.createElement("path",{fill:"#FFF",d:"M11.9 4.5c-4.1.1-7.3 3.6-7.3 7.7v5.5c0 1 1.1 1.6 1.9 1.1.5-.3.9-.6 1.8-.6 1.9 0 1.9 1.3 3.7 1.3s1.9-1.3 3.7-1.3c.9 0 1.3.3 1.8.6.8.5 1.9-.1 1.9-1.1V12c.1-4.2-3.3-7.6-7.5-7.5z"}),r.a.createElement("circle",{fill:"#2A5083",cx:"9.5",cy:"10.1",r:".6"}),r.a.createElement("circle",{fill:"#2A5083",cx:"14.5",cy:"10.1",r:".6"}),r.a.createElement("path",{fill:"#2A5083",d:"M12 15.3c1.2 0 2.3-.8 2.6-1.9.1-.5-.2-.9-.7-.9H10c-.5 0-.8.5-.7.9.4 1.1 1.5 1.9 2.7 1.9z"}),r.a.createElement("path",{fill:"#FF4E4A",d:"M12 13.9c-.7 0-1.2.4-1.6.9.4.3 1 .5 1.6.5.6 0 1.1-.2 1.5-.5-.3-.5-.8-.9-1.5-.9z"}),r.a.createElement("path",{fill:"#DBF4F4",d:"M6.5 18.8c.4-.3.8-.6 1.7-.6v-.6c0-2.5-1.5-4.6-3.6-5.5v5.7c-.1.9 1 1.5 1.9 1zM16.3 18.3c.6.1.9.3 1.3.6.8.5 1.9-.1 1.9-1.1v-3.5c-1.6.9-2.7 2.3-3.2 4z"}))},jt=(a(331),Object(we.a)((function(e){return{badge:{"&:before, &:after":{content:'""',position:"absolute",top:0,right:0,marginTop:6,marginRight:6,width:6,height:6,borderRadius:"50%",opacity:0,transition:"opacity .3s linear"},"&.has-message:before":{opacity:1,backgroundColor:"rgba(128, 189, 1, .85)",boxShadow:"0 0 4px rgba(0, 0, 0, .15)"},"&.has-message:after":{animation:"$ripple 1.2s infinite ease-in-out",border:"1px solid #44b700"}},"@keyframes ripple":{"0%":{transform:"scale(.8)",opacity:1},"100%":{transform:"scale(2.4)",opacity:0}},hidden:{"& span":{visibility:"hidden"}}}}))),wt=function(){var e=Object(u.c)((function(e){return e.auth})),t=e.isAuthed,a=e.accesstoken,n=e.uname,c=e.avatar,o=Object(u.c)((function(e){return e.settings})).time,l=Object(u.c)((function(e){return e.message})),s=Object(u.b)(),m=Object(i.g)(),d=jt(),p=r.a.useRef(null),f=r.a.useRef(null),b=r.a.useRef(),g=r.a.useRef(null),E=r.a.useState(!1),v=Object(Ce.a)(E,2),O=v[0],y=v[1],j=function(e){g.current.contains(e.target)||y(!1)},w=function(e){j(e),m.push("/user/".concat(n))},x=function(e){var t=m.location.pathname;j(e),"/message"===t?m.replace("/message"):m.push("/message")},N=function(e){j(e),m.push("/settings")},k=function(e){j(e),m.push("/signin")},C=function(e){j(e),clearTimeout(f.current),f.current=setTimeout((function(){s({type:"DELETE_AUTH"}),s({type:"CLEAN_MESSAGE"})}),330)};return r.a.useEffect((function(){return function(){return clearTimeout(f.current)}}),[]),r.a.useEffect((function(){b.current=!1,clearTimeout(p.current);return function e(){var n,r,c,l;return Be.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:if(t){i.next=2;break}return i.abrupt("return");case 2:return n={url:"/message/count",params:{accesstoken:a}},i.next=5,Be.a.awrap(Xe(n));case 5:if(r=i.sent,c=r.success,l=r.data,!b.current){i.next=10;break}return i.abrupt("return");case 10:c&&s({type:"UPDATE_MESSAGE",data:l}),o>0&&(p.current=setTimeout((function(){e()}),1e3*o));case 12:case"end":return i.stop()}}))}(),function(){b.current=!0,clearTimeout(p.current)}}),[t,a,s,o]),r.a.createElement(qe.a,{item:!0,className:"flex"},r.a.createElement(qe.a,{container:!0,alignContent:"center",alignItems:"center",justify:"center",className:t?"info":"signin"},r.a.createElement(Le.a,{buttonRef:function(e){g.current=e},"aria-owns":O?"menu-list-grow":null,"aria-haspopup":"true",onClick:function(){y((function(e){return!e}))},className:Object(_e.a)("me",d.badge,{"has-message":Boolean(l.count)})},r.a.createElement(Ke.a,{className:"flex avatar"},t?r.a.createElement("img",{src:c,alt:"U"}):r.a.createElement(yt,null))),r.a.createElement(tt.a,{open:O,anchorEl:g.current,transition:!0,disablePortal:!0},(function(e){var a=e.TransitionProps,n=e.placement;return r.a.createElement(Ze.a,Object.assign({},a,{id:"menu-list-grow",style:{transformOrigin:"bottom"===n?"center top":"center bottom"}}),r.a.createElement(et.a,null,r.a.createElement(Qe.a,{onClickAway:j},r.a.createElement(nt.a,null,t&&r.a.createElement(at.a,{onClick:w},r.a.createElement(rt.a,null,r.a.createElement(lt.a,null)),r.a.createElement(ct.a,{primary:"\u8d44\u6599"})),t&&r.a.createElement(at.a,{onClick:x},r.a.createElement(rt.a,null,r.a.createElement(Je.a,{badgeContent:l.count,className:Object(_e.a)("badge",Object(h.a)({},d.hidden,l.count<=0))},r.a.createElement(st.a,null))),r.a.createElement(ct.a,{primary:"\u6d88\u606f"})),r.a.createElement(at.a,{onClick:N},r.a.createElement(rt.a,null,r.a.createElement(mt.a,null)),r.a.createElement(ct.a,{primary:"\u8bbe\u7f6e"})),t?r.a.createElement(at.a,{onClick:C},r.a.createElement(rt.a,null,vt),r.a.createElement(ct.a,{primary:"\u9000\u51fa"})):r.a.createElement(at.a,{onClick:k},r.a.createElement(rt.a,null,r.a.createElement(pt.a,null)),r.a.createElement(ct.a,{primary:"\u767b\u5f55"}))))))}))))},xt=a(554),Nt=(a(333),Object(we.a)((function(e){return{root:{"& .type":{color:"".concat("light"===e.palette.type?"#fff":"#ccc"," !important")}}}}))),kt=function(){var e=Nt(),t=function(e){return function(t,a){return x(e,a)}};return r.a.createElement(qe.a,{container:!0,justify:"center",alignItems:"center",className:"type-content"},O.map((function(a){var n=a.path,c=a.name;return r.a.createElement(s.c,{to:n,key:n,activeClassName:"".concat(e.root," current"),isActive:t(n)},r.a.createElement(xt.a,{className:"type",disableFocusRipple:!0},c))})))},Ct=a(585),St=a(496),Tt=a(497),_t=a(204),Rt=a.n(_t),At=a(205),It=a.n(At),Mt=a(206),Lt=a.n(Mt),Pt=a(207),zt=a.n(Pt),Ht=a(53),Bt=a.n(Ht),Ut=a(208),Dt=a.n(Ut),Wt=a(209),Ft=a.n(Wt),Gt=a(203),Vt=a.n(Gt),Yt=function(e){var t=e.all,a=e.good,n=e.top,c=e.tab,o=Object(l.a)(e,["all","good","top","tab"]),i=r.a.createElement(Vt.a,o);if(t)i=r.a.createElement(Rt.a,o);else if(n)i=r.a.createElement(It.a,o);else if(a)i=r.a.createElement(Lt.a,o);else switch(c){case"ask":i=r.a.createElement(zt.a,o);break;case"share":i=r.a.createElement(Bt.a,o);break;case"job":i=r.a.createElement(Dt.a,o);break;case"dev":i=r.a.createElement(Ft.a,o)}return i};function Xt(){return(Xt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}var $t=function(e){e.styles;var t=Object(l.a)(e,["styles"]);return r.a.createElement("svg",Xt({version:"1.1",id:"\u56fe\u5c42_1",xmlns:"http://www.w3.org/2000/svg",x:"0",y:"0",viewBox:"0 0 427.3 100.4",xmlSpace:"preserve"},t),r.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",fill:"#46483E",d:"M127.987 52.994c0-1.084-.57-2.08-1.506-2.617l-24.937-14.352a2.934 2.934 0 00-1.373-.396h-.258a2.973 2.973 0 00-1.377.396L73.598 50.377a3.023 3.023 0 00-1.508 2.617l.055 38.644c0 .538.279 1.038.752 1.301a1.446 1.446 0 001.496 0l14.821-8.485a3.036 3.036 0 001.507-2.613V63.784a3 3 0 011.504-2.606l6.311-3.636a3 3 0 013.008 0l6.308 3.636a3 3 0 011.506 2.606V81.84c0 1.074.578 2.062 1.51 2.613l14.816 8.485a1.464 1.464 0 001.506 0c.459-.263.748-.763.748-1.301l.049-38.643zM261.147-.129a1.508 1.508 0 00-2.241 1.315v38.271c0 .376-.201.724-.525.913a1.06 1.06 0 01-1.056 0l-6.246-3.599a3.013 3.013 0 00-3.01.001L223.122 51.17a3.007 3.007 0 00-1.506 2.607v28.801c0 1.076.573 2.07 1.505 2.609l24.946 14.408a3.011 3.011 0 003.014 0l24.95-14.408a3.012 3.012 0 001.506-2.609V10.786a3.013 3.013 0 00-1.545-2.631L261.147-.129zm-2.314 73.244c0 .27-.145.519-.378.651l-8.564 4.938a.749.749 0 01-.752 0l-8.566-4.938a.752.752 0 01-.377-.651v-9.891c0-.269.145-.517.376-.651l8.566-4.947a.752.752 0 01.754 0l8.564 4.947a.756.756 0 01.377.651v9.891zM350.4 62.966a3.011 3.011 0 001.499-2.604v-6.979a3.012 3.012 0 00-1.5-2.605l-24.787-14.392a3.015 3.015 0 00-3.02-.004l-24.938 14.397a3.012 3.012 0 00-1.506 2.609v28.793c0 1.083.58 2.081 1.521 2.616l24.783 14.122a3.015 3.015 0 002.954.018l14.989-8.332c.477-.266.772-.765.774-1.308a1.503 1.503 0 00-.755-1.315L315.32 73.576a1.503 1.503 0 01-.758-1.306v-9.024c0-.538.287-1.036.755-1.304l7.811-4.504a1.505 1.505 0 011.503 0l7.815 4.504c.467.268.754.766.754 1.304v7.101a1.507 1.507 0 002.263 1.303l14.937-8.684z"}),r.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",fill:"#80bd01",d:"M173.35 36.23a3.012 3.012 0 013.012 0l24.943 14.395a3.008 3.008 0 011.508 2.609v28.811a3.014 3.014 0 01-1.506 2.61L176.363 99.06a3.016 3.016 0 01-3.014 0l-24.938-14.405a3.014 3.014 0 01-1.506-2.61V53.233c0-1.076.574-2.071 1.507-2.608L173.35 36.23z"}),r.a.createElement("path",{fill:"#80bd01",d:"M398.833 99.472a4.941 4.941 0 01-2.468-.66l-7.853-4.646c-1.172-.656-.601-.888-.213-1.023 1.563-.543 1.881-.668 3.551-1.614.173-.099.404-.062.584.045l6.033 3.582a.775.775 0 00.728 0l23.522-13.577a.739.739 0 00.358-.636V53.796a.757.757 0 00-.364-.647l-23.513-13.565a.736.736 0 00-.724 0L374.97 53.152a.754.754 0 00-.373.644v27.146c0 .26.144.506.371.629l6.442 3.722c3.496 1.748 5.638-.31 5.638-2.379v-26.8c0-.379.305-.678.683-.678h2.983a.68.68 0 01.682.678v26.8c0 4.666-2.541 7.342-6.965 7.342-1.36 0-2.43 0-5.418-1.472l-6.168-3.551a4.97 4.97 0 01-2.467-4.291V53.796c0-1.763.942-3.41 2.467-4.287l23.521-13.592c1.489-.841 3.468-.841 4.944 0l23.519 13.592a4.967 4.967 0 012.472 4.287v27.146a4.979 4.979 0 01-2.472 4.291L401.31 98.812a4.944 4.944 0 01-2.477.66"}),r.a.createElement("path",{fill:"#80bd01",d:"M406.099 80.771c-10.294 0-12.449-4.725-12.449-8.687 0-.377.303-.678.68-.678h3.041a.68.68 0 01.675.575c.459 3.097 1.828 4.658 8.054 4.658 4.954 0 7.064-1.121 7.064-3.75 0-1.515-.598-2.64-8.299-3.394-6.437-.638-10.416-2.06-10.416-7.208 0-4.745 4-7.576 10.707-7.576 7.535 0 11.263 2.615 11.736 8.227a.688.688 0 01-.181.523.692.692 0 01-.498.217h-3.052a.679.679 0 01-.661-.531c-.731-3.258-2.513-4.299-7.345-4.299-5.41 0-6.039 1.885-6.039 3.297 0 1.711.742 2.209 8.047 3.176 7.229.955 10.662 2.309 10.662 7.39 0 5.125-4.274 8.06-11.726 8.06"}),r.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",fill:"#80bd01",d:"M323.735 61.618a.573.573 0 01.577 0l4.787 2.762c.18.103.289.294.289.5v5.527a.577.577 0 01-.289.501l-4.787 2.763a.577.577 0 01-.577 0l-4.783-2.763a.577.577 0 01-.289-.501V64.88c0-.206.109-.397.289-.5l4.783-2.762z"}),r.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",fill:"#46483E",d:"M36.28 61.87c1.098.65 1.358.255 1.742.035.385-.221 14.695-8.411 15.606-8.857.912-.446 1.315-1.915.114-2.61-1.201-.697-25.41-14.721-24.241-14.12 1.259.646-1.202-.829-2.626-.175-1.425.654-23.231 13.192-24.777 14.075-1.545.883-2.032 1.731-2.027 2.907.004 1.176-.078 27.253 0 28.801.078 1.548.69 2.052 1.506 2.609.816.558 22.901 13.505 24.572 14.41 1.671.907 2.768.597 3.853-.04 1.085-.639 22.727-13.003 23.593-13.554.866-.551 1.653-1.969-.157-2.992-1.811-1.022-14.779-8.693-15.279-8.943s-.796-.255-1.52.151c-.724.408-7.222 4.062-8.013 4.524s-.904.254-1.283.033c-.378-.222-7.085-4.135-7.859-4.571s-.866-.656-.868-1.25c-.001-.593-.018-8.121.023-8.998.04-.877.165-1.074.962-1.548.797-.474 6.695-3.978 7.166-4.293.47-.315 1.459-.345 2.231.108.772.452 6.184 3.647 7.282 4.298"}))},qt=Object(we.a)((function(e){var t;return{drawerPaper:{width:214,backgroundColor:"light"===e.palette.type?"rgba(255,255,255,.96)":"rgba(66,66,66,.98)"},toolbar:Object(p.a)({display:"flex",alignItems:"center",justifyContent:"flex-start"},e.mixins.toolbar),logo:(t={paddingLeft:16},Object(h.a)(t,e.breakpoints.up("sm"),{paddingLeft:24}),Object(h.a)(t,"& svg",{height:32,marginBottom:2}),t),spacing:{marginRight:6}}})),Jt=function(e){var t=qt(),a=Object(i.g)(),n=Object(i.h)(),c=function(e){return x(e,n)},o=function(){e.onClose()};return r.a.createElement(Ct.a,{open:e.open,variant:"temporary",onClose:o,onOpen:function(){},classes:{paper:t.drawerPaper},ModalProps:{keepMounted:!0}},r.a.createElement("div",{className:"".concat(t.toolbar," ").concat(t.logo)},r.a.createElement($t,null)),r.a.createElement(St.a,null,O.map((function(e){var n=e.tab,l=e.path,i=e.name;return r.a.createElement(Tt.a,{button:!0,key:n,component:"a",selected:c(l),onClick:function(e){return function(e){a.push(e),o()}(l)}},r.a.createElement(rt.a,{className:t.spacing},r.a.createElement(Yt,{color:"inherit",all:"all"===n,good:"good"===n,tab:n})),r.a.createElement(ct.a,{primary:i}))}))))},Kt=a(95);function Qt(){return(Qt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}var Zt=function(e){e.styles;var t=Object(l.a)(e,["styles"]);return r.a.createElement("svg",Qt({version:"1.1",id:"\u56fe\u5c42_1",xmlns:"http://www.w3.org/2000/svg",x:"0",y:"0",viewBox:"0 0 427.3 100.4",xmlSpace:"preserve"},t),r.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",fill:"#fff",d:"M127.987 52.994c0-1.084-.57-2.08-1.506-2.617l-24.937-14.352a2.934 2.934 0 00-1.373-.396h-.258a2.973 2.973 0 00-1.377.396L73.598 50.377a3.023 3.023 0 00-1.508 2.617l.055 38.644c0 .538.279 1.038.752 1.301a1.446 1.446 0 001.496 0l14.821-8.485a3.036 3.036 0 001.507-2.613V63.784a3 3 0 011.504-2.606l6.311-3.636a3 3 0 013.008 0l6.308 3.636a3 3 0 011.506 2.606V81.84c0 1.074.578 2.062 1.51 2.613l14.816 8.485a1.464 1.464 0 001.506 0c.459-.263.748-.763.748-1.301l.049-38.643zM261.147-.129a1.508 1.508 0 00-2.241 1.315v38.271c0 .376-.201.724-.525.913a1.06 1.06 0 01-1.056 0l-6.246-3.599a3.013 3.013 0 00-3.01.001L223.122 51.17a3.007 3.007 0 00-1.506 2.607v28.801c0 1.076.573 2.07 1.505 2.609l24.946 14.408a3.011 3.011 0 003.014 0l24.95-14.408a3.012 3.012 0 001.506-2.609V10.786a3.013 3.013 0 00-1.545-2.631L261.147-.129zm-2.314 73.244c0 .27-.145.519-.378.651l-8.564 4.938a.749.749 0 01-.752 0l-8.566-4.938a.752.752 0 01-.377-.651v-9.891c0-.269.145-.517.376-.651l8.566-4.947a.752.752 0 01.754 0l8.564 4.947a.756.756 0 01.377.651v9.891zM350.4 62.966a3.011 3.011 0 001.499-2.604v-6.979a3.012 3.012 0 00-1.5-2.605l-24.787-14.392a3.015 3.015 0 00-3.02-.004l-24.938 14.397a3.012 3.012 0 00-1.506 2.609v28.793c0 1.083.58 2.081 1.521 2.616l24.783 14.122a3.015 3.015 0 002.954.018l14.989-8.332c.477-.266.772-.765.774-1.308a1.503 1.503 0 00-.755-1.315L315.32 73.576a1.503 1.503 0 01-.758-1.306v-9.024c0-.538.287-1.036.755-1.304l7.811-4.504a1.505 1.505 0 011.503 0l7.815 4.504c.467.268.754.766.754 1.304v7.101a1.507 1.507 0 002.263 1.303l14.937-8.684z"}),r.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",fill:"#80bd01",d:"M173.35 36.23a3.012 3.012 0 013.012 0l24.943 14.395a3.008 3.008 0 011.508 2.609v28.811a3.014 3.014 0 01-1.506 2.61L176.363 99.06a3.016 3.016 0 01-3.014 0l-24.938-14.405a3.014 3.014 0 01-1.506-2.61V53.233c0-1.076.574-2.071 1.507-2.608L173.35 36.23z"}),r.a.createElement("path",{fill:"#80bd01",d:"M398.833 99.472a4.941 4.941 0 01-2.468-.66l-7.853-4.646c-1.172-.656-.601-.888-.213-1.023 1.563-.543 1.881-.668 3.551-1.614.173-.099.404-.062.584.045l6.033 3.582a.775.775 0 00.728 0l23.522-13.577a.739.739 0 00.358-.636V53.796a.757.757 0 00-.364-.647l-23.513-13.565a.736.736 0 00-.724 0L374.97 53.152a.754.754 0 00-.373.644v27.146c0 .26.144.506.371.629l6.442 3.722c3.496 1.748 5.638-.31 5.638-2.379v-26.8c0-.379.305-.678.683-.678h2.983a.68.68 0 01.682.678v26.8c0 4.666-2.541 7.342-6.965 7.342-1.36 0-2.43 0-5.418-1.472l-6.168-3.551a4.97 4.97 0 01-2.467-4.291V53.796c0-1.763.942-3.41 2.467-4.287l23.521-13.592c1.489-.841 3.468-.841 4.944 0l23.519 13.592a4.967 4.967 0 012.472 4.287v27.146a4.979 4.979 0 01-2.472 4.291L401.31 98.812a4.944 4.944 0 01-2.477.66"}),r.a.createElement("path",{fill:"#80bd01",d:"M406.099 80.771c-10.294 0-12.449-4.725-12.449-8.687 0-.377.303-.678.68-.678h3.041a.68.68 0 01.675.575c.459 3.097 1.828 4.658 8.054 4.658 4.954 0 7.064-1.121 7.064-3.75 0-1.515-.598-2.64-8.299-3.394-6.437-.638-10.416-2.06-10.416-7.208 0-4.745 4-7.576 10.707-7.576 7.535 0 11.263 2.615 11.736 8.227a.688.688 0 01-.181.523.692.692 0 01-.498.217h-3.052a.679.679 0 01-.661-.531c-.731-3.258-2.513-4.299-7.345-4.299-5.41 0-6.039 1.885-6.039 3.297 0 1.711.742 2.209 8.047 3.176 7.229.955 10.662 2.309 10.662 7.39 0 5.125-4.274 8.06-11.726 8.06"}),r.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",fill:"#80bd01",d:"M323.735 61.618a.573.573 0 01.577 0l4.787 2.762c.18.103.289.294.289.5v5.527a.577.577 0 01-.289.501l-4.787 2.763a.577.577 0 01-.577 0l-4.783-2.763a.577.577 0 01-.289-.501V64.88c0-.206.109-.397.289-.5l4.783-2.762z"}),r.a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",fill:"#fff",d:"M36.28 61.87c1.098.65 1.358.255 1.742.035.385-.221 14.695-8.411 15.606-8.857.912-.446 1.315-1.915.114-2.61-1.201-.697-25.41-14.721-24.241-14.12 1.259.646-1.202-.829-2.626-.175-1.425.654-23.231 13.192-24.777 14.075-1.545.883-2.032 1.731-2.027 2.907.004 1.176-.078 27.253 0 28.801.078 1.548.69 2.052 1.506 2.609.816.558 22.901 13.505 24.572 14.41 1.671.907 2.768.597 3.853-.04 1.085-.639 22.727-13.003 23.593-13.554.866-.551 1.653-1.969-.157-2.992-1.811-1.022-14.779-8.693-15.279-8.943s-.796-.255-1.52.151c-.724.408-7.222 4.062-8.013 4.524s-.904.254-1.283.033c-.378-.222-7.085-4.135-7.859-4.571s-.866-.656-.868-1.25c-.001-.593-.018-8.121.023-8.998.04-.877.165-1.074.962-1.548.797-.474 6.695-3.978 7.166-4.293.47-.315 1.459-.345 2.231.108.772.452 6.184 3.647 7.282 4.298"}))},ea=(a(341),Object(we.a)((function(e){return{header:"light"===e.palette.type?{backgroundColor:"#2196f3",backgroundImage:"linear-gradient(150deg, #21d6f3, #2196f3 28%, #ff7ed7 110%)","@media (max-width: 960px)":{backgroundImage:"linear-gradient(150deg, #21d6f3, #2196f3 32%, #ff7ed7 106%)"},"@media (max-width: 768px)":{backgroundImage:"linear-gradient(150deg, #21d6f3, #2196f3 34%, #ff7ed7 104%)"},"@media (max-width: 500px)":{backgroundImage:"linear-gradient(150deg, #21d6f3, #2196f3 36%, #ff7ed7 102%)"}}:{backgroundColor:"#363636"},toolbar:Object(p.a)({display:"flex",alignItems:"center",justifyContent:"flex-start"},e.mixins.toolbar),navPlaceholder:{height:48,"@media (max-width: 768px)":{height:38}},navHidden:{height:0}}}))),ta=Object(Re.a)()((function(e){var t=e.width,a=ea(),n=Object(i.h)(),c=r.a.useState({isMobile:!1,navHidden:!1,drawerOpen:!1}),o=Object(Ce.a)(c,2),l=o[0],u=o[1],m=function(){var e=l.navHidden,a=l.drawerOpen;Object(Re.c)("md",t)?(e=!e,a=!1):a=!a,u((function(t){return Object(p.a)({},t,{navHidden:e,drawerOpen:a})}))};return r.a.useEffect((function(){var e="/"!==n.pathname;u((function(t){return Object(p.a)({},t,{navHidden:e})}))}),[n]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:a.toolbar}),r.a.createElement("div",{className:Object(_e.a)(a.navPlaceholder,Object(h.a)({},a.navHidden,!Object(Re.c)("md",t)||l.navHidden||l.drawerOpen))}),r.a.createElement(Ie.a,{id:"header",className:a.header,position:"fixed"},r.a.createElement(Me.a,{onClick:function(e){e.target===e.currentTarget&&Kt.animateScroll.scrollTo(0,{duration:500,smooth:"easeInOutQuart"})}},r.a.createElement(Le.a,{color:"inherit",onClick:m},r.a.createElement(ze.a,null)),r.a.createElement("div",{id:"logo"},r.a.createElement(Ae.a,{xsDown:!0},r.a.createElement(s.b,{to:"/"},r.a.createElement(Zt,{className:"logo"})))),r.a.createElement(wt,null)),r.a.createElement(Ae.a,{smDown:!0,implementation:"css"},!l.navHidden&&r.a.createElement(kt,null))),r.a.createElement(Ae.a,{mdUp:!0},r.a.createElement(Jt,{open:l.drawerOpen,onClose:m})))})),aa=a(559);function na(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new Promise((function(t){setTimeout(t,e)}))}var ra=null;function ca(){var e;return Be.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,ra){t.next=10;break}return t.next=4,Be.a.awrap(na(1500));case 4:return t.next=6,Be.a.awrap(fetch("https://raw.githubusercontent.com/Fansaly/RCNode/master/messages.json"));case 6:return e=t.sent,t.next=9,Be.a.awrap(e.json());case 9:ra=t.sent;case 10:t.next=14;break;case 12:t.prev=12,t.t0=t.catch(0);case 14:ra=ra||[];case 15:case"end":return t.stop()}}),null,null,[[0,12]])}var oa=function(){var e=r.a.useState(!1),t=Object(Ce.a)(e,2),a=t[0],n=t[1],c=r.a.useState({}),o=Object(Ce.a)(c,2),l=o[0],i=o[1],s=function(){var e=function(){var e=localStorage.getItem("lastSeenNotice");return Boolean(e)?parseInt(e,10):0}(),t=ra.filter((function(t){return t.id>e}));t.length>0&&(i(t[0]),n(!0))},u=function(){n(!1),localStorage.setItem("lastSeenNotice",l.id)};return r.a.useEffect((function(){var e=!0;if(!/glebot/.test(navigator.userAgent))return Be.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Be.a.awrap(ca());case 2:e&&s();case 3:case"end":return t.stop()}})),function(){return e=!1}}),[]),r.a.createElement(aa.a,{key:l.id,anchorOrigin:{vertical:"top",horizontal:"center"},ContentProps:{"aria-describedby":"notification-message"},message:r.a.createElement("span",{id:"notification-message",dangerouslySetInnerHTML:{__html:l.text}}),action:r.a.createElement(xt.a,{size:"small",color:"secondary",onClick:u},"\u5173\u95ed"),open:a,autoHideDuration:2e4,onClose:u,onExited:s})},la=(a(342),{title:"RCNode",htmlAttributes:null,bodyAttributes:null,withHeader:!0}),ia=r.a.createContext(null),sa=function(e){var t=r.a.useReducer((function(e,t){var a=t.type,n=t.payload;switch(a){case"CHANGE":return Object(p.a)({},e,{title:n.title||e.title,htmlAttributes:n.htmlAttributes,bodyAttributes:n.bodyAttributes,withHeader:n.withHeader});case"RESET":return Object(p.a)({},la);default:throw new Error("Unrecognized type ".concat(a))}}),la),a=Object(Ce.a)(t,2),n=a[0],c=a[1],o=n.title,l=n.htmlAttributes,i=n.bodyAttributes,s=n.withHeader;return r.a.useEffect((function(){!function(e){document.title=Boolean(e)?e:"RCNode"}(o)}),[o]),r.a.useEffect((function(){Te("html",l)}),[l]),r.a.useEffect((function(){Te("body",i)}),[i]),r.a.createElement(ia.Provider,{value:c},r.a.createElement(Se.a,null),s&&r.a.createElement(r.a.Fragment,null,r.a.createElement(ta,null),r.a.createElement(oa,null)),e.children)},ua=a(4),ma=a.n(ua),da=function(e){var t=function(){var e=r.a.useContext(ia);return r.a.useCallback((function(t){var a=t.reset?"RESET":"CHANGE";e({type:a,payload:t})}),[e])}(),a=e.title,n=e.htmlAttributes,c=e.bodyAttributes,o=e.withHeader,l=void 0===o||o,i=e.reset;return t({title:a,htmlAttributes:n,bodyAttributes:c,withHeader:l,reset:void 0!==i&&i}),e.children};da.propTypes={children:ma.a.node.isRequired,title:ma.a.string,htmlAttributes:ma.a.object,bodyAttributes:ma.a.object,withHeader:ma.a.bool,reset:ma.a.bool};var pa=da,fa=a(561),ba=a(564),ga=a(562),ha=a(62),Ea=a(563),va=a(97),Oa=a.n(va),ya=a(212),ja=a.n(ya),wa=a(211),xa=a.n(wa),Na=a(96),ka=a.n(Na),Ca=Object(we.a)((function(e){return{avatar:{"& a":{display:"flex"},"& img":{display:"inline-flex",width:"100%",height:"100%",objectFit:"contain",color:"rgba(255, 255, 255, 0.9)",fontSize:12,lineHeight:0,textIndent:20}}}})),Sa=function(e){var t=Ca(),a=e.className,n=e.name,c=e.image,o=e.url;return r.a.createElement(Ke.a,{"aria-label":"Recipe",className:Object(_e.a)(t.avatar,a)},o?r.a.createElement(s.b,{to:n?o:"/"},c&&r.a.createElement("img",{src:c,alt:n||"\u7528\u6237\u5df2\u6ce8\u9500"})):r.a.createElement("a",null,c&&r.a.createElement("img",{src:c,alt:n||"\u7528\u6237\u5df2\u6ce8\u9500"})))},Ta=a(131),_a=a.n(Ta);a(343);_a.a.globalLocale="zh-cn";var Ra=_a.a,Aa=(a(344),Object(we.a)((function(e){return{button:{display:"flex",padding:0,fontWeight:"inherit",fontFamily:"inherit",lineHeight:"inherit",letterSpacing:"inherit",textTransform:"inherit"},expand:{margin:0,transform:"rotate(0deg)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"},title:{"& h5":{color:"light"===e.palette.type?"rgba(0,0,0,.92)":"rgba(200,200,200,.95)"}},state:{color:"light"===e.palette.type?"rgba(0,0,0,.5)":"rgba(125,125,125,.5)","& button":{color:"light"===e.palette.type?"rgba(0,0,0,.4)":"rgba(125,125,125,.4)"}}}}))),Ia=Object(Re.a)()((function(e){var t=e.item,a=e.simple,n=void 0!==a&&a,c=e.className,o=e.width,l=[],d=Aa(),p=Object(i.g)(),f=Object(u.c)((function(e){return e.settings})).cardPreview,b=r.a.useState(f),g=Object(Ce.a)(b,2),E=g[0],v=g[1];return r.a.createElement(fa.a,{className:Object(_e.a)("topicard",c,{expanded:!n&&E})},r.a.createElement(xt.a,{component:"div",className:d.button,onClick:function(e){l.includes(e.target)&&p.push("/topic/".concat(t.id))},disableFocusRipple:!0},r.a.createElement(qe.a,{container:!0,alignItems:"center",className:"topicard-header-wrapper"},r.a.createElement(qe.a,{container:!0,alignItems:"center",justify:"flex-start",className:"topicard-header",ref:function(e){return l=[].concat(Object(m.a)(l),[e])}},r.a.createElement(Sa,{className:"avatar",name:t.author.loginname,image:t.author.avatar_url,url:"/user/".concat(t.author.loginname)}),r.a.createElement(qe.a,{container:!0,alignItems:"center",justify:"flex-start",className:"topicard-title"},r.a.createElement(qe.a,{item:!0,className:Object(_e.a)("title",d.title)},!n&&r.a.createElement(qe.a,{item:!0,className:"type"},r.a.createElement(Le.a,null,r.a.createElement(Yt,{tab:t.tab,good:t.good,top:t.top}))),r.a.createElement(ha.a,{variant:"h5",ref:function(e){return l=[].concat(Object(m.a)(l),[e])}},r.a.createElement(s.b,{to:"/topic/".concat(t.id)},t.title)),!n&&r.a.createElement(ga.a,{className:"action"},r.a.createElement(Le.a,{className:Object(_e.a)(d.expand,Object(h.a)({},d.expandOpen,E)),onClick:function(){v((function(e){return!e}))},"aria-expanded":E,"aria-label":"Show more"},r.a.createElement(ka.a,null)))))),r.a.createElement(qe.a,{container:!0,wrap:"nowrap",alignItems:"center",className:"state-wrapper",ref:function(e){return l=[].concat(Object(m.a)(l),[e])}},r.a.createElement(qe.a,{container:!0,wrap:"nowrap",alignItems:"center",className:Object(_e.a)("state",d.state)},r.a.createElement(qe.a,{container:!0,item:!0,zeroMinWidth:!0,wrap:"nowrap",alignItems:"center",ref:function(e){return l=[].concat(Object(m.a)(l),[e])}},r.a.createElement(qe.a,{item:!0,zeroMinWidth:!0,className:"author"},r.a.createElement(s.b,{to:"/user/".concat(t.author.loginname)},t.author.loginname)),!n&&r.a.createElement(qe.a,{item:!0,className:"create"},r.a.createElement(Le.a,null,r.a.createElement(Oa.a,null)),r.a.createElement(Ra,{fromNow:!0},t.create_at))),r.a.createElement(qe.a,{item:!0,className:"count"},r.a.createElement(qe.a,{item:!0,className:"reply"},r.a.createElement(Le.a,null,r.a.createElement(xa.a,null)),n?r.a.createElement(Ra,{fromNow:!0},t.last_reply_at):r.a.createElement("span",null,t.reply_count)),!n&&r.a.createElement(qe.a,{item:!0,className:"visit"},r.a.createElement(Le.a,null,r.a.createElement(ja.a,null)),r.a.createElement("span",null,t.visit_count))))))),!n&&r.a.createElement(Ea.a,{className:"collapse",in:E,timeout:"auto",unmountOnExit:Object(Re.c)("sm",o)},r.a.createElement(ba.a,{className:"context"},r.a.createElement(ha.a,null,function(e){var t,a=function(e){var t=e.min,a=void 0===t?0:t,n=e.max,r=void 0===n?1:n;return a=Math.ceil(a),r=Math.floor(r),Math.floor(Math.random()*(r-a+1))+a}({min:200,max:400});return(t=e,t.replace(/<[^>]+>/g,"")).substr(0,a)}(t.content)))))})),Ma=Object(we.a)((function(e){return{margin:{marginTop:20,"&:first-child":{marginTop:0},"@media (max-width: 768px)":{marginTop:16}}}})),La=function(e){var t=e.items,a=e.simple,n=void 0!==a&&a,c=e.className,o=e.classes,i=void 0===o?{}:o,s=Object(l.a)(e,["items","simple","className","classes"]),u=Ma();return r.a.createElement("div",Object.assign({className:Object(_e.a)(u.margin,c,i.root)},s),t.map((function(e){return r.a.createElement(Ia,{className:Object(_e.a)(i.card),simple:n,item:e,key:e.id})})))},Pa=a(565),za=a(582),Ha=(a(345),function(e){var t=e.className,a=e.status,n=e.unmountOnExit,c=void 0===n||n;return r.a.createElement(qe.a,{item:!0,id:"progress",className:Object(_e.a)(t)},r.a.createElement(za.a,{className:"progress loading",classNames:"progress",in:"loading"===a,timeout:{enter:100,exit:550},onExited:function(){var t=e.onExited;Boolean(t)&&t()},unmountOnExit:c},r.a.createElement(Pa.a,{classes:{svg:"loop-color"}})))}),Ba=a(251),Ua=a(500),Da=a(132),Wa=a.n(Da),Fa=a(215),Ga=a.n(Fa),Va=a(214),Ya=a.n(Va),Xa=a(213),$a=a.n(Xa),qa=a(566),Ja=a(586),Ka=a(567),Qa=Object(we.a)((function(e){return{appbar:{top:"auto",bottom:0,boxShadow:"none"},wrapper:{position:"relative"},action:{position:"absolute",right:e.spacing(3.5),bottom:e.spacing(4)},fabMoveUp:{transform:"translate3d(0, -56px, 0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.enteringScreen,easing:e.transitions.easing.easeOut})},fabMoveDown:{transform:"translate3d(0, 0, 0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.leavingScreen,easing:e.transitions.easing.sharp})}}})),Za=Object(Re.a)()((function(e){var t,a=e.width,n=e.single,c=void 0!==n&&n,o=e.topic,l=void 0===o?null:o,s=Object(u.c)((function(e){return e.auth})),m=s.isAuthed,d=s.accesstoken,f=s.uname,b=Object(u.c)((function(e){return!e.editor.open})),g=Object(u.c)((function(e){return e.notification.open})),E=Object(u.b)(),v=Qa(),O=Object(i.i)().topic_id,y=r.a.useRef(!1),j=r.a.useState({favorite:void 0,expanded:!1,shareURL:null}),w=Object(Ce.a)(j,2),x=w[0],N=w[1],k=function(){N((function(e){return Object(p.a)({},e,{expanded:!1})}))},C=function(){var e={action:"update",url:"/topics/update",tab:l.tab,title:l.title,content:l.content,topic_id:l.topic_id};S(e)},S=function(e){E({type:"OPEN_EDITOR",data:e})};return r.a.useEffect((function(){var e=window.location,t=e.origin,a=e.pathname;return N((function(e){return Object(p.a)({},e,{shareURL:"".concat(t).concat(a)})})),function(){return y.current=!0}}),[]),r.a.useEffect((function(){null!==l&&N((function(e){return Object(p.a)({},e,{favorite:"boolean"===typeof e.favorite?e.favorite:Boolean(l)?l.is_collect:void 0})}))}),[l]),m&&r.a.createElement(Ie.a,{color:"default",component:"div",className:v.appbar},r.a.createElement("div",{className:v.wrapper},c?r.a.createElement(Ua.a,{in:b,unmountOnExit:!0},r.a.createElement(Ba.a,{color:"secondary","aria-label":"Edit",className:v.action,onClick:function(){S({action:"create",url:"/topics"})}},r.a.createElement(Wa.a,null))):Boolean(l)&&r.a.createElement(qa.a,{ariaLabel:"SpeedDial",className:Object(_e.a)(v.action,(t={},Object(h.a)(t,v.fabMoveUp,!Object(Re.c)("md",a)&&g),Object(h.a)(t,v.fabMoveDown,!Object(Re.c)("md",a)&&!g),t)),color:"secondary",hidden:!b,open:x.expanded,onClick:function(e){var t=x.expanded;N((function(e){return Object(p.a)({},e,{expanded:!t})})),t&&f===l.uname&&C()},onClose:k,onMouseEnter:function(){b&&N((function(e){return Object(p.a)({},e,{expanded:!0})}))},onMouseLeave:k,icon:f===l.uname?r.a.createElement(Ja.a,{openIcon:r.a.createElement(Wa.a,null)}):r.a.createElement(Ja.a,null)},r.a.createElement(Ka.a,{icon:r.a.createElement($a.a,null),tooltipTitle:"",onClick:function(e){var t={action:"reply",url:"/topic/".concat(O,"/replies"),reply_id:O,content:""};k(),S(t)}}),r.a.createElement(Ka.a,{icon:x.favorite?r.a.createElement(Ya.a,null):r.a.createElement(Ga.a,null),tooltipTitle:"",onClick:function(e){var t,a,n,r,c,o;return Be.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return t=x.favorite,a={url:t?"/topic_collect/de_collect":"/topic_collect/collect",params:{accesstoken:d,topic_id:l.topic_id}},k(),e.next=5,Be.a.awrap($e(a));case 5:if(n=e.sent,r=n.success,c=n.err_msg,!y.current){e.next=10;break}return e.abrupt("return");case 10:o=r?t?"\u53d6\u6d88\u6536\u85cf":"\u5df2\u6536\u85cf":{message:c||"\u64cd\u4f5c\u5931\u8d25",status:"error"},r&&N((function(e){return Object(p.a)({},e,{expanded:!0,favorite:!t})})),E({type:"OPEN_NOTIFICATION",data:o});case 13:case"end":return e.stop()}}))}}),r.a.createElement(Ka.a,{icon:r.a.createElement(Bt.a,null),tooltipTitle:"",onClick:function(e){k(),E({type:"OPEN_SHARE",data:x.shareURL})}}))))})),en=a(499),tn=a(216),an=a.n(tn),nn=a(217),rn=a.n(nn),cn=a(218),on=a.n(cn),ln=a(219),sn=a.n(ln),un=a(67),mn=a.n(un),dn=Object(we.a)((function(e){return{success:{backgroundColor:"#43a047"},error:{backgroundColor:"#d32f2f"},info:{backgroundColor:"#1976d2"},warning:{backgroundColor:"#ffa000"},icon:{fontSize:20},iconVariant:{opacity:.9,marginRight:e.spacing(1)},message:{display:"flex",alignItems:"center"}}})),pn={success:an.a,warning:rn.a,error:on.a,info:sn.a},fn=function(){var e=dn(),t=Object(u.b)(),a=Object(u.c)((function(e){var t=e.notification;return["success","warning","error","info"].includes(t.status)||(t.status="info"),t})),n=a.open,c=a.message,o=a.status,l=r.a.useCallback((function(){t({type:"CLOSE_NOTIFICATION"})}),[t]),i=r.a.useCallback((function(){n&&l()}),[n,l]);r.a.useEffect((function(){return function(){return i()}}),[i]);var s=pn[o],m=(new Date).getTime();return r.a.createElement(aa.a,{key:m,open:n,anchorOrigin:{vertical:"bottom",horizontal:"left"},autoHideDuration:3e3,onClose:l},r.a.createElement(en.a,{className:e[o],"aria-describedby":"snackbar-message-id",message:r.a.createElement("span",{id:"snackbar-message-id",className:e.message},r.a.createElement(s,{className:"".concat(e.icon," ").concat(e.iconVariant)}),c),action:r.a.createElement(Le.a,{color:"inherit",className:e.close,onClick:l},r.a.createElement(mn.a,{className:e.icon}))}))},bn=a(555),gn=a(569),hn=a(571),En=a(573),vn=a(580),On=Object(we.a)((function(e){return{flex:{margin:0,"& *":{flex:"1 1 auto",minHeight:210,padding:0},"& textarea":{position:"absolute",top:0,left:0,width:"100%",height:"100%",lineHeight:1.3125}}}})),yn=function(e){var t=e.inputRef,a=Object(l.a)(e,["inputRef"]),n=On(),c=a.content,o=a.disabled,i=a.onUpdateContent;return r.a.createElement(r.a.Fragment,null,r.a.createElement(vn.a,{className:n.flex,margin:"normal",multiline:!0,rows:"3",fullWidth:!0,id:"textarea",placeholder:"\u5199\u4e9b\u4ec0\u4e48\u5462\uff1f",inputRef:t,value:c,disabled:o,onChange:function(e){i(e)}}))},jn=a(220),wn=a.n(jn),xn=a(221),Nn=a.n(xn),kn=a(222),Cn=a.n(kn),Sn=a(223),Tn=a.n(Sn),_n=a(224),Rn=a.n(_n),An=a(225),In=a.n(An),Mn=a(226),Ln=a.n(Mn),Pn=a(227),zn=a.n(Pn),Hn=new Nn.a({html:!0,linkify:!0,typographer:!0,quotes:"\u201c\u201d\u2018\u2019",highlight:function(e,t){return t="string"===typeof t&&t.toLocaleLowerCase(),t=he[t]||t,Object.keys(ge.languages).includes(t)||(Boolean(t),t="markup"),ge.highlight(e,ge.languages[t])}}).use(Cn.a).use(Tn.a).use(Rn.a).use(In.a).use(Ln.a).use(zn.a),Bn=function(e){var t=e.url,a=e.text,n=e.prevSpaces,r=void 0===n?"":n,c=e.nextSpaces,o=void 0===c?"":c,l="".concat("/RCNode","/user/").concat(t);return"".concat(r,'<a target="_blank" href="').concat(l,'">').concat(a,"</a>").concat(o)};Hn.renderer.rules.text=function(e,t,a,n,r){var c=e[t].content;return Boolean(c)&&(c=c.replace(/^(@([\w\-_]+))$/,Bn({url:"$2",text:"$1"})).replace(/(\s+)(@([\w\-_]+))/g,Bn({url:"$3",text:"$2",prevSpaces:"$1"})).replace(/(@([\w\-_]+))(\s+)/g,Bn({url:"$2",text:"$1",nextSpaces:"$3"}))),c},Hn.renderer.rules.link_open=function(e,t,a,n,r){e[t].attrPush(["target","_blank"]);var c=e[t].attrIndex("href"),o=R(e[t].attrs[c][1]);/^\/\w+.*$/.test(o)?e[t].attrs[c][1]="".concat("/RCNode").concat(o):e[t].attrs[c][1]=o;for(var l=e.length-1;l>=0;l--){var i=e[l],s=i.type,u=i.level,m=i.content;"text"===s&&0!==u&&(e[l].content=R(m))}return r.renderToken(e,t,a)};var Un=Hn,Dn=["style","script","textarea","noscript"],Wn=function(e){return wn()(Un.render(e),{allowedTags:!1,exclusiveFilter:function(e){return Dn.includes(e.tag)}})},Fn=(a(464),a(465),Object(we.a)((function(e){return{root:"light"===e.palette.type?{color:"#24292e","& code":{backgroundColor:"rgba(27,31,35,.05)"},"& pre, & .highlight pre":{backgroundColor:"#f6f8fa"},"& blockquote":{borderLeftColor:"#dfe2e5"},"& h1, & h2":{borderBottomColor:"#eaecef"},"& img":{backgroundColor:"#fff"},"& a":{color:"#0366d6"},"& hr":{backgroundColor:"#e1e4e8",borderBottomColor:"#eee"},"& table":{"& th, & td":{borderColor:"#dfe2e5"},"& tr":{backgroundColor:"#fff",borderTopColor:"#c6cbd1","&:nth-child(2n)":{backgroundColor:"#f6f8fa"}}}}:{color:e.palette.text.primary,"& code":{backgroundColor:"rgba(200,200,200,.05)"},"& pre, & .highlight pre":{backgroundColor:"#333"},"& blockquote":{borderLeftColor:"#5a5a5a"},"& h1, & h2":{borderBottomColor:"#5d5d5d"},"& img":{backgroundColor:"transparent"},"& a":{color:"#1858a0"},"& hr":{backgroundColor:"#777",borderBottomColor:"#7c7c7c"},"& table":{"& th, & td":{borderColor:"#3a3b3c"},"& tr":{backgroundColor:"transparent",borderTopColor:"#2d2e2f","&:nth-child(2n)":{backgroundColor:"#2a2b2c"}}}}}}))),Gn=function(e){var t=e.className,a=e.markdownString,n=Fn(),c=Object(u.b)(),o=r.a.useRef();return r.a.useEffect((function(){var e=function(e){var t=e.target.getAttribute("src");c({type:"OPEN_ZOOM",data:{src:t}})};Array.from(o.current.querySelectorAll("img")).map((function(t){return t.addEventListener("click",e)}))}),[c]),r.a.createElement("div",{ref:o,className:Object(_e.a)("markdown-body",t,n.root),dangerouslySetInnerHTML:{__html:Wn(a)}})},Vn=a(568),Yn=a(231),Xn=a.n(Yn),$n=a(228),qn=a.n($n),Jn=a(230),Kn=a.n(Jn),Qn=a(229),Zn=a.n(Qn),er=a(99),tr=a.n(er),ar=a(98),nr=a.n(ar),rr=a(570),cr=a(589),or=a(583),lr=a(572),ir=(a(466),Object(we.a)((function(e){return{color:{color:"light"===e.palette.type?"#0366d6":"#1858a0","& svg":{color:"light"===e.palette.type?"rgba(0,0,0,.58)":"rgba(230,230,230,.58)"}},text:{padding:0,paddingRight:2},title:{paddingTop:20,paddingBottom:0,"& h6":{fontSize:"1.125rem"}},back:{marginLeft:-14},content:{paddingBottom:20}}}))),sr=function(e){var t=e.publishTab,a=e.onPublishTab,n=e.onPreview,c=e.onFullScreen,o=e.fullScreen,l=e.disabled,i=Object(u.c)((function(e){return e.auth})),s=i.isAuthed,m=i.uname,d=i.avatar,p=Object(u.c)((function(e){return e.editor})).action,f=r.a.useState(!1),b=Object(Ce.a)(f,2),g=b[0],h=b[1],E=r.a.useState(!1),v=Object(Ce.a)(E,2),O=v[0],j=v[1],w=r.a.useRef(null),x=ir(),k=function(){j(!1)},C=function(){h(!1)};return s&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"flex editor-header"},r.a.createElement(Sa,{name:m,image:d,className:"avatar"}),r.a.createElement("div",{className:"flex box"},r.a.createElement(ha.a,{className:"flex editor-uname"},m,r.a.createElement(qn.a,{color:"inherit"})),/(create)|(update)/.test(p)&&r.a.createElement(ha.a,{className:"flex editor-tpoic-type"},r.a.createElement(ha.a,{className:Object(_e.a)("flex",x.color,{disabled:l}),onClick:function(){j(!l)},component:"span"},t?y[t].name:"\u8bf7\u9009\u62e9\u5206\u7c7b",r.a.createElement(Yt,{tab:t})))),r.a.createElement("div",{className:"editor-header-actions"},r.a.createElement(Le.a,{buttonRef:function(e){w.current=e},variant:"contained",onClick:function(){h(!0)}},r.a.createElement(nr.a,null)))),r.a.createElement(Vn.a,{open:g,anchorEl:w.current,anchorReference:"anchorEl",anchorPosition:{top:30,left:30},onClose:C,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"}},r.a.createElement(St.a,null,r.a.createElement(Tt.a,{button:!0,onClick:function(){C(),n()}},r.a.createElement(rt.a,null,r.a.createElement(tr.a,{color:"inherit"})),r.a.createElement(ct.a,{className:x.text,primary:"\u9884\u89c8"})),r.a.createElement(Ae.a,{xsDown:!0},r.a.createElement(Tt.a,{button:!0,onClick:function(){C(),c()}},r.a.createElement(rt.a,null,o?r.a.createElement(Zn.a,{color:"inherit"}):r.a.createElement(Kn.a,{color:"inherit"})),r.a.createElement(ct.a,{className:x.text,primary:"\u5168\u5c4f"}))))),r.a.createElement(gn.a,{open:O,maxWidth:"xs",onClose:k},r.a.createElement(rr.a,{className:x.title},r.a.createElement(Le.a,{className:x.back,onClick:k},r.a.createElement(Xn.a,null)),"\u8bf7\u9009\u62e9\u4e00\u4e2a\u5206\u7c7b"),r.a.createElement(hn.a,{className:x.content},r.a.createElement(cr.a,{"aria-label":"topicType",name:"topicType",value:t,onChange:function(e,t){a(t),k()}},N.map((function(e){return r.a.createElement(lr.a,{key:e,value:e,label:y[e].name,control:r.a.createElement(or.a,null)})}))))))},ur=Object(we.a)((function(e){var t;return{title:(t={},Object(h.a)(t,e.breakpoints.up("sm"),{paddingLeft:36,paddingRight:36}),Object(h.a)(t,"& h2",{position:"relative",padding:"15px 0",fontSize:"1.25rem",borderBottomWidth:1,borderBottomStyle:"dashed",borderBottomColor:"light"===e.palette.type?"rgba(0,0,0,.08)":"rgba(210,210,210,.08)"}),t),close:{position:"absolute",top:"50%",right:-10,transform:"translateY(-50%)"},content:Object(h.a)({paddingBottom:36},e.breakpoints.up("sm"),{paddingLeft:36,paddingRight:36})}})),mr=Object(Re.a)()((function(e){var t=function(){e.onClose()},a=e.width,n=e.open,c=e.content,o=ur();return r.a.createElement(gn.a,{open:n,fullWidth:!0,maxWidth:"md",fullScreen:Object(Re.b)("xs",a),onClose:t},r.a.createElement(rr.a,{className:o.title,disableTypography:!0},r.a.createElement(ha.a,{component:"h2"},"\u9884\u89c8",r.a.createElement(Le.a,{className:o.close,onClick:t},r.a.createElement(mn.a,null)))),r.a.createElement(hn.a,{className:o.content},r.a.createElement(Gn,{markdownString:c})))})),dr=Object(we.a)((function(e){return{editor:{"& #editor .editor-header":{padding:"24px 0 14px 24px"}},title:{margin:0,padding:"0 24px 18px"},content:{paddingTop:0,paddingBottom:0},actions:{margin:0,padding:"10px 24px"},button:{margin:0,minWidth:110},doit:{marginLeft:16},cancel:{marginLeft:0}}})),pr=r.a.forwardRef((function(e,t){return r.a.createElement(bn.a,Object.assign({direction:"up",ref:t},e))})),fr={status:"idle",publishTab:null,title:"",content:"",validation:{title:{max:100,min:5},content:{max:null,min:3}},isOK:!1,isDiff:!1,preview:!1,fullScreen:!1,disabled:!1},br=Object(Re.a)()((function(e){var t=e.width,a=Object(u.c)((function(e){return e.auth})),n=a.isAuthed,c=a.accesstoken,o=Object(u.b)(),l=Object(i.h)(),s=dr(),m=r.a.useRef(),d=r.a.useRef(),f=r.a.useRef(),b=Object(u.c)((function(e){return e.editor})),g=b.open,E=b.action,v=b.url,O=b.topic_id,y=b.reply_id,j=r.a.useReducer((function(e,t){var a=t.type,n=t.data;switch(a){case"INIT":return Object(p.a)({},e,{},n);case"SET_PUBLISH_TAB":return Object(p.a)({},e,{publishTab:n});case"CHANGE":return Object(p.a)({},e,{},n);case"IS_OK":return Object(p.a)({},e,{isOK:n});case"IS_DIFF":return Object(p.a)({},e,{isDiff:n});case"CLOSE_PREVIEW":return Object(p.a)({},e,{preview:!1});case"OPEN_PREVIEW":return Object(p.a)({},e,{preview:!0});case"TOGGLE_FULL_SCREEN":return Object(p.a)({},e,{fullScreen:!e.fullScreen});case"REQUEST":return Object(p.a)({},e,{status:"working",disabled:!0});case"REQUEST_END":return Object(p.a)({},e,{status:n,disabled:!1});default:return e}}),fr),w=Object(Ce.a)(j,2),x=w[0],k=w[1],C=x.publishTab,T=x.title,_=x.content,R=x.validation,A=x.isOK,I=x.preview,M=x.fullScreen,L=x.disabled,P=function(e){return function(t){var a=t.target.value;"title"===e&&(a=a.replace(/\n/g,"")),k({type:"CHANGE",data:Object(h.a)({},e,a)})}},z=function(){k({type:"CLOSE_PREVIEW"})},H=r.a.useCallback((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.response;z(),L||o({type:"CLOSE_EDITOR",data:t?e:{}})}),[L,o]),B=function(){if(/(reply)/.test(E))return!0;var e=N.includes(C);return e||o({type:"OPEN_NOTIFICATION",data:{message:"\u8bf7\u9009\u62e9\u4e00\u4e2a\u4e3b\u9898\u5206\u7c7b",status:"error"}}),e};return r.a.useEffect((function(){var e=S(l);e=N.includes(e)?e:"",k({type:"SET_PUBLISH_TAB",data:e})}),[l]),r.a.useEffect((function(){return function(){return g&&H()}}),[l,g,H]),r.a.useEffect((function(){b.open&&k({type:"INIT",data:Object(p.a)({},b.tab?{publishTab:b.tab}:{},{title:b.title||"",content:b.content||""})})}),[b]),r.a.useEffect((function(){if(b.open){var e=(!!/(reply)/.test(b.action)||"string"===typeof T&&T.length>=R.title.min&&T.length<=R.title.max)&&"string"===typeof _&&_.length>=R.content.min;k({type:"IS_OK",data:e});var t=T!==b.title||_!==b.content;k({type:"IS_DIFF",data:t})}}),[T,_,R,b]),n&&r.a.createElement(r.a.Fragment,null,r.a.createElement(gn.a,{className:s.editor,PaperProps:{id:"editor"},open:g,onClose:H,TransitionComponent:pr,maxWidth:"sm",fullWidth:!0,fullScreen:!Object(Re.c)("sm",t)||M,keepMounted:!Object(Re.c)("sm",t),onEntered:function(){["create","update"].includes(E)?d.current.focus():f.current.focus()}},r.a.createElement(sr,{publishTab:C,onPublishTab:function(e){k({type:"SET_PUBLISH_TAB",data:e})},onPreview:function(){!Boolean(_)||_.trim().length<R.content.min?o({type:"OPEN_NOTIFICATION",data:{message:"\u592a\u77ed\u4e86\u5537\u3002",status:"info"}}):k({type:"OPEN_PREVIEW"})},onFullScreen:function(){k({type:"TOGGLE_FULL_SCREEN"})},fullScreen:M,disabled:L}),["create","update"].includes(E)&&r.a.createElement(vn.a,{className:s.title,margin:"normal",multiline:!0,rows:"1",rowsMax:"3",fullWidth:!0,placeholder:"\u6807\u9898...",inputRef:d,value:T,disabled:L,onChange:P("title")}),r.a.createElement(hn.a,{className:Object(_e.a)("flex",s.content)},r.a.createElement(yn,{disabled:L,content:_,inputRef:f,onUpdateContent:P("content")})),r.a.createElement(En.a,{className:s.actions},r.a.createElement(xt.a,{className:Object(_e.a)(s.button,s.cancel),onClick:H,disabled:L,color:"default",size:"large"},"\u53d6\u6d88"),r.a.createElement(xt.a,{className:Object(_e.a)(s.button,s.doit),variant:"contained",onClick:function(){var e,t,a,n,r;return Be.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:if(A&&B()){l.next=2;break}return l.abrupt("return");case 2:return m.current=!1,k({type:"REQUEST"}),e={accesstoken:c,tab:C||void 0,title:T,content:_,reply_id:y,topic_id:O},l.next=7,Be.a.awrap($e({url:v,params:e}));case 7:if(t=l.sent,a=t.success,n=t.err_msg,r=t.data,!m.current){l.next=13;break}return l.abrupt("return");case 13:k({type:"REQUEST_END",data:a?"success":"error"}),a&&H({action:E,request:Object(p.a)({},e),response:Object(p.a)({},r)}),o({type:"OPEN_NOTIFICATION",data:a?"create"===E?"\u53d1\u5e03\u6210\u529f ^_^":"update"===E?"\u66f4\u65b0\u6210\u529f ^_^":"reply"===E?"\u56de\u590d\u6210\u529f ^_^":"\u65e0\u6548\u64cd\u4f5c":{status:"error",message:n||("create"===E?"\u53d1\u5e03\u5931\u8d25 :(":"update"===E?"\u66f4\u65b0\u5931\u8d25 :(":"reply"===E?"\u56de\u590d\u5931\u8d25 :(":"\u65e0\u6548\u64cd\u4f5c")}});case 17:case"end":return l.stop()}}))},disabled:!A||L,color:"primary",size:"large"},"create"===E?"\u53d1\u5e03":"update"===E?"\u66f4\u65b0":"\u56de\u590d"))),r.a.createElement(mr,{open:I,content:_,onClose:z}))})),gr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=r.a.useState(!1),a=Object(Ce.a)(t,2),n=a[0],c=a[1];return r.a.useEffect((function(){var t=e.threshold,a=void 0===t?20:t,n=function(){var e=document.documentElement.offsetHeight||document.body.offsetHeight,t=document.documentElement.scrollTop||document.body.scrollTop,n=window.innerHeight;c(e>n&&e-(n+t)<=a)};return document.addEventListener("scroll",n),function(){return document.removeEventListener("scroll",n)}}),[e]),n},hr=function(){var e=r.a.useRef(!1),t=r.a.useRef(!1),a=r.a.useRef(),n=r.a.useRef(1),c=Object(i.h)(),o=c.pathname,s=c.search,d=r.a.useState(null),p=Object(Ce.a)(d,2),f=p[0],b=p[1],g=r.a.useState([]),h=Object(Ce.a)(g,2),E=h[0],v=h[1],O=r.a.useState("idle"),y=Object(Ce.a)(O,2),j=y[0],w=y[1],x=gr(),N=r.a.useCallback((function(r){var c,o,l,i;return Be.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return e.current=!0,w("loading"),c={url:"/topics",params:{tab:r.tab,page:n.current,limit:20,mdrender:!0}},s.next=5,Be.a.awrap(Xe(c));case 5:if(o=s.sent,l=o.success,i=o.data,!a.current){s.next=10;break}return s.abrupt("return");case 10:l?(v((function(e){return t.current?[].concat(Object(m.a)(e),[i]):[i]})),w("success"),t.current=!0,n.current+=1):w("error"),e.current=!1;case 12:case"end":return s.stop()}}))}),[]);r.a.useEffect((function(){e.current=!1,t.current=!1,n.current=1,v([]),b(S({pathname:o,search:s}))}),[o,s]),r.a.useEffect((function(){if(!(null===f||e.current||t.current&&!x))return a.current=!1,N({tab:f}),function(){e.current=!1,a.current=!0}}),[f,x,N]);var k=Object(u.c)((function(e){return e.editor}));return r.a.useEffect((function(){var e=function(e){var t=e.action,a=Object(l.a)(e,["action"]);if(M(a)||"create"!==t)return null;var n=new Date,r=a.uid,c=a.uname,o=a.avatar,i=a.request,s=i.tab,u=i.title,m=i.content;return[{author:{loginname:c,avatar_url:o},author_id:r,id:a.response.topic_id,tab:s,title:u,content:m,create_at:n,last_reply_at:n,reply_count:0,visit_count:0,good:!1,top:!1}]}(k);e&&v((function(t){return[e].concat(Object(m.a)(t))}))}),[k]),r.a.createElement(pa,{title:"RCNode"},r.a.createElement("div",{id:"container"},r.a.createElement("div",{className:"wrapper"},r.a.createElement("div",{className:"topic-list-container"},E.map((function(e,t){return r.a.createElement(La,{key:t,items:e})})))),r.a.createElement("div",{className:"status wrapper"},r.a.createElement(Ha,{status:j}))),r.a.createElement(Za,{single:!0}),r.a.createElement(br,null),r.a.createElement(fn,null))},Er=a(20),vr=a(250),Or=a(238),yr=a.n(Or),jr=a(232),wr=a.n(jr),xr=a(233),Nr=a.n(xr),kr=a(102),Cr=a.n(kr),Sr=Object(we.a)((function(e){return{icon:{minWidth:"auto"}}})),Tr=Object(Re.a)()((function(e){var t=e.topicAuthor,a=e.width,n=Object(i.i)().topic_id,c=Object(i.h)().hash,o=Sr(),l=r.a.useRef(),m=r.a.useRef(null),d=r.a.useState(!1),p=Object(Ce.a)(d,2),f=p[0],b=p[1],g=r.a.useState(""),h=Object(Ce.a)(g,2),E=h[0],v=h[1],O=Object(u.c)((function(e){return e.auth})),y=O.isAuthed,j=O.accesstoken,w=O.uname,x=Object(u.b)(),N=r.a.useState({ups:e.item.ups.length,isUped:e.item.is_uped}),k=Object(Ce.a)(N,2),C=k[0],S=k[1],T=e.item,_=T.author,R=_.loginname,A=_.avatar_url,I=T.id,M=T.create_at,L=T.content,P=function(){b(!1)},z=r.a.useRef();return r.a.useEffect((function(){if(c==="#".concat(I)){clearTimeout(z.current);var e=Object(Re.b)("xs",a)?56:64,t=10;return Object(Re.b)("xs",a)&&(t+=16),z.current=setTimeout((function(){Kt.scroller.scrollTo(c,{duration:500,smooth:"easeInOutQuart",offset:-(e+16+t)})}),0),function(){return clearTimeout(z.current)}}}),[c,I,a]),r.a.useEffect((function(){var e=window.location,t=e.origin,a=e.pathname;return v("".concat(t).concat(a)),function(){return l.current=!0}}),[]),r.a.createElement("div",{id:"#".concat(I),className:Object(_e.a)("topic-reply",{hilite:c==="#".concat(I),owned:R===t})},r.a.createElement("div",{className:"reply-content"},r.a.createElement(qe.a,{container:!0,wrap:"nowrap",className:Object(_e.a)("reply-header",o.header)},r.a.createElement(Ke.a,{"aria-label":"Recipe",className:"reply-avatar"},r.a.createElement(s.b,{to:R?"/user/".concat(R):"/"},A&&r.a.createElement("img",{src:A,alt:R||"\u7528\u6237\u5df2\u6ce8\u9500"}))),r.a.createElement(qe.a,{container:!0,item:!0,zeroMinWidth:!0,wrap:"nowrap",className:"reply-attrs"},r.a.createElement(qe.a,{container:!0,wrap:"nowrap",className:"group"},r.a.createElement(qe.a,{container:!0,item:!0,zeroMinWidth:!0,wrap:"nowrap",className:"uname-text"},r.a.createElement(qe.a,{item:!0,zeroMinWidth:!0},r.a.createElement(s.b,{className:"uname",to:R?"/user/".concat(R):"/"},R||"\u7528\u6237\u5df2\u6ce8\u9500")),R===t&&r.a.createElement(qe.a,{item:!0,className:"text"},"[\u4f5c\u8005]")),r.a.createElement(qe.a,{item:!0,className:"time"},r.a.createElement(Ra,{fromNow:!0},M)))),r.a.createElement(qe.a,{item:!0,className:"reply-actions"},r.a.createElement(Le.a,{className:"action up",onClick:function(){var e,t,a,n;return Be.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if(y){r.next=3;break}return x({type:"OPEN_NOTIFICATION",data:"\u767b\u5f55\u540e\u624d\u80fd \ud83d\udc4d \u54df~"}),r.abrupt("return");case 3:if(R!==w){r.next=6;break}return x({type:"OPEN_NOTIFICATION",data:"\u4e0d\u80fd \ud83d\udc4d \u81ea\u5df1\u7684\u54df~"}),r.abrupt("return");case 6:return l.current=!1,e={url:"/reply/".concat(I,"/ups"),params:{accesstoken:j}},r.next=10,Be.a.awrap($e(e));case 10:if(t=r.sent,a=t.success,n=t.err_msg,!l.current){r.next=15;break}return r.abrupt("return");case 15:a?S((function(e){var t=e.ups,a=e.isUped;return{ups:a?t-1:t+1,isUped:!a}})):n&&x({type:"OPEN_NOTIFICATION",data:{status:"error",message:n}});case 16:case"end":return r.stop()}}))}},C.isUped?r.a.createElement(wr.a,null):r.a.createElement(Nr.a,null)),Boolean(C.ups)&&r.a.createElement("span",{className:"num"},C.ups),r.a.createElement(Le.a,{className:"action more",buttonRef:function(e){m.current=e},variant:"contained",onClick:function(){b(!0)}},r.a.createElement(nr.a,null)),r.a.createElement(Vn.a,{open:f,anchorEl:m.current,anchorReference:"anchorEl",anchorPosition:{top:30,left:30},onClose:P,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"}},r.a.createElement(St.a,null,r.a.createElement(Tt.a,{className:"action post",onClick:function(){P(),x({type:"OPEN_SHARE",data:"".concat(E,"#").concat(I)})},button:!0},r.a.createElement(rt.a,{className:o.icon},r.a.createElement(Bt.a,null))),y&&r.a.createElement(Tt.a,{className:"action reply",onClick:function(){P();var e={action:"reply",url:"/topic/".concat(n,"/replies"),reply_id:I,content:"@".concat(R," ")};x({type:"OPEN_EDITOR",data:e})},button:!0},r.a.createElement(rt.a,{className:o.icon},r.a.createElement(Cr.a,null))))))),r.a.createElement("div",{className:"markdown-container"},r.a.createElement(Gn,{markdownString:L}))))})),_r=a(236),Rr=a.n(_r),Ar=a(234),Ir=a.n(Ar),Mr=a(235),Lr=a.n(Mr),Pr=Object(we.a)((function(e){return{fill:{flex:1},backdrop:{backgroundColor:"light"===e.palette.type?"rgba(255,255,255,.85)":"rgba(0,0,0,.92)"},actions:Object(h.a)({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1,top:0,left:0,right:0,height:56,padding:"0 18px",backgroundColor:"light"===e.palette.type?"#fff":"#212121",boxShadow:"0 0 1px rgba(0,0,0,.03), 0 0 2px rgba(0,0,0,.08)"},e.breakpoints.up("sm"),{height:64,padding:"0 24px"}),container:Object(h.a)({display:"flex",margin:0,paddingTop:56,width:"100%",height:"100%",maxWidth:"none",maxHeight:"none",backgroundColor:"transparent",boxShadow:"none",userSelect:"none",outline:"none",borderRadius:0},e.breakpoints.up("sm"),{paddingTop:64}),content:{display:"flex",padding:0},wrap:{position:"relative",display:"flex",flex:1,alignItems:"center",justifyContent:"center",overflow:"hidden",outline:"none"},loading:{position:"absolute",top:"50%",left:"50%",marginTop:-20,marginLeft:-20},box:{position:"relative",opacity:0,transform:"scale(.9)",transition:"transform .15s cubic-bezier(0,0,.2,1), opacity 85ms linear 65ms","&.ready":{opacity:1,transform:"none",transitionDuration:".18s, 85ms",transitionDelay:"0s, 0s"}},target:{display:"block",position:"relative",transition:"transform .3s cubic-bezier(.4,0,.2,1)",boxShadow:" 0 2px 6px rgba(0,0,0,.16), 0 1px 4px rgba(0,0,0,.03)",cursor:"default","&.drag-enabled":{cursor:"grab","&.drag-active":{cursor:"grabbing",transition:"none"}}},zoom:{position:"fixed",display:"flex",flexWrap:"nowrap",padding:"0 8px",left:30,bottom:32,borderRadius:22,overflow:"hidden",backgroundColor:"light"===e.palette.type?"#fff":"#212121",boxShadow:"0 0 2px rgba(0,0,0,.1), 0 2px 5px rgba(0,0,0,.16)",zIndex:1},btn:{padding:10,minWidth:44,borderRadius:0}}})),zr={x:0,y:0,iX:0,iY:0,sX:0,sY:0,mX:0,mY:0,scale:1,scaleLevel:1,scaleLevels:[.68,1,1.38,2,3.21,4.96],spacings:16,dragSpacings:50,disabledUp:!1,disabledDown:!1,disabledReset:!0,dragEnabled:!1,dragActive:!1,isTouch:void 0,ready:!1},Hr=Object(Re.a)()((function(e){var t=e.width,a=Object(u.c)((function(e){return e.zoom})),n=a.open,c=a.src,o=r.a.useState(zr),l=Object(Ce.a)(o,2),i=l[0],s=l[1],m=r.a.useRef(),d=r.a.useRef(),f=r.a.useRef(),b=r.a.useRef(),g=Object(u.b)(),h=Pr(),E=r.a.useCallback((function(){g({type:"CLOSE_ZOOM"})}),[g]);r.a.useEffect((function(){return function(){return n&&E()}}),[n,E]);var v=function(){var e=zr.spacings,t="ontouchstart"in window,a=b.current,n=a.naturalWidth,r=a.naturalHeight,c=d.current.clientWidth,o=d.current.clientHeight,l=c-2*e,i=o-2*e,u=r;n>l&&(u*=l/n),u>i&&(u=i);var m=n*u/r;s(Object(p.a)({},zr,{ready:!0,isTouch:t,wrapWidth:c,wrapHeight:o,maxWidth:l,maxHeight:i,naturalWidth:n,naturalHeight:r,initialWidth:m,initialHeight:u}))};r.a.useEffect((function(){var e=i.isTouch;if("boolean"===typeof e){var t=function(e){var t,a,n=e.iX,r=e.iY,c=e.sX,o=e.sY,l=e.mX,i=e.mY,s=function(e){var t=e.scale,a=e.wrapWidth,n=e.wrapHeight,r=e.maxWidth,c=e.maxHeight,o=e.initialWidth,l=e.initialHeight,i=zr.dragSpacings,s=o*t,u=l*t;return{tX:s>r?Math.max(0,(s-a)/2+i):0,tY:u>c?Math.max(0,(u-n)/2+i):0}}(e),u=s.tX,m=s.tY;return t=n+l-c,a=r+i-o,{x:t=Math.min(u,Math.max(-u,t)),y:a=Math.min(m,Math.max(-m,a))}},a=function(t){return{x:e?t.touches[0].pageX:t.clientX,y:e?t.touches[0].pageY:t.clientY}},n=function(e){if(e.preventDefault(),i.dragEnabled){var t=a(e),n=t.x,r=t.y;s((function(e){return Object(p.a)({},e,{sX:n,sY:r,dragActive:!0})}))}},r=function(e){if(e.preventDefault(),m.current){var n=a(e),r=n.x,c=n.y;s((function(e){var a=t(Object(p.a)({},e,{mX:r,mY:c})),n=a.x,o=a.y;return Object(p.a)({},e,{x:n,y:o,mX:r,mY:c})}))}},c=function(e){e.preventDefault(),m.current&&s((function(e){return Object(p.a)({},e,{iX:e.x,iY:e.y,dragActive:!1})}))};!function(){var t=e?"touchstart":"mousedown",a=e?"touchmove":"mousemove",o=e?"touchend":"mouseup",l=e?"touchcancel":"mouseleave";b.current.addEventListener(t,n),b.current.addEventListener(a,r),b.current.addEventListener(o,c),b.current.addEventListener(l,c)}(),function(){var e=document.head.querySelector('meta[name="viewport"]'),t=e.content;e.content="".concat(t,", ").concat("user-scalable=no"),s((function(a){return Object(p.a)({},a,{viewport:e,content:t})}))}()}}),[i.isTouch,i.dragEnabled]),r.a.useEffect((function(){m.current=i.dragActive}),[i.dragActive]);var O=function(e){return function(t){var a=i.scaleLevel,n=i.scaleLevels,r=n.length-1;switch(e){case"up":a++;break;case"down":a--;break;case"reset":a=1;break;default:return}var c=n[a=Math.min(Math.max(a,0),r)],o=a===r,l=0===a,u=1===a;s((function(e){return Object(p.a)({},e,{x:0,y:0,iX:0,iY:0,scale:c,scaleLevel:a,disabledUp:o,disabledDown:l,disabledReset:u})}))}};return r.a.useEffect((function(){if(i.ready){var e=i.scale,t=i.maxWidth,a=i.maxHeight,n=i.initialWidth,r=i.initialHeight,c=n*e>t||r*e>a;s((function(e){return Object(p.a)({},e,{dragEnabled:c})}))}}),[i.scale,i.ready,i.maxWidth,i.maxHeight,i.initialWidth,i.initialHeight]),r.a.useEffect((function(){if(Boolean(b.current)){var e="translate(".concat(i.x,"px, ").concat(i.y,"px) scale(").concat(i.scale,")");b.current.style.transform=e}}),[i.x,i.y,i.scale]),r.a.createElement(gn.a,{open:n,fullWidth:!0,maxWidth:!1,onClose:E,onEnter:function(){b.current.complete?v():b.current.addEventListener("load",v)},onExited:function(){!function(){var e=i.viewport,t=i.content;e&&(e.content=t)}(),s(zr)},BackdropProps:{className:h.backdrop},PaperProps:{className:h.container},keepMounted:Object(Re.b)("xs",t)},r.a.createElement(qe.a,{className:h.actions},r.a.createElement(qe.a,{className:h.fill},r.a.createElement(Le.a,{className:h.close,onClick:E},r.a.createElement(mn.a,null))),r.a.createElement(Le.a,{className:h.share,onClick:function(){var e=b.current.src;g({type:"OPEN_SHARE",data:e})},disabled:!i.ready},r.a.createElement(Bt.a,null))),r.a.createElement(hn.a,{className:h.content},r.a.createElement("div",{ref:d,className:h.wrap,onClick:function(e){var t=e.target;i.ready&&t!==d.current&&t!==f.current||E()},onKeyUp:function(){},role:"grid",tabIndex:"-1"},r.a.createElement(vr.a,{in:!i.ready,className:h.loading},r.a.createElement(Pa.a,null)),r.a.createElement("div",{ref:f,className:Object(_e.a)(h.box,{ready:i.ready})},r.a.createElement("img",{ref:b,className:Object(_e.a)(h.target,{"drag-enabled":i.dragEnabled,"drag-active":i.dragActive}),style:{height:i.initialHeight||"auto"},src:c,alt:"zoom"}))),r.a.createElement(qe.a,{className:h.zoom},r.a.createElement(xt.a,{className:h.btn,disabled:i.disabledDown||!i.ready,onClick:O("down")},r.a.createElement(Ir.a,null)),r.a.createElement(xt.a,{className:h.btn,disabled:i.disabledReset||!i.ready,onClick:O("reset")},r.a.createElement(Lr.a,null)),r.a.createElement(xt.a,{className:h.btn,disabled:i.disabledUp||!i.ready,onClick:O("up")},r.a.createElement(Rr.a,null)))))})),Br=a(237),Ur=a.n(Br),Dr=Object(we.a)((function(e){return{paper:{margin:10,width:"calc(100% - 20px)",maxWidth:615},content:{padding:24,display:"flex",flexWrap:"nowrap",alignItems:"flex-end"},button:{marginLeft:16,padding:"4px 10px"}}})),Wr=function(){var e=Dr(),t=Object(u.b)(),a=Object(u.c)((function(e){return e.share})),n=a.url,c=a.open,o=a.post,l=r.a.useCallback((function(){t({type:"CLOSE_SHARE"})}),[t]),i=r.a.useCallback((function(){c&&l()}),[c,l]);return r.a.useEffect((function(){return function(){return i()}}),[i]),r.a.createElement(gn.a,{open:c,onClose:l,classes:{paper:e.paper}},r.a.createElement(hn.a,{className:e.content},r.a.createElement(vn.a,{inputProps:{readOnly:!0},label:"".concat((o=Boolean(o)?" - #".concat(o):"","\u5206\u4eab\u94fe\u63a5".concat(o,"\uff1a"))),value:n,fullWidth:!0}),r.a.createElement(xt.a,{className:e.button,onClick:function(){return Be.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Be.a.awrap(Ur()(n));case 3:return e.prev=3,l(),e.finish(3);case 6:case"end":return e.stop()}}),null,null,[[0,,3,6]])},variant:"outlined",size:"small",autoFocus:!0},"\u590d\u5236")))},Fr=(a(467),Object(Re.a)()((function(e){var t=Object(Er.a)(),a=Object(i.i)().topic_id,n=Object(u.c)((function(e){return e.auth})).accesstoken,c=r.a.useState("loading"),o=Object(Ce.a)(c,2),d=o[0],f=o[1],b=r.a.useState({}),g=Object(Ce.a)(b,2),h=g[0],E=g[1],v=r.a.useState([]),O=Object(Ce.a)(v,2),j=O[0],w=O[1],x=r.a.useState(null),N=Object(Ce.a)(x,2),k=N[0],C=N[1],S=r.a.useState(null),T=Object(Ce.a)(S,2),_=T[0],R=T[1],A=r.a.useRef();r.a.useEffect((function(){return A.current=!1,function(){var e,t,r,c,o,i,s;Be.a.async((function(u){for(;;)switch(u.prev=u.next){case 0:return e={url:"/topic/".concat(a),params:{mdrender:!1,accesstoken:n}},u.next=3,Be.a.awrap(Xe(e));case 3:if(t=u.sent,r=t.success,c=t.data,o=t.err_msg,!A.current){u.next=9;break}return u.abrupt("return");case 9:r?(i=c.replies,s=Object(l.a)(c,["replies"]),f("success"),E(Object(p.a)({},s)),w(Object(m.a)(i)),C({uname:s.author.loginname,is_collect:s.is_collect,content:s.content,title:s.title,tab:s.tab,topic_id:a})):(f("error"),R(o));case 10:case"end":return u.stop()}}))}(),function(){return A.current=!0}}),[a,n]);var I=Object(u.c)((function(e){return e.editor}));return r.a.useEffect((function(){var e=function(e){var t=e.action,a=Object(l.a)(e,["action"]);if(M(a)||"reply"!==t)return null;var n=a.uname,r=a.avatar,c=a.request,o=c.content,i=c.reply_id,s=a.response.reply_id,u=a.match.params.topic_id;return{author:{loginname:n,avatar_url:r},id:s,ups:[],is_uped:!1,create_at:new Date,content:o,reply_id:i!==u?i:null}}(I);e&&w((function(t){return[].concat(Object(m.a)(t),[e])}));var t=function(e){var t=e.action,a=Object(l.a)(e,["action"]);if(M(a)||"update"!==t)return null;var n=a.request;return{tab:n.tab,title:n.title,content:n.content}}(I);t&&(E((function(e){return Object(p.a)({},e,{},t)})),C((function(e){return Object(p.a)({},e,{uname:t.author.loginname,is_collect:t.is_collect,content:t.content,title:t.title,tab:t.tab})})))}),[I]),r.a.createElement(pa,{title:h.title,bodyAttributes:{class:Object(_e.a)("topic-view",{"error-tips":"error"===d,"zero-spacings":Object(Re.b)("xs",e.width)})}},r.a.createElement("div",{id:"container"},r.a.createElement(vr.a,{in:Boolean(_)},r.a.createElement("div",{className:"wrapper tips error"},_)),Boolean(h.title)&&r.a.createElement("div",{id:"topic",className:Object(_e.a)("wrapper",{dark:"dark"===t.palette.type})},r.a.createElement("div",{className:"topic-main"},r.a.createElement(ha.a,{variant:"h5",className:"title"},h.title),r.a.createElement("div",{className:"topic-attrs-wrap"},r.a.createElement("div",{className:"topic-attrs"},r.a.createElement("span",{className:"attr-author"},r.a.createElement(Sa,{className:"avatar",image:h.author.avatar_url,name:h.author.loginname}),r.a.createElement(s.b,{to:"/user/".concat(h.author.loginname)},h.author.loginname)),r.a.createElement("span",{className:"attr-create"},r.a.createElement(Oa.a,null),r.a.createElement(Ra,{fromNow:!0},h.create_at)),r.a.createElement("span",{className:"attr-visit"},r.a.createElement(tr.a,null),r.a.createElement("em",null,h.visit_count),"\u6d4f\u89c8"),h.tab&&r.a.createElement("span",{className:"attr-tab"},r.a.createElement(yr.a,null),r.a.createElement("span",{className:h.tab},y[h.tab].name)))),r.a.createElement("div",{className:"markdown-container"},r.a.createElement(Gn,{markdownString:h.content}))),Boolean(j.length)&&r.a.createElement("div",{className:"topic-replies"},j.map((function(e,t){return r.a.createElement(Tr,{topicAuthor:h.author.loginname,item:e,key:e.id})})))),r.a.createElement("div",{className:"status wrapper"},r.a.createElement(Ha,{className:"mini",status:d}))),r.a.createElement(Za,{topic:k}),r.a.createElement(br,null),r.a.createElement(Hr,null),r.a.createElement(Wr,null),r.a.createElement(fn,null))}))),Gr=a(239),Vr=a.n(Gr),Yr=a(581),Xr=a(574),$r=a(240),qr=a.n($r),Jr=a(133),Kr=a.n(Jr),Qr=(a(488),Object(we.a)((function(e){return{cover:{backgroundColor:"light"===e.palette.type?"rgba(83,156,98,.8)":"rgba(69,97,74,.8)"},progress:{position:"absolute",top:0,left:0,right:0,height:3},colorPrimary:{backgroundColor:(e.palette.type,"rgba(165,211,247,.8)")},barColorPrimary:{backgroundColor:(e.palette.type,"#2698f3")},spacings:Object(h.a)({marginTop:30},e.breakpoints.down("xs"),{marginTop:0}),tips:{marginTop:40},tab:{fontSize:16},selected:{color:"#2ac2f9"},indicator:{backgroundColor:"#2ac2f9"}}}))),Zr=["topics","replies","collections"],ec={topics:{name:"\u6700\u8fd1\u521b\u5efa",data:[],show:!0},replies:{name:"\u6700\u8fd1\u56de\u590d",data:[],show:!1},collections:{name:"\u8bdd\u9898\u6536\u85cf",data:[],show:!1}},tc=Object(Re.a)()((function(e){var t=Object(i.i)().uname,a=r.a.useRef(),n=r.a.useRef(),c=r.a.useState({complete:!1}),o=Object(Ce.a)(c,2),s=o[0],u=o[1],m=r.a.useState(0),d=Object(Ce.a)(m,2),f=d[0],b=d[1],g=r.a.useState("loading"),E=Object(Ce.a)(g,2),v=E[0],O=E[1],y=r.a.useState(null),j=Object(Ce.a)(y,2),w=j[0],x=j[1],N=r.a.useState({uname:t}),k=Object(Ce.a)(N,2),C=k[0],S=k[1],T=r.a.useReducer((function(e,t){var a=t.type,n=t.data;switch(a){case"SET_TOPICS":return Object(p.a)({},e,{topics:Object(p.a)({},e.topics,{},n)});case"SET_REPLIES":return Object(p.a)({},e,{replies:Object(p.a)({},e.replies,{},n)});case"SET_COLLECTIONS":return Object(p.a)({},e,{collections:Object(p.a)({},e.collections,{},n)});case"RESTORE":return Object(p.a)({},ec);default:throw new Error("Unrecognized type ".concat(a))}}),ec),_=Object(Ce.a)(T,2),R=_[0],A=_[1],I=function(e,t){b(t);var a="SET_".concat(Zr[t].toUpperCase());A({type:a,data:{show:!0}})};r.a.useEffect((function(){if(Boolean(n.current)){var e=function(){u((function(e){return Object(p.a)({},e,{complete:!0})}))};return n.current.complete?e():n.current.addEventListener("load",e),function(){n.current.removeEventListener("load",e)}}}),[s.time]),r.a.useEffect((function(){return a.current=!1,O("loading"),S({uname:t}),A({type:"RESTORE"}),b(0),function(){var e,n,r,c,o,i,s,u;Be.a.async((function(m){for(;;)switch(m.prev=m.next){case 0:return e={url:"/user/".concat(t),params:{mdrender:!1}},m.next=3,Be.a.awrap(Xe(e));case 3:if(n=m.sent,r=n.success,c=n.data,o=n.err_msg,!a.current){m.next=9;break}return m.abrupt("return");case 9:r?(i=c.recent_topics,s=c.recent_replies,u=Object(l.a)(c,["recent_topics","recent_replies"]),S(Object(p.a)({},u)),A({type:"SET_TOPICS",data:{data:i}}),A({type:"SET_REPLIES",data:{data:s}}),O("success")):(O("error"),x(o));case 10:case"end":return m.stop()}}))}(),function(){var e,n,r,c;Be.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return e={url:"/topic_collect/".concat(t),params:{mdrender:!1}},o.next=3,Be.a.awrap(Xe(e));case 3:n=o.sent,r=n.success,c=n.data,!a.current&&r&&A({type:"SET_COLLECTIONS",data:{data:c}});case 7:case"end":return o.stop()}}))}(),u((function(e){return Object(p.a)({},e,{complete:!1})})),function(){var e;Be.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Be.a.awrap(Ge());case 2:e=t.sent,a.current||u((function(t){return Object(p.a)({},t,{},e)}));case 4:case"end":return t.stop()}}))}(),function(){return a.current=!0}}),[t]);var M=e.width,L=Qr(),P=r.a.useRef();return r.a.createElement(pa,{title:t,bodyAttributes:{class:"user-view"}},r.a.createElement("div",{className:Object(_e.a)("cover blur",L.cover)},r.a.createElement("div",{className:Object(_e.a)("bing-image",{complete:s.complete})},s.url&&r.a.createElement("img",{ref:n,src:s.url,alt:"background image",title:s.copyright,"aria-hidden":!0})),r.a.createElement(vr.a,{in:!s.complete},r.a.createElement(xe.a,{className:L.progress,classes:{colorPrimary:L.colorPrimary,barColorPrimary:L.barColorPrimary}})),C.loginname&&r.a.createElement("div",{className:"user wrapper"},r.a.createElement(Ke.a,{id:"avatar","aria-label":"Recipe"},r.a.createElement("img",{src:C.avatar_url,alt:C.loginname})),r.a.createElement("div",{className:"items"},r.a.createElement(Ae.a,{xsDown:!0},r.a.createElement("div",null,r.a.createElement("div",{className:"item name"},r.a.createElement(lt.a,null),C.loginname),r.a.createElement("div",{className:"item create"},r.a.createElement(Kr.a,null),r.a.createElement(Ra,{format:"YYYY-MM-DD HH:mm:ss"},C.create_at))),r.a.createElement("div",null,C.githubUsername&&r.a.createElement("div",{className:"item github"},Et,r.a.createElement("a",{target:"_blank",href:"https://github.com/".concat(C.githubUsername)},C.githubUsername)),r.a.createElement("div",{className:"item score"},r.a.createElement(qr.a,null),C.score))),r.a.createElement(Ae.a,{smUp:!0},r.a.createElement("div",null,C.githubUsername&&r.a.createElement("div",{className:"item github"},Et,r.a.createElement("a",{target:"_blank",href:"https://github.com/".concat(C.githubUsername)},C.githubUsername))),r.a.createElement("div",null,r.a.createElement("div",{className:"item create"},r.a.createElement(Kr.a,null),r.a.createElement(Ra,{format:"YYYY-MM-DD HH:mm:ss"},C.create_at))))))),r.a.createElement("div",{className:Object(_e.a)("tab-list",L.spacings)},r.a.createElement("div",{className:"wrapper"},r.a.createElement(Yr.a,Object.assign({classes:{indicator:L.indicator},value:f,onChange:I,centered:!0},Object(Re.c)("md",M)?{}:{variant:"fullWidth"}),Object.keys(R).map((function(e){return r.a.createElement(Xr.a,{classes:{root:L.tab,selected:L.selected},label:R[e].name,key:R[e].name,disabled:"success"!==v})}))))),r.a.createElement(vr.a,{in:Boolean(w)},r.a.createElement("div",{className:Object(_e.a)("tips error",Object(h.a)({},L.tips,Boolean(w)))},w)),r.a.createElement("div",{className:"recent wrapper"},r.a.createElement(Vr.a,{index:f,onChangeIndex:function(e){I(0,e)},enableMouseEvents:!0,animateHeight:!0,slideStyle:{overflow:"hidden"},ref:P},Object.keys(R).map((function(e){return r.a.createElement("div",{className:"r-".concat(e),key:e},r.a.createElement(ac,{data:R[e].data,show:R[e].show,ref:P}))})))),r.a.createElement("div",{className:"status wrapper"},r.a.createElement(Ha,{className:"mini",status:v})))})),ac=r.a.forwardRef((function(e,t){var a=e.data,n=e.show,c=r.a.useRef();return r.a.useEffect((function(){if(n)return clearTimeout(c.current),c.current=setTimeout((function(){t.current.getChildContext().swipeableViews.slideUpdateHeight()}),0),function(){return clearTimeout(c.current)}}),[t,n,a]),n&&a.map((function(e){return r.a.createElement(Ia,{className:"profile",item:e,simple:!0,key:e.id})}))}));function nc(){return(nc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}var rc=function(e){e.styles;var t=Object(l.a)(e,["styles"]);return r.a.createElement("svg",nc({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1440 810",preserveAspectRatio:"xMinYMin slice","aria-hidden":"true"},t),r.a.createElement("path",{id:"cell-4",fill:"#efefee",d:"M592.66 0c-15 64.092-30.7 125.285-46.598 183.777C634.056 325.56 748.348 550.932 819.642 809.5h419.672C1184.518 593.727 1083.124 290.064 902.637 0H592.66z"}),r.a.createElement("path",{id:"cell-5",fill:"#f6f6f6",d:"M545.962 183.777c-53.796 196.576-111.592 361.156-163.49 490.74 11.7 44.494 22.8 89.49 33.1 134.883h404.07c-71.294-258.468-185.586-483.84-273.68-625.623z"}),r.a.createElement("path",{id:"cell-6",fill:"#f7f7f7",d:"M153.89 0c74.094 180.678 161.088 417.448 228.483 674.517C449.67 506.337 527.063 279.465 592.56 0H153.89z"}),r.a.createElement("path",{id:"cell-7",fill:"#fbfbfc",d:"M153.89 0H0v809.5h415.57C345.477 500.938 240.884 211.874 153.89 0z"}),r.a.createElement("path",{id:"cell-3",fill:"#ebebec",d:"M1144.22 501.538c52.596-134.583 101.492-290.964 134.09-463.343 1.2-6.1 2.3-12.298 3.4-18.497 0-.2.1-.4.1-.6 1.1-6.3 2.3-12.7 3.4-19.098H902.536c105.293 169.28 183.688 343.158 241.684 501.638v-.1z"}),r.a.createElement("path",{id:"cell-1",fill:"#e1e1e1",d:"M1285.31 0a2161.05 2161.05 0 01-6.9 38.195C1321.507 86.39 1379.603 158.98 1440 257.168V0h-154.69z"}),r.a.createElement("path",{id:"cell-2",fill:"#e7e7e7",d:"M1278.31 38.196c-32.5 171.678-81.09 327.36-133.49 461.642v3.8c41 112.286 71.59 216.573 94.29 305.962l200.59.4V256.768c-60.3-97.988-118.29-170.48-161.39-218.573v.001z"}))},cc=(a(489),Object(we.a)((function(e){return{svg:"light"===e.palette.type?{}:{"& #cell-1":{fill:"#0d0d0c"},"& #cell-2":{fill:"#141413"},"& #cell-3":{fill:"#181817"},"& #cell-4":{fill:"#1c1d1c"},"& #cell-5":{fill:"#222322"},"& #cell-6":{fill:"#232423"},"& #cell-7":{fill:"#272727"}},root:{"&.success":{"& label":{color:"#508028"},"& .MuiInput-underline":{"&:hover:before":{borderBottomColor:"light"===e.palette.type?"rgba(128,189,1,.87)":"rgba(108,168,3,.87)"},"&:before":{borderBottomColor:"light"===e.palette.type?"#56b700":"#519217"},"&:after":{borderBottomColor:"light"===e.palette.type?"#80bd01":"#519217"}}},"&.error":{"& label":{color:"light"===e.palette.type?"#f44336":"#b92c22"},"& .MuiInput-underline":{"&:after":{borderBottomColor:"light"===e.palette.type?"#f44336":"#b92c22"}}},"&.focus":{"& label":{color:"#46483e"},"& .MuiInput-underline":{"&:after":{borderBottomColor:"#46483e"}}},"& .MuiInput-underline":{"&:hover:before":{borderBottomWidth:1,borderBottomColor:"rgba(70,72,69,.8)"},"&:after":{borderBottomColor:"rgba(70,72,69,.8)"}}}}}))),oc=function(){var e,t=cc(),a=Object(i.g)(),n=Object(u.b)(),c=r.a.useRef(),o=Object(u.c)((function(e){return e.auth})),s=o.isAuthed,m=Object(l.a)(o,["isAuthed"]),d=r.a.useState(Object(p.a)({status:s?"success":"idle",focus:!1===s,isUUID:!0===s,diff:!1===s},m,{isAuthed:s})),f=Object(Ce.a)(d,2),b=f[0],E=f[1];return r.a.useEffect((function(){return function(){return c.current=!0}}),[]),r.a.createElement(pa,{title:"\u767b\u5f55",withHeader:!1,htmlAttributes:{id:"signin"}},r.a.createElement("div",{className:"container flex"},r.a.createElement(rc,{className:"".concat(t.svg," bg")}),r.a.createElement("div",{className:"flex area top"}),r.a.createElement("div",{className:"flex area mid"},r.a.createElement("div",{className:"logo"},r.a.createElement($t,null)),r.a.createElement(Ea.a,{in:b.isAuthed},b.isAuthed&&r.a.createElement("div",{className:Object(_e.a)("auth-user",{show:b.isAuthed,diff:b.diff})},r.a.createElement("div",{className:"avatar"},r.a.createElement(Ke.a,{className:"item",alt:b.uname,src:b.avatar})),r.a.createElement(ha.a,{className:"name"},r.a.createElement("span",{className:"item"},b.uname)))),r.a.createElement("form",{noValidate:!0,autoComplete:"off",onSubmit:function(e){e.preventDefault();var t=b.isUUID,a=b.diff;t&&a&&(c.current=!1,function(){var e,t,a,r,o,l,i;Be.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return e=b.accesstoken,t={url:"/accesstoken",params:{accesstoken:e}},s.next=4,Be.a.awrap($e(t));case 4:if(a=s.sent,r=a.success,o=a.data,l=a.err_msg,!c.current){s.next=10;break}return s.abrupt("return");case 10:r?(i={isAuthed:!0,accesstoken:e,avatar:o.avatar_url,uname:o.loginname,uid:o.id},n({type:"UPDATE_AUTH",data:i}),E((function(e){return Object(p.a)({},e,{status:"success",diff:!1},i)}))):(E((function(e){return Object(p.a)({},e,{status:"error"})})),l&&n({type:"OPEN_NOTIFICATION",data:{message:l,status:"error"}}));case 11:case"end":return s.stop()}}))}())}},r.a.createElement(vn.a,{fullWidth:!0,id:"accesstoken",label:"Access Token",margin:"normal",spellCheck:"false",autoFocus:!b.isAuthed,error:"error"===b.status,className:Object(_e.a)(t.root,b.status,{focus:b.focus}),onChange:(e="accesstoken",function(t){var a=t.target.value.trim(),n=m.accesstoken,r=a===n;E((function(t){var n;return Object(p.a)({},t,(n={status:r?"success":"idle"},Object(h.a)(n,e,a),Object(h.a)(n,"isUUID",g(a)),Object(h.a)(n,"diff",!1===r),n))}))}),value:b.accesstoken||"",onFocus:function(){E((function(e){return Object(p.a)({},e,{focus:!0})}))},onBlur:function(){E((function(e){return Object(p.a)({},e,{focus:!1})}))}}),r.a.createElement("div",{className:"btn"},r.a.createElement(xt.a,Object.assign({variant:"outlined"},b.diff?{type:"submit",disabled:!b.isUUID}:{onClick:function(){a.length>1?a.goBack():a.push("/")},autoFocus:b.isAuthed}),b.diff?"\u6388\u6743":"\u5b8c\u6210")))),r.a.createElement("div",{className:"flex area bot"})),r.a.createElement(fn,null))},lc=a(501),ic=a(244),sc=a.n(ic),uc=a(590),mc=a(575),dc=a(576),pc=a(578),fc=a(577),bc=a(243),gc=a.n(bc),hc=a(134),Ec=a.n(hc),vc=Object(we.a)((function(e){return{unRead:{boxShadow:"0 1px 2px 0 rgba(245,0,87,.16),0 1px 1px 0 rgba(245,0,87,.12),0 2px 1px -1px rgba(245,0,87,.1)","&:before":{backgroundColor:"rgba(245,0,87,.12)"}},summary:{"@media (max-width: 768px)":{paddingLeft:20,paddingRight:20},"@media (max-width: 600px)":{paddingLeft:16,paddingRight:16},"@media (max-width: 420px)":{paddingLeft:14,paddingRight:14}},content:{maxWidth:"100%",minWidth:0},moreUnRead:{color:"rgba(245,0,87,.7)"},avatar:{marginRight:10},title:{fontSize:16,lineHeight:"1.5em"},uname:{display:"block",fontWeight:700},time:{paddingLeft:10,"& time":{marginLeft:3},"& div":{display:"flex",alignItems:"center"}},sizeAt:{fontSize:18,transform:"translateY(-1px)"},sizeReply:{fontSize:20,transform:"translateY(-1.5px)"},gray:{color:"light"===e.palette.type?"rgba(0,0,0,.5)":"rgba(130,130,130,.5)"},actions:{paddingLeft:14,paddingRight:14,"@media (max-width: 600px)":{paddingTop:12,paddingBottom:12},"@media (max-width: 420px)":{paddingLeft:12,paddingRight:12}},btn:{padding:"6px 10px"},icon:{marginLeft:2,fontSize:14}}})),Oc=function(e){var t=r.a.useState(Object(p.a)({},e.item)),a=Object(Ce.a)(t,2),n=a[0],c=a[1],o=Object(u.c)((function(e){return e.auth})).accesstoken,l=Object(u.b)(),i=r.a.useRef(!1);r.a.useEffect((function(){return function(){return i.current=!0}}),[]);var m=vc(),d=e.hasRead;return r.a.createElement(uc.a,{className:Object(_e.a)(Object(h.a)({},m.unRead,!n.has_read&&!d)),onChange:function(e,t){n.has_read||function(){var e,t,a;Be.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return e={url:"/message/mark_one/".concat(n.id),params:{accesstoken:o}},r.next=3,Be.a.awrap($e(e));case 3:t=r.sent,a=t.success,!i.current&&a&&(l({type:"READ_MESSAGE"}),c((function(e){return Object(p.a)({},e,{has_read:!0})})));case 6:case"end":return r.stop()}}))}()}},r.a.createElement(mc.a,{classes:{root:m.summary,content:m.content,expandIcon:Object(_e.a)(Object(h.a)({},m.moreUnRead,!n.has_read&&!d))},expandIcon:r.a.createElement(ka.a,null)},r.a.createElement(qe.a,{container:!0,wrap:"nowrap",alignItems:"center"},r.a.createElement(qe.a,{item:!0,className:m.avatar},r.a.createElement(Sa,{name:n.author.loginname,image:n.author.avatar_url})),r.a.createElement(qe.a,{container:!0,item:!0,zeroMinWidth:!0,wrap:"wrap",alignItems:"center"},r.a.createElement(qe.a,{container:!0,item:!0,zeroMinWidth:!0,wrap:"wrap",alignItems:"center"},r.a.createElement(ha.a,{noWrap:!0,component:"h4",className:m.title},n.topic.title)),r.a.createElement(qe.a,{container:!0,item:!0,zeroMinWidth:!0,wrap:"nowrap",alignItems:"center"},r.a.createElement(qe.a,{item:!0,zeroMinWidth:!0},r.a.createElement(ha.a,{noWrap:!0,component:"span",className:Object(_e.a)(m.uname,m.gray)},n.author.loginname)),r.a.createElement(qe.a,{item:!0,className:m.time},r.a.createElement(ha.a,{noWrap:!0,component:"div",className:m.gray},"reply"===n.type?r.a.createElement(Cr.a,{className:m.sizeReply}):r.a.createElement(gc.a,{className:m.sizeAt}),r.a.createElement(Ra,{fromNow:!0},n.reply.create_at))))))),r.a.createElement(dc.a,null,r.a.createElement(Gn,{markdownString:n.reply.content})),r.a.createElement(fc.a,null),r.a.createElement(pc.a,{className:m.actions},r.a.createElement(xt.a,{component:s.b,className:m.btn,to:"/user/".concat(n.author.loginname),target:"_blank",size:"medium"},"\u6d4f\u89c8\u7528\u6237",r.a.createElement(Ec.a,{className:m.icon})),r.a.createElement(xt.a,{component:s.b,className:m.btn,to:"/topic/".concat(n.topic.id,"#").concat(n.reply.id),target:"_blank",size:"medium",color:"primary"},"\u524d\u5f80\u67e5\u770b",r.a.createElement(Ec.a,{className:m.icon}))))},yc=Object(we.a)((function(e){return{spacings:{marginTop:40,marginBottom:10,padding:"0 7px","@media (max-width: 768px)":{marginTop:30,marginBottom:8},"@media (max-width: 600px)":{marginTop:20,marginBottom:4}},text:{position:"relative",flex:1,marginRight:8,fontSize:14,color:"light"===e.palette.type?"rgba(0,0,0,.6)":"rgba(190,190,190,.6)",pointerEvents:"none",transition:"opacity .15s cubic-bezier(.4,0,.2,1)","@media (max-width: 600px)":{marginRight:4},"& span":{position:"absolute",top:-9,right:0,whiteSpace:"nowrap"}},opacity:{opacity:.6},error:{color:e.palette.secondary.main}}})),jc=function(){var e,t=r.a.useState([]),a=Object(Ce.a)(t,2),n=a[0],c=a[1],o=r.a.useState({status:"loading",err_msg:"\u53d1\u751f\u9519\u8bef"}),l=Object(Ce.a)(o,2),s=l[0],d=l[1],f=Object(u.c)((function(e){return Object(p.a)({},e.auth,{message:Object(p.a)({},e.message)})})),b=f.isAuthed,g=f.accesstoken,E=f.message,v=r.a.useRef(!1),O=Object(u.b)(),y=Object(i.g)(),j=yc();return r.a.useEffect((function(){if(Boolean(g))return function(){var e,t,a,n,r,o,l,i,s;Be.a.async((function(u){for(;;)switch(u.prev=u.next){case 0:return e={url:"/messages",params:{accesstoken:g,mdrender:!1}},u.next=3,Be.a.awrap(Xe(e));case 3:if(t=u.sent,a=t.success,n=t.data,r=n.hasnot_read_messages,o=void 0===r?[]:r,l=n.has_read_messages,i=void 0===l?[]:l,s=t.err_msg,!v.current){u.next=13;break}return u.abrupt("return");case 13:a?(O({type:"UPDATE_MESSAGE",data:o.length}),d({status:"success"}),c([].concat(Object(m.a)(o),Object(m.a)(i)))):d((function(e){return{status:"error",err_msg:s||e.err_msg}}));case 14:case"end":return u.stop()}}))}(),function(){return v.current=!0}}),[g,O]),r.a.useEffect((function(){b||y.push("/")}),[b,y]),r.a.createElement(pa,{title:"\u6d88\u606f"},r.a.createElement("div",{className:"wrapper"},r.a.createElement(qe.a,{container:!0,alignItems:"center",justify:"flex-end",className:j.spacings},r.a.createElement(qe.a,{item:!0,className:Object(_e.a)(j.text,(e={},Object(h.a)(e,j.opacity,"success"!==s.status||0===E.count),Object(h.a)(e,j.error,"error"===s.status),e))},r.a.createElement(vr.a,{unmountOnExit:!0,in:"loading"===s.status},r.a.createElement("span",null,"\u83b7\u53d6\u6d88\u606f\u4e2d\u2026\u2026")),r.a.createElement(vr.a,{unmountOnExit:!0,in:"error"===s.status},r.a.createElement("span",null,s.err_msg)),r.a.createElement(vr.a,{unmountOnExit:!0,in:"success"===s.status&&!Boolean(n.length)},r.a.createElement("span",null,"\u6ca1\u6709\u6d88\u606f\u54e6")),r.a.createElement(vr.a,{unmountOnExit:!0,in:"success"===s.status&&Boolean(n.length)&&!Boolean(E.count)},r.a.createElement("span",null,"\u5df2\u8bfb\u5168\u90e8\u6d88\u606f")),r.a.createElement(vr.a,{unmountOnExit:!0,in:"success"===s.status&&Boolean(E.count)},r.a.createElement("span",null,E.count," \u6761\u672a\u8bfb\u6d88\u606f"))),r.a.createElement(lc.a,{title:"\u5168\u90e8\u6807\u4e3a\u5df2\u8bfb",enterDelay:500,placement:"left-start",disableTouchListener:!0},r.a.createElement("span",null,r.a.createElement(Le.a,{onClick:function(){var e,t,a;return Be.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return v.current=!1,e={url:"/message/mark_all",params:{accesstoken:g}},r.next=4,Be.a.awrap($e(e));case 4:t=r.sent,a=t.success,!v.current&&a&&(n.map((function(e){return e.has_read=!0})),c(n),O({type:"READ_ALL_MESSAGE"}));case 7:case"end":return r.stop()}}))},disabled:"success"!==s.status||0===E.count,disableRipple:!0},r.a.createElement(sc.a,null))))),n.map((function(e){return r.a.createElement(Oc,{key:e.id,item:e,hasRead:e.has_read})}))),r.a.createElement("div",{className:"status wrapper"},r.a.createElement(Ha,{status:s.status})))},wc=a(579),xc=a(588),Nc=a(245),kc=a.n(Nc),Cc=a(246),Sc=a.n(Cc),Tc=(a(490),Object(we.a)((function(e){return{title:{marginTop:30,marginBottom:14,paddingLeft:1,paddingRight:1,fontSize:15},mark:{backgroundColor:"transparent"}}}))),_c=Object(Re.a)()((function(e){var t=Object(Er.a)(),a=Tc(),n=Object(u.b)(),c=Object(u.c)((function(e){return e})),o=c.auth.isAuthed,l=c.settings;return r.a.createElement(pa,{title:"\u8bbe\u7f6e"},r.a.createElement("div",{id:"settings",className:"wrapper"},r.a.createElement(ha.a,{className:a.title},"\u5916\u89c2"),r.a.createElement(et.a,null,r.a.createElement("div",{className:"setting"},r.a.createElement("div",{className:"setting-label"},"\u4e3b\u9898\u6a21\u5f0f"),r.a.createElement(Le.a,{color:"inherit",onClick:function(){var e="light"===t.palette.type?"dark":"light";n({type:"UPDATE_SETTINGS",data:Object(p.a)({},l,{themeMode:e})})},disabled:l.autoFollow},"light"===l.themeMode?r.a.createElement(kc.a,null):r.a.createElement(Sc.a,null))),r.a.createElement("div",{className:"setting"},r.a.createElement("div",{className:"setting-label"},"\u8ddf\u968f\u7cfb\u7edf"),r.a.createElement(wc.a,{className:"switch",checked:l.autoFollow,onChange:function(){var e=!l.autoFollow;n({type:"UPDATE_SETTINGS",data:Object(p.a)({},l,{autoFollow:e})})},color:"primary"}))),r.a.createElement(ha.a,{className:a.title},"\u5361\u7247"),r.a.createElement(et.a,null,r.a.createElement("div",{className:"setting"},r.a.createElement("div",{className:"setting-label"},"\u6458\u8981\u9884\u89c8"),r.a.createElement(wc.a,{className:"switch",checked:l.cardPreview,onChange:function(){n({type:"UPDATE_SETTINGS",data:Object(p.a)({},l,{cardPreview:!l.cardPreview})})},color:"primary"}))),r.a.createElement(ha.a,{className:a.title},"\u6d88\u606f"),r.a.createElement(et.a,null,r.a.createElement("div",{className:Object(_e.a)("setting",{nano:Object(Re.b)("xs",e.width)})},r.a.createElement("div",{className:"setting-label"},"\u63d0\u9192\u95f4\u9694\uff08\u5206\u949f\uff09"),r.a.createElement("div",{className:"setting-wrapper"},r.a.createElement(xc.a,{disabled:!o,min:0,max:10,step:null,value:l.time/60,marks:[{value:0,label:"\u5173"},{value:1,label:"1"},{value:3,label:"3"},{value:5,label:"5"},{value:10,label:"10"}],onChange:function(e,t){n({type:"UPDATE_SETTINGS",data:Object(p.a)({},l,{time:60*t})})},classes:{mark:a.mark,markActive:a.mark}})))),r.a.createElement(ha.a,{className:a.title},"\u91cd\u7f6e"),r.a.createElement(et.a,null,r.a.createElement("div",{className:"setting"},r.a.createElement("div",{className:"setting-label"},"\u5c06\u6240\u6709\u8bbe\u7f6e\u8fd8\u539f\u4e3a\u539f\u59cb\u9ed8\u8ba4\u8bbe\u7f6e"),r.a.createElement(xt.a,{onClick:function(){n({type:"RESTORE_SETTINGS"})},variant:"outlined"},"\u91cd\u7f6e")))))}));function Rc(){return(Rc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e}).apply(this,arguments)}var Ac=function(e){e.styles;var t=Object(l.a)(e,["styles"]);return r.a.createElement("svg",Rc({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},t),r.a.createElement("path",{d:"M369.5 32H142.4C81.5 32 32 82.6 32 144.6v222.8c0 62 49.5 112.6 110.4 112.6h227.2c60.9 0 110.5-50.6 110.5-112.6V144.6C480 82.6 430.5 32 369.5 32zM175 251v.7c0 10.9-9.1 20.4-19.9 20.4h-23.3c-10.8 0-19.9-9.5-19.9-20.4V148.1c1-10.8 9.2-20.2 19.9-20.2h23.3c10.9 0 19.9 9.8 19.9 20.8V251zm122 147.4c0 11.4-8.9 17.6-20.1 17.6h-41.8c-11.2 0-20.1-8.1-20.1-19.6v-29.3c0-23.3 18.1-42.3 41-42.3s41 19 41 42.3v31.3zM400 251v.7c0 10.9-9.1 20.4-19.9 20.4h-24.3c-10.8 0-19.9-9.5-19.9-20.4V148.1c1-10.8 9.2-20.2 19.9-20.2h24.3c10.8 0 19.9 9.8 19.9 20.8V251z"}))},Ic=Object(we.a)((function(e){return{main:Object(h.a)({paddingTop:120,flexDirection:"column"},e.breakpoints.down("sm"),{position:"fixed",top:0,right:0,bottom:0,left:0,padding:0,overflow:"hidden"}),center:{justifyContent:"center",alignItems:"center"},wrapper:Object(h.a)({flexDirection:"row",marginBottom:40},e.breakpoints.down("sm"),{flexDirection:"column",marginBottom:62,marginTop:-32}),h1:Object(h.a)({marginRight:45,paddingRight:45,fontSize:80,borderRight:"3px solid #7b7b7b"},e.breakpoints.down("sm"),{marginRight:0,marginBottom:32,paddingRight:0,border:"none"}),p:{fontSize:20,textAlign:"left",flexDirection:"column"},icon:{width:"1em",height:"1em",fontSize:60,fill:e.palette.text.primary},button:Object(h.a)({paddingTop:10,paddingBottom:10},e.breakpoints.down("sm"),{marginBottom:32})}})),Mc=function(){var e=Ic(),t=Object(i.g)();return r.a.createElement(pa,{title:"404",withHeader:!1},r.a.createElement("div",{className:Object(_e.a)("flex",e.main,e.center)},r.a.createElement("div",{className:Object(_e.a)("flex",e.wrapper,e.center)},r.a.createElement("h1",{className:e.h1},"404"),r.a.createElement("p",{className:Object(_e.a)("flex",e.p,e.center)},r.a.createElement(Ac,{className:e.icon}),r.a.createElement("span",null,"Page not Found"))),r.a.createElement(xt.a,{className:e.button,variant:"outlined",onClick:function(){t.push("/")}},"Back to Home")))},Lc=Mc;var Pc=function(e){var t=e.component,a=Object(l.a)(e,["component"]),n=Object(u.c)((function(e){return e.auth})).isAuthed;return r.a.createElement(i.b,Object.assign({},a,{render:function(e){return n?r.a.createElement(t,e):r.a.createElement(i.a,{to:"/"})}}))},zc=function(){return r.a.createElement(u.a,{store:ie},r.a.createElement(ye,null,r.a.createElement(s.a,{basename:"/RCNode"},r.a.createElement(sa,null,r.a.createElement(je,null),r.a.createElement(r.a.Suspense,{fallback:r.a.createElement(ke,null)},r.a.createElement(i.d,null,r.a.createElement(i.b,{exact:!0,path:"/",component:hr}),r.a.createElement(i.b,{exact:!0,path:"/topic/:topic_id",component:Fr}),r.a.createElement(i.b,{exact:!0,path:"/user/:uname",component:tc}),r.a.createElement(i.b,{exact:!0,path:"/signin/",component:oc}),r.a.createElement(Pc,{exact:!0,path:"/message/",component:jc}),r.a.createElement(i.b,{exact:!0,path:"/settings/",component:_c}),r.a.createElement(i.b,{exact:!0,path:"/test/",component:Lc}),r.a.createElement(i.b,{path:"*",component:Mc})))))))},Hc=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Bc(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}o.a.render(r.a.createElement(zc,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/RCNode",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/RCNode","/service-worker.js");Hc?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Bc(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):Bc(t,e)}))}}()}},[[274,1,2]]]);
//# sourceMappingURL=main.72ad1104.chunk.js.map