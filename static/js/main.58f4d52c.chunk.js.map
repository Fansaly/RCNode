{"version":3,"sources":["static/images/houses_beautiful_beach_photo_wallpaper.jpg","common/validateUUID.js","routers.js","common/navTabs.js","common/navIsActive.js","common/topicTypes.js","common/matchTab.js","common/URI.js","common/getNewData.js","store/reducers/auth.js","store/reducers/message.js","store/reducers/editor.js","store/reducers/share.js","store/reducers/zoom.js","store/reducers/notification.js","store/reducers/settings.js","store/reducers/colors.js","store/reducers/index.js","store/index.js","Components/Prism/index.js","Components/Theme/themeOptions.js","Components/Theme/index.jsx","Components/ScrollToTop/index.jsx","Components/Loadding/index.jsx","Layout/Helper.js","fetch/getBingImage.js","fetch/index.js","Components/Icons/Github.jsx","Components/Icons/SignOut.jsx","Components/Icons/index.jsx","static/avatar.svg","Components/Me/index.jsx","static/cnodejs/cnodejs.svg","Components/Logo/index.jsx","Layout/Nav/NormalNav.jsx","Components/TopicTypeIcon/index.jsx","Layout/Nav/DrawerNav.jsx","Layout/Header/index.jsx","Layout/Notice.jsx","Layout/AppFrame.jsx","Layout/AppWrapper.js","Components/Avatar/index.jsx","Components/Moment/index.jsx","Components/TopiCard/index.jsx","common/removeHtmlTags.js","common/randomNumber.js","Components/TopiCards/index.jsx","Components/Progress/index.jsx","Components/ActionDial/index.jsx","Components/Notification/index.jsx","Components/Markdown/MarkdownEditor.jsx","Components/Markdown/markdownToHtml/markdown-it.js","Components/Markdown/markdownToHtml/markdownToHtml.js","Components/Markdown/MarkdownRender.jsx","Components/Editor/EditorHeader.jsx","Components/Editor/Preview.jsx","Components/Editor/index.jsx","Components/useLoadmore/index.js","Views/Home/index.jsx","Views/Topic/TopicReply.jsx","Components/ImageZoom/index.jsx","Components/ShareDialog/index.jsx","Views/Topic/index.jsx","Views/User/index.jsx","static/google_signin.svg","Views/Signin/index.jsx","Views/Message/MessageCard.jsx","Views/Message/index.jsx","Views/Settings/index.jsx","static/ionicons_md_outlet.svg","Views/404/index.jsx","App.jsx","serviceWorker.js","index.js"],"names":["module","exports","uuid","validate","devRouters","routers","tab","all","path","name","isTopicType","good","share","ask","job","dev","topic","user","navTabsArray","navTabsObject","tabs","push","navIsActive","location","pathname","search","topicTypes","match","formatArr","arr","Array","map","value","join","orgURIRexStr","_orgURIRexStr","key","Object","keys","transformOrgURL","string","restr","regex","RegExp","replace","$0","$1","$2","$3","$4","baseURL","window","protocol","host","process","isGoBack","open","response","_","isEmpty","defaultState","accesstoken","undefined","avatar","uname","uid","isAuthed","initialState","JSON","parse","localStorage","getItem","validateUUID","auth","state","type","data","other","setItem","stringify","removeItem","count","message","Math","max","editor","action","url","post","zoom","status","notification","autoFollow","themeMode","cardPreview","time","settings","colors","rootReducer","combineReducers","store","createStore","applyMiddleware","Prism","alias","styleNode","document","querySelector","lightThemeOptions","primary","main","dark","light","background","default","darkThemeOptions","contrastText","secondary","active","text","divider","ThemeProvider","props","systemThemeMode","useMediaQuery","useSelector","paletteType","React","useEffect","theme","textContent","setPrismTheme","lightPrismTheme","darkPrismTheme","useMemo","createMuiTheme","palette","children","ScrollToTop","useLocation","scrollTo","useStyles","makeStyles","root","position","top","left","right","Loadding","classes","className","LinearProgress","changeElementAttributes","element","attrs","documentElement","body","contains","assign","id","class","forEach","Boolean","setAttribute","removeAttribute","bingAxios","axios","create","timeout","defaultImage","copyright","image","getBingImage","a","async","get","console","warn","Date","toISOString","cnodeAxios","fetch","method","params","success","err_msg","error_msg","trim","GithubIcon","SvgIcon","viewBox","githubSvg","d","SignOutIcon","signOutSvgPath","_extends","target","i","arguments","length","source","prototype","hasOwnProperty","call","apply","this","styles","createElement","xmlns","fill","cx","cy","r","badge","content","marginTop","marginRight","width","height","borderRadius","opacity","transition","backgroundColor","boxShadow","animation","border","transform","hidden","visibility","Me","s","dispatch","useDispatch","history","useHistory","timerMessage","useRef","timerSignout","isCancel","anchorEl","useState","setOpen","handleClose","event","current","handleInfo","handleMessage","handleSettings","handleSignin","handleSignout","clearTimeout","setTimeout","fetchUnreadCount","Grid","item","container","alignContent","alignItems","justify","IconButton","buttonRef","node","aria-owns","aria-haspopup","onClick","prevState","clsx","Avatar","src","alt","Popper","disablePortal","TransitionProps","placement","Grow","style","transformOrigin","Paper","ClickAwayListener","onClickAway","MenuList","MenuItem","ListItemIcon","ListItemText","Badge","badgeContent","fillRule","clipRule","pathsID","lightVariant","Logo","useTheme","reverse","color","NormalNav","isActive","navTabs","to","activeClassName","Button","disableFocusRipple","TopicTypeIcon","rest","typeIcon","drawerPaper","toolbar","display","justifyContent","mixins","logo","paddingLeft","breakpoints","up","marginBottom","spacing","DrawerNav","onClose","SwipeableDrawer","variant","onOpen","paper","ModalProps","keepMounted","List","ListItem","button","component","selected","handleClick","header","backgroundImage","navPlaceholder","navHidden","withWidth","isMobile","drawerOpen","setState","handleToggleNav","isWidthUp","Fragment","AppBar","Toolbar","currentTarget","animateScroll","duration","smooth","Hidden","xsDown","smDown","implementation","mdUp","sleep","delay","Promise","resolve","messages","getMessages","result","json","Notice","setMessage","lastSeen","seen","parseInt","getLastSeenNotice","unseenMessages","filter","msg","mounted","test","navigator","userAgent","Snackbar","anchorOrigin","vertical","horizontal","ContentProps","dangerouslySetInnerHTML","__html","size","autoHideDuration","onExited","initialOptions","title","htmlAttributes","bodyAttributes","withHeader","AppFrameContext","createContext","AppFrame","useReducer","payload","Error","options","changeTitle","Provider","CssBaseline","AppWrapper","changeApp","useContext","useCallback","reset","useChangeApp","propTypes","PropTypes","isRequired","object","bool","objectFit","fontSize","lineHeight","textIndent","CustomAvatar","aria-label","Moment","globalLocale","padding","fontWeight","fontFamily","letterSpacing","textTransform","expand","margin","transitions","shortest","expandOpen","simple","expanded","setExpanded","targetRefs","collectTrgetRefs","ref","Card","includes","author","loginname","avatar_url","Typography","CardActions","aria-expanded","wrap","zeroMinWidth","fromNow","create_at","last_reply_at","reply_count","visit_count","Collapse","in","unmountOnExit","CardContent","str","len","min","ceil","floor","random","randomNumber","substr","substrContent","TopiCards","items","card","Progress","CSSTransition","classNames","enter","exit","CircularProgress","svg","appbar","bottom","wrapper","fabMoveUp","enteringScreen","easing","easeOut","fabMoveDown","leavingScreen","sharp","single","signedUname","visible","notificationIsOpen","topic_id","useParams","favorite","shareURL","handleUpdate","config","handleOpenEditor","origin","is_collect","Zoom","Fab","SpeedDial","ariaLabel","onMouseEnter","onMouseLeave","icon","SpeedDialIcon","openIcon","SpeedDialAction","tooltipTitle","reply_id","error","info","warning","iconVariant","variantIcon","CheckCircleIcon","WarningIcon","ErrorIcon","InfoIcon","Notification","handleExit","Icon","getTime","SnackbarContent","aria-describedby","close","flex","minHeight","MarkdownEditor","inputRef","disabled","updateContent","onUpdateContent","TextField","multiline","rows","fullWidth","placeholder","onChange","md","MarkdownIt","html","linkify","typographer","quotes","highlight","code","lang","toLocaleLowerCase","languages","use","checkbox","emoji","sub","sup","footnote","atToHtml","prevSpaces","nextSpaces","href","renderer","rules","tokens","idx","env","self","link_open","attrPush","hrefIdx","attrIndex","hrefSrc","level","renderToken","blacklist","markdownString","sanitizeHtml","markdownRender","render","allowedTags","exclusiveFilter","frame","tag","borderLeftColor","borderBottomColor","borderColor","borderTopColor","MarkdownRender","mdRef","getAttribute","from","querySelectorAll","img","addEventListener","markdownToHtml","paddingRight","paddingTop","paddingBottom","back","marginLeft","EditorHeader","publishTab","onPublishTab","onPreview","onFullScreen","fullScreen","moreOpen","setMoreOpen","selectOpen","setSelectOpen","handleCloseSelect","handleCloseMore","Popover","anchorReference","anchorPosition","Dialog","maxWidth","DialogTitle","DialogContent","RadioGroup","FormControlLabel","label","control","Radio","borderBottomWidth","borderBottomStyle","isWidthDown","disableTypography","actions","minWidth","doit","cancel","Transition","forwardRef","Slide","direction","validation","isOK","isDiff","preview","titleRef","contentRef","eState","eDispatch","handleChange","handleClosePreview","checkTab","matchTab","change","PaperProps","TransitionComponent","onEntered","focus","rowsMax","DialogActions","request","useLoadmore","loadmore","setLoadmore","threshold","handleScroll","documentHeight","offsetHeight","scrollHeight","scrollTop","windowHeight","innerHeight","removeEventListener","Home","isFetching","isFetched","page","setTab","topics","setTopics","setStatus","fetchTopics","limit","mdrender","getData","editorData","newDataCreate","dtime","author_id","getNewDataCreate","index","topicAuthor","hash","sharePrefixURL","setSharePrefixURL","ups","isUped","is_uped","upData","setUpData","createAt","timer","appHeaderHight","replieSpacings","scroller","offset","backdrop","zIndex","maxHeight","userSelect","outline","overflow","loading","box","transitionDuration","transitionDelay","cursor","flexWrap","btn","x","y","iX","iY","sX","sY","mX","mY","scale","scaleLevel","scaleLevels","spacings","dragSpacings","disabledUp","disabledDown","disabledReset","dragEnabled","dragActive","isTouch","ready","dragIsActive","zoomWrapRef","zoomBoxRef","zoomRef","initState","naturalWidth","naturalHeight","wrapWidth","clientWidth","wrapHeight","clientHeight","initialHeight","initialWidth","getTransformPos","currentWidth","currentHeight","tX","tY","getDragThreshold","getEventPos","touches","pageX","clientX","pageY","clientY","dragStart","preventDefault","dragMove","dragEnd","eStart","eMove","eEnd","eCancel","bindEvents","viewport","head","setViewport","handleZoom","maxScaleLevel","onEnter","complete","resetViewport","BackdropProps","onKeyUp","role","tabIndex","Fade","ShareDialog","inputProps","readOnly","copy","autoFocus","setTopic","replies","setReplies","dialTopic","setDialTopic","reps","newDataReply","getNewDataReply","newDataUpdate","getNewDataUpdate","cover","progress","colorPrimary","barColorPrimary","down","tips","indicator","labelIndex","show","collections","bingImgRef","bingImage","setBingImage","setIndex","profile","setProfile","toUpperCase","setBingImageLoadComplete","recent_topics","recent_replies","swipeableViewsRef","aria-hidden","format","githubUsername","score","smUp","Tabs","centered","Tab","onChangeIndex","enableMouseEvents","animateHeight","slideStyle","SwipeableViewsTab","getChildContext","swipeableViews","slideUpdateHeight","preserveAspectRatio","Signin","authRest","isUUID","diff","noValidate","autoComplete","onSubmit","validateUser","spellCheck","condition","onFocus","onBlur","goBack","unRead","summary","moreUnRead","sizeAt","sizeReply","gray","MessageCard","disptach","hasRead","ExpansionPanel","has_read","markMessage","ExpansionPanelSummary","expandIcon","noWrap","reply","ExpansionPanelDetails","Divider","ExpansionPanelActions","Link","pointerEvents","whiteSpace","Message","setItems","hasnot_read_messages","has_read_messages","Tooltip","enterDelay","disableTouchListener","disableRipple","mark","Switch","checked","Slider","step","marks","markActive","flexDirection","center","h1","borderRight","p","textAlign","NotFound","Test","PrivateRoute","Component","App","Theme","basename","Suspense","fallback","exact","Topic","User","Settings","isLocalhost","hostname","registerValidSW","swUrl","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","controller","log","onUpdate","onSuccess","catch","ReactDOM","getElementById","URL","headers","contentType","indexOf","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.58f4d52c.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/houses_beautiful_beach_photo_wallpaper.b764c878.jpg\";","import validate from 'uuid-validate';\n\n/**\n * repo: https://github.com/cnodejs/nodeclub\n * file: proxy/user.js\n * line: 106\n */\nconst uuidVersion = 4;\n\nexport default (uuid) => {\n  return validate(uuid, uuidVersion);\n};\n","const devRouters = process.env.NODE_ENV === 'development' ? {\n  // markdown render test\n  devMD: {\n    path: '/test',\n    name: 'MD-TEST',\n  },\n} : {};\n\nconst routers = {\n  tab: {\n    all: {\n      path: '/',\n      name: '全部',\n      isTopicType: false,\n    },\n    good: {\n      path: '/?tab=good',\n      name: '精华',\n      isTopicType: false,\n    },\n    share: {\n      path: '/?tab=share',\n      name: '分享',\n      isTopicType: true,\n    },\n    ask: {\n      path: '/?tab=ask',\n      name: '问答',\n      isTopicType: true,\n    },\n    job: {\n      path: '/?tab=job',\n      name: '招聘',\n      isTopicType: true,\n    },\n    dev: {\n      path: '/?tab=dev',\n      name: '测试',\n      isTopicType: true,\n    },\n    ...devRouters,\n  },\n  topic: {\n    path: '/topic',\n    name: '主题',\n  },\n  user: {\n    path: '/user',\n    name: '用户',\n  },\n};\n\nexport default routers;\n","import routers from '../routers';\n\nlet navTabsArray = [];\nlet navTabsObject = {};\nconst tabs = routers.tab;\n\nfor (let tab in tabs) {\n  if (typeof tabs !== 'object') {\n    continue;\n  }\n\n  navTabsArray.push({\n    ...tabs[tab],\n    tab,\n  });\n\n  navTabsObject = {\n    ...navTabsObject,\n    [tab]: tabs[tab],\n  };\n}\n\nexport { navTabsArray, navTabsObject };\n","export const navIsActive = (path, location = {}) => {\n  const { pathname, search } = location;\n  return !!path && path === `${pathname}${search}`;\n};\n","import routers from '../routers';\n\nlet topicTypes = [];\nconst tabs = routers.tab;\n\nfor (let tab in tabs) {\n  if (tabs[tab].isTopicType) {\n    topicTypes.push(tab);\n  }\n}\n\nexport { topicTypes };\n","export default (location = {}) => {\n  const { pathname, search = '' } = location;\n  const tab = search.match(/\\?tab=(\\w+)/);\n\n  return (\n    tab\n      ? tab[1]\n      : pathname === '/'\n        ? 'all'\n        : null\n  );\n};\n","import routers from '../routers';\n\nconst cnodeURL = 'cnodejs.org';\n\nconst formatArr = arr => {\n  if (arr instanceof Array) {\n    return arr.map(value => {\n      return `(${value})`;\n    }).join('|');\n  }\n};\n\nconst orgURIRexStr = (() => {\n  let _orgURIRexStr = [ '/?' ];\n\n  for (let key in routers) {\n    if (key === 'tab') {\n      _orgURIRexStr.push(`/\\\\?tab=(${formatArr(Object.keys(routers[key]))})`);\n    } else {\n      _orgURIRexStr.push(`/${key}/\\\\w+`);\n    }\n  }\n\n  return formatArr(_orgURIRexStr);\n})();\n\nconst transformOrgURL = string => {\n  const restr = `^(http(s)?://)?(www.)?${cnodeURL}(${orgURIRexStr})$`;\n  const regex = new RegExp(restr, 'i');\n\n  return string.replace(regex, ($0, $1, $2, $3, $4) => {\n    let baseURL = cnodeURL;\n\n    if (typeof window !== 'undefined') {\n      $1 = $1 && `${window.location.protocol}//`;\n      baseURL = window.location.host;\n    }\n\n    $1 = $1 || '';\n\n    return `${$1}${baseURL}${process.env.PUBLIC_URL}${$4}`;\n  });\n};\n\nexport { transformOrgURL };\nexport default orgURIRexStr;\n","import _ from 'lodash';\n\nconst isGoBack = ({ open, response = {} }) => {\n  return open || _.isEmpty(response);\n};\n\nconst getNewDataCreate = ({ action, ...props }) => {\n  if (isGoBack(props) || action !== 'create') {\n    return null;\n  }\n\n  const dtime = new Date();\n  const { uid, uname, avatar } = props;\n  const { tab, title, content } = props.request;\n  const { topic_id: id } = props.response;\n\n  return [{\n    author: {\n      loginname: uname,\n      avatar_url: avatar,\n    },\n    author_id: uid,\n    id,\n    tab,\n    title,\n    content,\n    create_at: dtime,\n    last_reply_at: dtime,\n    reply_count: 0,\n    visit_count: 0,\n    good: false,\n    top: false,\n  }];\n};\n\nconst getNewDataUpdate = ({ action, ...props }) => {\n  if (isGoBack(props) || action !== 'update') {\n    return null;\n  }\n\n  const { tab, title, content } = props.request;\n\n  return { tab, title, content };\n};\n\nconst getNewDataReply = ({ action, ...props }) => {\n  if (isGoBack(props) || action !== 'reply') {\n    return null;\n  }\n\n  const { uname, avatar } = props;\n  const { content, reply_id } = props.request;\n  const { reply_id: id } = props.response;\n  const { topic_id } = props.match.params;\n\n  return {\n    author: {\n      loginname: uname,\n      avatar_url: avatar,\n    },\n    id,\n    ups: [],\n    is_uped: false,\n    create_at: new Date(),\n    content,\n    reply_id: reply_id !== topic_id ? reply_id : null,\n  };\n};\n\nexport {\n  getNewDataCreate,\n  getNewDataUpdate,\n  getNewDataReply,\n};\n","import { validateUUID } from '../../common';\n\nconst defaultState = {\n  accesstoken: undefined,\n  avatar: undefined,\n  uname: undefined,\n  uid: undefined,\n  isAuthed: false,\n};\n\nlet initialState = JSON.parse(localStorage.getItem('AUTH'));\n\nif (initialState !== null && validateUUID(initialState.accesstoken)) {\n  initialState = {\n    ...initialState,\n    isAuthed: true,\n  };\n} else {\n  initialState = defaultState;\n}\n\nconst auth = (state = initialState, { type, data }) => {\n  switch (type) {\n    case 'UPDATE_AUTH':\n      const { isAuthed, ...other } = data;\n      localStorage.setItem('AUTH', JSON.stringify({\n        ...other,\n      }));\n      return { ...data };\n    case 'DELETE_AUTH':\n      localStorage.removeItem('AUTH');\n      return defaultState;\n    default:\n      return state;\n  }\n};\n\nexport default auth;\n","const initialState = {\n  count: 0,\n};\n\nconst message = (state = initialState, { type, data }) => {\n  switch (type) {\n    case 'READ_MESSAGE':\n      let { count } = state;\n      count = Math.max(--count, 0);\n      return { count };\n    case 'READ_ALL_MESSAGE':\n      return initialState;\n    case 'UPDATE_MESSAGE':\n      return { count: data };\n    case 'CLEAN_MESSAGE':\n      return initialState;\n    default:\n      return state;\n  }\n};\n\nexport default message;\n","const initialState = {\n  open: false,\n};\n\nconst editor = (state = initialState, { type, data }) => {\n  switch (type) {\n    case 'OPEN_EDITOR':\n      const { action, ...other } = data;\n      return {\n        open: true,\n        action: action || 'create',\n        ...other,\n      };\n    case 'CLOSE_EDITOR':\n      return {\n        ...data,\n        open: false,\n      };\n    default:\n      return state;\n  }\n};\n\nexport default editor;\n","const initialState = {\n  url: '',\n  open: false,\n};\n\nconst share = (state = initialState, { type, data }) => {\n  switch (type) {\n    case 'OPEN_SHARE':\n      if (typeof data === 'string') {\n        data = {\n          url: data,\n          post: null,\n        };\n      }\n      return {\n        ...data,\n        open: true,\n      };\n    case 'CLOSE_SHARE':\n      return {\n        ...state,\n        open: false,\n      };\n    default:\n      return state;\n  }\n};\n\nexport default share;\n","const initialState = {\n  open: false,\n};\n\nconst zoom = (state = initialState, { type, data }) => {\n  switch (type) {\n    case 'OPEN_ZOOM':\n      return {\n        ...data,\n        open: true,\n      };\n    case 'CLOSE_ZOOM':\n      return {\n        ...state,\n        open: false,\n      };\n    default:\n      return state;\n  }\n};\n\nexport default zoom;\n","const initialState = {\n  message: '',\n  status: 'success',\n  open: false,\n};\n\nconst notification = (state = initialState, { type, data }) => {\n  switch (type) {\n    case 'OPEN_NOTIFICATION':\n      if (typeof data === 'string') {\n        data = {\n          message: data,\n          status: 'success',\n        };\n      }\n      return {\n        ...data,\n        open: true,\n      };\n    case 'CLOSE_NOTIFICATION':\n      return {\n        ...state,\n        open: false,\n      };\n    default:\n      return state;\n  }\n};\n\nexport default notification;\n","const defaultState = {\n  autoFollow: true,\n  themeMode: 'light',\n  cardPreview: false,\n  time: 0,\n};\n\nlet initialState = JSON.parse(localStorage.getItem('SETTINGS')) || {};\n\nconst {\n  autoFollow = true,\n  themeMode = 'light',\n  cardPreview = false,\n  time = 0,\n} = initialState;\n\ninitialState = {\n  autoFollow,\n  themeMode,\n  cardPreview,\n  time,\n};\n\nconst settings = (state = initialState, { type, data }) => {\n  switch (type) {\n    case 'UPDATE_SETTINGS':\n      localStorage.setItem('SETTINGS', JSON.stringify({\n        ...data,\n      }));\n      return { ...data };\n    case 'RESTORE_SETTINGS':\n      localStorage.removeItem('SETTINGS');\n      return defaultState;\n    default:\n      return state;\n  }\n};\n\nexport default settings;\n","const initialState = JSON.parse(localStorage.getItem('THEME'));\n\nconst colors = (state = initialState, action) => {\n  switch (action.type) {\n    case 'UPDATE_COLORS':\n      return {\n        ...action.data,\n      };\n\n    default:\n      return state;\n  }\n};\n\nexport default colors;\n","import { combineReducers } from 'redux';\nimport auth from './auth';\nimport message from './message';\nimport editor from './editor';\nimport share from './share';\nimport zoom from './zoom';\nimport notification from './notification';\nimport settings from './settings';\nimport colors from './colors';\n\nconst rootReducer = combineReducers({\n  auth,\n  message,\n  editor,\n  share,\n  zoom,\n  notification,\n  settings,\n  colors,\n});\n\nexport default rootReducer;\n","import { applyMiddleware, createStore } from 'redux';\nimport rootReducer from './reducers';\n\nlet middlewares = [];\n\nif (process.env.NODE_ENV === 'development') {\n  const { createLogger } = require('redux-logger');\n\n  middlewares = [ ...middlewares, createLogger() ];\n}\n\nconst store = createStore(\n  rootReducer,\n  applyMiddleware(...middlewares),\n);\n\nexport default store;\n","import Prism from 'prismjs';\n\nimport 'prismjs/components/prism-bash';\nimport 'prismjs/components/prism-c';\nimport 'prismjs/components/prism-clike';\nimport 'prismjs/components/prism-cpp';\nimport 'prismjs/components/prism-css';\nimport 'prismjs/components/prism-diff';\nimport 'prismjs/components/prism-docker';\nimport 'prismjs/components/prism-erlang';\nimport 'prismjs/components/prism-git';\nimport 'prismjs/components/prism-go';\nimport 'prismjs/components/prism-java';\nimport 'prismjs/components/prism-javascript';\nimport 'prismjs/components/prism-json';\nimport 'prismjs/components/prism-jsx';\nimport 'prismjs/components/prism-lua';\nimport 'prismjs/components/prism-makefile';\nimport 'prismjs/components/prism-markdown';\nimport 'prismjs/components/prism-markup';\nimport 'prismjs/components/prism-objectivec';\n\n/**\n * https://github.com/PrismJS/prism/issues/1423\n * Cannot read property 'tokenizePlaceholders' of undefined\n */\nimport 'prismjs/components/prism-markup-templating';\nimport 'prismjs/components/prism-php';\n\nimport 'prismjs/components/prism-python';\nimport 'prismjs/components/prism-sql';\nimport 'prismjs/components/prism-swift';\nimport 'prismjs/components/prism-tsx';\nimport 'prismjs/components/prism-typescript';\nimport 'prismjs/components/prism-yaml';\n\nexport default Prism;\n\nexport { default as lightPrismTheme } from 'prismjs/themes/prism.css';\nexport { default as darkPrismTheme } from 'prismjs/themes/prism-okaidia.css';\n\n// alias => prism\nexport const alias = {\n  'h': 'c',\n  'rb': 'ruby',\n  'py': 'python',\n  'sh': 'bash',\n  'yml': 'yaml',\n  'golang': 'go',\n  'dockerfile': 'docker',\n  'tex': 'latex',\n  'bat': 'batch',\n  'ps1': 'powershell',\n  'psm1': 'powershell',\n};\n\nconst styleNode = document.querySelector('#prismjs');\n\nexport const setPrismTheme = theme => {\n  styleNode.textContent = theme;\n};\n","export const lightThemeOptions = {\n  primary: {\n    main: '#0082ea',\n    dark: '#0376d2', // :hover\n    light: '#2092ec',\n  },\n  background: {\n    default: '#f4f4f4',\n  },\n};\n\nexport const darkThemeOptions = {\n  primary: {\n    main: '#0963ab',\n    contrastText: '#ccc',\n  },\n  secondary: {\n    main: '#ab003d',\n    contrastText: '#ccc',\n  },\n  action: {\n    active: '#ccc',\n  },\n  text: {\n    primary: '#ccc',\n  },\n  background: {\n    default: '#212121',\n  },\n  divider: 'rgba(128,128,128,.12)',\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { useSelector } from 'react-redux';\n\nimport { ThemeProvider as MuiThemeProvider } from '@material-ui/styles';\nimport { createMuiTheme } from '@material-ui/core/styles';\nimport useMediaQuery from '@material-ui/core/useMediaQuery';\n\nimport { setPrismTheme, lightPrismTheme, darkPrismTheme } from '../Prism';\nimport { lightThemeOptions, darkThemeOptions } from './themeOptions';\n\nexport const useSystemThemeMode = () => {\n  const prefersLightMode = useMediaQuery('(prefers-color-scheme: light)');\n  return prefersLightMode ? 'light' : 'dark';\n};\n\nconst ThemeProvider = (props) => {\n  const systemThemeMode = useSystemThemeMode();\n  const { autoFollow, themeMode } = useSelector(state => state.settings);\n  const paletteType = autoFollow ? systemThemeMode : themeMode;\n\n  React.useEffect(() => {\n    setPrismTheme(paletteType === 'light' ? lightPrismTheme : darkPrismTheme);\n  }, [paletteType]);\n\n  const theme = React.useMemo(() => (createMuiTheme({\n    palette: {\n      ...(paletteType === 'light' ? lightThemeOptions : darkThemeOptions),\n      type: paletteType,\n    },\n  })), [paletteType]);\n\n  React.useEffect(() => {\n    if (process.env.NODE_ENV === 'development') {\n      window.theme = theme;\n    }\n  }, [theme]);\n\n  return (\n    <MuiThemeProvider theme={theme}>\n      {props.children}\n    </MuiThemeProvider>\n  );\n};\n\nThemeProvider.propTypes = {\n  children: PropTypes.node.isRequired,\n};\n\nexport default ThemeProvider;\n","import React from 'react';\nimport { useLocation } from 'react-router-dom';\n\nconst ScrollToTop = () => {\n  const { pathname, search } = useLocation();\n\n  React.useEffect(() => {\n    // const element = document.querySelector('#root');\n    // element.scrollIntoView({ behavior: 'smooth', block: 'start' });\n    window.scrollTo(0, 0);\n  }, [pathname, search]);\n\n  return null;\n};\n\nexport default ScrollToTop;\n","import React from 'react';\n\nimport { makeStyles } from '@material-ui/core/styles';\nimport LinearProgress from '@material-ui/core/LinearProgress';\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    position: 'fixed',\n    top: 0,\n    left: 0,\n    right: 0,\n  },\n}));\n\n\nconst Loadding = () => {\n  const classes = useStyles();\n\n  return (\n    <div className={classes.root}>\n      <LinearProgress />\n    </div>\n  );\n};\n\nexport default Loadding;\n","export const changeTitle = title => {\n  document.title = Boolean(title) ? title : 'RCNode';\n};\n\nconst changeElementAttributes = (element, attrs) => {\n  if (element === 'html') {\n    element = document.documentElement;\n  } else if (element === 'body') {\n    element = document.body;\n  } else if (!document.body.contains(element)) {\n    return;\n  }\n\n  attrs = Object.assign({ id: null, class: null }, attrs);\n\n  Object.keys(attrs).forEach(name => {\n    const value = attrs[name];\n\n    if (Boolean(value)) {\n      element.setAttribute(name, value);\n    } else {\n      element.removeAttribute(name);\n    }\n  });\n};\n\nexport const changeHtmlAttributes = attrs => {\n  changeElementAttributes('html', attrs);\n};\n\nexport const changeBodyAttributes = attrs => {\n  changeElementAttributes('body', attrs);\n};\n","import axios from 'axios';\nimport image from '../static/images/houses_beautiful_beach_photo_wallpaper.jpg';\n\nconst bingAxios = axios.create({\n  timeout: 3300,\n});\n\nconst defaultImage = {\n  copyright: '默认背景',\n  url: image,\n};\n\n/**\n * fetch Bing Image\n * @param {string} url proxy address\n */\nexport const getBingImage = async url => {\n  url = url ||\n        process.env.NODE_ENV === 'production'\n          ? 'https://bing.fansaly.com'\n          : 'http://localhost:3003';\n\n  try {\n    const { data } = await bingAxios.get(url);\n    return data;\n  } catch (e) {\n    console.warn('Get Bing\\'s image failed.');\n    return {\n      ...defaultImage,\n      time: new Date().toISOString(),\n    };\n  }\n};\n","import axios from 'axios';\nexport { getBingImage } from './getBingImage';\n\nconst cnodeAxios = axios.create({\n  baseURL: 'https://cnodejs.org/api/v1',\n  timeout: 0,\n});\n\n/**\n * @param {string} url\n * @param {string} method\n * @param {object} params\n */\nconst fetch = async ({ url, method = 'GET', params = {} }) => {\n  params = method === 'GET' ? { params } : { data: params };\n\n  try {\n    const { data } = await cnodeAxios({ method, url, ...params });\n\n    return {\n      success: true,\n      data: method === 'GET' ? data.data : data,\n    };\n\n  } catch ({ response }) {\n    if (!Boolean(response)) {\n      return {\n        success: false,\n        err_msg: '发生异常',\n      };\n    }\n\n    const { status, data: { error_msg = '' } } = response;\n\n    return {\n      success: false,\n      err_msg: !Boolean(error_msg) && process.env.NODE_ENV === 'development'\n               ? `${status} => ${url}`\n               : error_msg,\n    };\n  }\n};\n\nexport const get = async ({ url, params }) => {\n  return await fetch({ method: 'GET', url, params });\n};\n\nexport const post = async ({ url, params }) => {\n  return await fetch({ method: 'POST', url, params });\n};\n\n","export default {\n  viewBox: '-2 -2 20 20', // 0 0 16 16\n  path: 'M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z',\n};\n"," const path = `\n  M 19 3\n  c 1.1 0 2 0.9 2 2\n  v 4\n  h -2\n  V 5\n  H 5\n  v 14\n  h 14\n  v -4\n  h 2\n  v 4\n  c 0 1.11 -0.9 2 -2 2\n  H 5\n  c -1.11 0 -2 -0.9 -2 -2\n  V 5\n  c 0 -1.1 0.89 -2 2 -2\n  Z\n\n  M 13.09 15.59\n  L 14.5 17\n  l 5 -5\n  l -5 -5\n  l -1.41 1.41\n  L 15.67 11\n  h -9.67\n  v 2\n  h 9.67\n  l -2.58 2.59\n  Z\n`.replace(/\\s{2,}/g, ' ').trim();\n\nexport default path;\n","import React from 'react';\nimport SvgIcon from '@material-ui/core/SvgIcon';\nimport githubSvg from './Github';\nimport signOutSvgPath from './SignOut';\n\nconst GithubIcon = (\n  <SvgIcon viewBox={githubSvg.viewBox}>\n    <path d={githubSvg.path} />\n  </SvgIcon>\n);\n\nconst SignOutIcon = (\n  <SvgIcon>\n    <path d={signOutSvgPath} />\n  </SvgIcon>\n);\n\nexport { GithubIcon, SignOutIcon };\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React from \"react\";\nexport default (({\n  styles = {},\n  ...props\n}) => React.createElement(\"svg\", _extends({\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 24 24\"\n}, props), React.createElement(\"path\", {\n  fill: \"#4AC6C6\",\n  d: \"M12 24C5.4 24 0 18.6 0 12S5.4 0 12 0s12 5.4 12 12-5.4 12-12 12z\"\n}), React.createElement(\"path\", {\n  fill: \"#FFF\",\n  d: \"M11.9 4.5c-4.1.1-7.3 3.6-7.3 7.7v5.5c0 1 1.1 1.6 1.9 1.1.5-.3.9-.6 1.8-.6 1.9 0 1.9 1.3 3.7 1.3s1.9-1.3 3.7-1.3c.9 0 1.3.3 1.8.6.8.5 1.9-.1 1.9-1.1V12c.1-4.2-3.3-7.6-7.5-7.5z\"\n}), React.createElement(\"circle\", {\n  fill: \"#2A5083\",\n  cx: \"9.5\",\n  cy: \"10.1\",\n  r: \".6\"\n}), React.createElement(\"circle\", {\n  fill: \"#2A5083\",\n  cx: \"14.5\",\n  cy: \"10.1\",\n  r: \".6\"\n}), React.createElement(\"path\", {\n  fill: \"#2A5083\",\n  d: \"M12 15.3c1.2 0 2.3-.8 2.6-1.9.1-.5-.2-.9-.7-.9H10c-.5 0-.8.5-.7.9.4 1.1 1.5 1.9 2.7 1.9z\"\n}), React.createElement(\"path\", {\n  fill: \"#FF4E4A\",\n  d: \"M12 13.9c-.7 0-1.2.4-1.6.9.4.3 1 .5 1.6.5.6 0 1.1-.2 1.5-.5-.3-.5-.8-.9-1.5-.9z\"\n}), React.createElement(\"path\", {\n  fill: \"#DBF4F4\",\n  d: \"M6.5 18.8c.4-.3.8-.6 1.7-.6v-.6c0-2.5-1.5-4.6-3.6-5.5v5.7c-.1.9 1 1.5 1.9 1zM16.3 18.3c.6.1.9.3 1.3.6.8.5 1.9-.1 1.9-1.1v-3.5c-1.6.9-2.7 2.3-3.2 4z\"\n})));","import React from 'react';\nimport clsx from 'clsx';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { useHistory } from 'react-router-dom';\nimport { get } from '../../fetch';\n\nimport { makeStyles } from '@material-ui/core/styles';\nimport Grid from '@material-ui/core/Grid';\nimport Badge from '@material-ui/core/Badge';\nimport Avatar from '@material-ui/core/Avatar';\nimport IconButton from '@material-ui/core/IconButton';\n\nimport ClickAwayListener from '@material-ui/core/ClickAwayListener';\nimport Grow from '@material-ui/core/Grow';\nimport Paper from '@material-ui/core/Paper';\nimport Popper from '@material-ui/core/Popper';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport MenuList from '@material-ui/core/MenuList';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\n\nimport PersonIcon from '@material-ui/icons/Person';\nimport NotificationsIcon from '@material-ui/icons/Notifications';\nimport SettingsIcon from '@material-ui/icons/SettingsRounded';\nimport SignInIcon from '@material-ui/icons/ExitToApp';\nimport { SignOutIcon } from '../../Components/Icons';\n\nimport AvatarSvg from '../../static/avatar.svg';\nimport './me.styl';\n\nconst useStyles = makeStyles(theme => ({\n  badge: {\n    '&:before, &:after': {\n      content: '\"\"',\n      position: 'absolute',\n      top: 0,\n      right: 0,\n      marginTop: 6,\n      marginRight: 6,\n      width: 6,\n      height: 6,\n      borderRadius: '50%',\n      opacity: 0,\n      transition: 'opacity .3s linear',\n    },\n    '&.has-message:before': {\n      opacity: 1,\n      backgroundColor: 'rgba(128, 189, 1, .85)',\n      boxShadow: '0 0 4px rgba(0, 0, 0, .15)',\n    },\n    '&.has-message:after': {\n      animation: '$ripple 1.2s infinite ease-in-out',\n      border: '1px solid #44b700',\n    },\n  },\n  '@keyframes ripple': {\n    '0%': {\n      transform: 'scale(.8)',\n      opacity: 1,\n    },\n    '100%': {\n      transform: 'scale(2.4)',\n      opacity: 0,\n    },\n  },\n  hidden: {\n    '& span': {\n      visibility: 'hidden',\n    },\n  },\n}));\n\nconst Me = () => {\n  const { isAuthed, accesstoken, uname, avatar } = useSelector(({ auth }) => auth);\n  const { time } = useSelector(({ settings }) => settings);\n  const message = useSelector(s => s.message);\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const classes = useStyles();\n\n  const timerMessage = React.useRef(null);\n  const timerSignout = React.useRef(null);\n  const isCancel = React.useRef();\n  const anchorEl = React.useRef(null);\n\n  const [open, setOpen] = React.useState(false);\n\n  const handleToggle = () => {\n    setOpen(prevState => !prevState);\n  };\n\n  const handleClose = event => {\n    if (anchorEl.current.contains(event.target)) {\n      return;\n    }\n\n    setOpen(false);\n  };\n\n  const handleInfo = event => {\n    handleClose(event);\n    history.push(`/user/${uname}`);\n  };\n\n  const handleMessage = event => {\n    const messagePath = '/message';\n    const { pathname } = history.location;\n\n    handleClose(event);\n\n    if (pathname === messagePath) {\n      history.replace(messagePath);\n    } else {\n      history.push(messagePath);\n    }\n  };\n\n  const handleSettings = event => {\n    handleClose(event);\n    history.push('/settings');\n  };\n\n  const handleSignin = event => {\n    handleClose(event);\n    history.push('/signin');\n  };\n\n  const handleSignout = event => {\n    handleClose(event);\n\n    clearTimeout(timerSignout.current);\n\n    timerSignout.current = setTimeout(() => {\n      dispatch({ type: 'DELETE_AUTH' });\n      dispatch({ type: 'CLEAN_MESSAGE' });\n    }, 330);\n  };\n\n  React.useEffect(() => {\n    return () => clearTimeout(timerSignout.current);\n  }, []);\n\n  React.useEffect(() => {\n    isCancel.current = false;\n\n    clearTimeout(timerMessage.current);\n\n    const fetchUnreadCount = async () => {\n      if (!isAuthed) { return; }\n\n      const params = {\n        url: '/message/count',\n        params: { accesstoken },\n      };\n\n      const { success, data: count } = await get(params);\n\n      if (isCancel.current) {\n        return;\n      }\n\n      if (success) {\n        dispatch({ type: 'UPDATE_MESSAGE', data: count });\n      }\n\n      if (time > 0) {\n        timerMessage.current = setTimeout(() => {\n          fetchUnreadCount();\n        }, time * 1e3);\n      }\n    };\n\n    fetchUnreadCount();\n\n    return () => {\n      isCancel.current = true;\n      clearTimeout(timerMessage.current);\n    };\n  }, [isAuthed, accesstoken, dispatch, time]);\n\n  return (\n    <Grid item className=\"flex\">\n      <Grid\n        container\n        alignContent=\"center\"\n        alignItems=\"center\"\n        justify=\"center\"\n        className={isAuthed ? 'info' : 'signin'}\n      >\n        <IconButton\n          buttonRef={node => {\n            anchorEl.current = node;\n          }}\n          aria-owns={open ? 'menu-list-grow' : null}\n          aria-haspopup=\"true\"\n          onClick={handleToggle}\n          className={clsx('me', classes.badge, {\n            'has-message': Boolean(message.count),\n          })}\n        >\n          <Avatar className=\"flex avatar\">\n            {isAuthed ? (\n              <img src={avatar} alt=\"U\" />\n            ) : (\n              <AvatarSvg />\n            )}\n          </Avatar>\n        </IconButton>\n        <Popper open={open} anchorEl={anchorEl.current} transition disablePortal>\n          {({ TransitionProps, placement }) => (\n            <Grow\n              {...TransitionProps}\n              id=\"menu-list-grow\"\n              style={{ transformOrigin: placement === 'bottom' ? 'center top' : 'center bottom' }}\n            >\n              <Paper>\n                <ClickAwayListener onClickAway={handleClose}>\n                  <MenuList>\n                    {isAuthed &&\n                      <MenuItem onClick={handleInfo}>\n                        <ListItemIcon>\n                          <PersonIcon />\n                        </ListItemIcon>\n                        <ListItemText primary=\"资料\" />\n                      </MenuItem>\n                    }\n                    {isAuthed &&\n                      <MenuItem onClick={handleMessage}>\n                        <ListItemIcon>\n                          <Badge\n                            badgeContent={message.count}\n                            className={clsx('badge', {\n                              [classes.hidden]: message.count <= 0,\n                            })}\n                          >\n                            <NotificationsIcon />\n                          </Badge>\n                        </ListItemIcon>\n                        <ListItemText primary=\"消息\" />\n                      </MenuItem>\n                    }\n                    <MenuItem onClick={handleSettings}>\n                      <ListItemIcon>\n                        <SettingsIcon />\n                      </ListItemIcon>\n                      <ListItemText primary=\"设置\" />\n                    </MenuItem>\n                    {isAuthed ? (\n                      <MenuItem onClick={handleSignout}>\n                        <ListItemIcon>\n                          {SignOutIcon}\n                        </ListItemIcon>\n                        <ListItemText primary=\"退出\" />\n                      </MenuItem>\n                    ) : (\n                      <MenuItem onClick={handleSignin}>\n                        <ListItemIcon>\n                          <SignInIcon />\n                        </ListItemIcon>\n                        <ListItemText primary=\"登录\" />\n                      </MenuItem>\n                    )}\n                  </MenuList>\n                </ClickAwayListener>\n              </Paper>\n            </Grow>\n          )}\n        </Popper>\n      </Grid>\n    </Grid>\n  );\n};\n\nexport default Me;\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React from \"react\";\nexport default (({\n  styles = {},\n  ...props\n}) => React.createElement(\"svg\", _extends({\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 427.3 100.4\"\n}, props), React.createElement(\"path\", {\n  id: \"cell-n\",\n  fillRule: \"evenodd\",\n  clipRule: \"evenodd\",\n  fill: \"#46483E\",\n  d: \"M127.987 52.994c0-1.084-.57-2.08-1.506-2.617l-24.937-14.352a2.934 2.934 0 00-1.373-.396h-.258a2.973 2.973 0 00-1.377.396L73.598 50.377a3.023 3.023 0 00-1.508 2.617l.055 38.644c0 .538.279 1.038.752 1.301a1.446 1.446 0 001.496 0l14.821-8.485a3.036 3.036 0 001.507-2.613V63.784a3 3 0 011.504-2.606l6.311-3.636a3 3 0 013.008 0l6.308 3.636a3 3 0 011.506 2.606V81.84c0 1.074.578 2.062 1.51 2.613l14.816 8.485a1.464 1.464 0 001.506 0c.459-.263.748-.763.748-1.301l.049-38.643z\"\n}), React.createElement(\"path\", {\n  id: \"cell-d\",\n  fillRule: \"evenodd\",\n  clipRule: \"evenodd\",\n  fill: \"#46483E\",\n  d: \"M261.147-.129a1.508 1.508 0 00-2.241 1.315v38.271c0 .376-.201.724-.525.913a1.06 1.06 0 01-1.056 0l-6.246-3.599a3.013 3.013 0 00-3.01.001L223.122 51.17a3.007 3.007 0 00-1.506 2.607v28.801c0 1.076.573 2.07 1.505 2.609l24.946 14.408a3.011 3.011 0 003.014 0l24.95-14.408a3.012 3.012 0 001.506-2.609V10.786a3.013 3.013 0 00-1.545-2.631L261.147-.129zm-2.314 73.244c0 .27-.145.519-.378.651l-8.564 4.938a.749.749 0 01-.752 0l-8.566-4.938a.752.752 0 01-.377-.651v-9.891c0-.269.145-.517.376-.651l8.566-4.947a.752.752 0 01.754 0l8.564 4.947a.756.756 0 01.377.651v9.891z\"\n}), React.createElement(\"path\", {\n  id: \"cell-e\",\n  fillRule: \"evenodd\",\n  clipRule: \"evenodd\",\n  fill: \"#46483E\",\n  d: \"M350.4 62.966a3.011 3.011 0 001.499-2.604v-6.979a3.012 3.012 0 00-1.5-2.605l-24.787-14.392a3.015 3.015 0 00-3.02-.004l-24.938 14.397a3.012 3.012 0 00-1.506 2.609v28.793c0 1.083.58 2.081 1.521 2.616l24.783 14.122a3.015 3.015 0 002.954.018l14.989-8.332c.477-.266.772-.765.774-1.308a1.503 1.503 0 00-.755-1.315L315.32 73.576a1.503 1.503 0 01-.758-1.306v-9.024c0-.538.287-1.036.755-1.304l7.811-4.504a1.505 1.505 0 011.503 0l7.815 4.504c.467.268.754.766.754 1.304v7.101a1.507 1.507 0 002.263 1.303l14.937-8.684z\"\n}), React.createElement(\"path\", {\n  id: \"cell-o\",\n  fillRule: \"evenodd\",\n  clipRule: \"evenodd\",\n  fill: \"#80bd01\",\n  d: \"M173.35 36.23a3.012 3.012 0 013.012 0l24.943 14.395a3.008 3.008 0 011.508 2.609v28.811a3.014 3.014 0 01-1.506 2.61L176.363 99.06a3.016 3.016 0 01-3.014 0l-24.938-14.405a3.014 3.014 0 01-1.506-2.61V53.233c0-1.076.574-2.071 1.507-2.608L173.35 36.23z\"\n}), React.createElement(\"path\", {\n  id: \"cell-j\",\n  fill: \"#80bd01\",\n  d: \"M398.833 99.472a4.941 4.941 0 01-2.468-.66l-7.853-4.646c-1.172-.656-.601-.888-.213-1.023 1.563-.543 1.881-.668 3.551-1.614.173-.099.404-.062.584.045l6.033 3.582a.775.775 0 00.728 0l23.522-13.577a.739.739 0 00.358-.636V53.796a.757.757 0 00-.364-.647l-23.513-13.565a.736.736 0 00-.724 0L374.97 53.152a.754.754 0 00-.373.644v27.146c0 .26.144.506.371.629l6.442 3.722c3.496 1.748 5.638-.31 5.638-2.379v-26.8c0-.379.305-.678.683-.678h2.983a.68.68 0 01.682.678v26.8c0 4.666-2.541 7.342-6.965 7.342-1.36 0-2.43 0-5.418-1.472l-6.168-3.551a4.97 4.97 0 01-2.467-4.291V53.796c0-1.763.942-3.41 2.467-4.287l23.521-13.592c1.489-.841 3.468-.841 4.944 0l23.519 13.592a4.967 4.967 0 012.472 4.287v27.146a4.979 4.979 0 01-2.472 4.291L401.31 98.812a4.944 4.944 0 01-2.477.66\"\n}), React.createElement(\"path\", {\n  id: \"cell-s\",\n  fill: \"#80bd01\",\n  d: \"M406.099 80.771c-10.294 0-12.449-4.725-12.449-8.687 0-.377.303-.678.68-.678h3.041a.68.68 0 01.675.575c.459 3.097 1.828 4.658 8.054 4.658 4.954 0 7.064-1.121 7.064-3.75 0-1.515-.598-2.64-8.299-3.394-6.437-.638-10.416-2.06-10.416-7.208 0-4.745 4-7.576 10.707-7.576 7.535 0 11.263 2.615 11.736 8.227a.688.688 0 01-.181.523.692.692 0 01-.498.217h-3.052a.679.679 0 01-.661-.531c-.731-3.258-2.513-4.299-7.345-4.299-5.41 0-6.039 1.885-6.039 3.297 0 1.711.742 2.209 8.047 3.176 7.229.955 10.662 2.309 10.662 7.39 0 5.125-4.274 8.06-11.726 8.06\"\n}), React.createElement(\"path\", {\n  id: \"cell-.\",\n  fillRule: \"evenodd\",\n  clipRule: \"evenodd\",\n  fill: \"#80bd01\",\n  d: \"M323.735 61.618a.573.573 0 01.577 0l4.787 2.762c.18.103.289.294.289.5v5.527a.577.577 0 01-.289.501l-4.787 2.763a.577.577 0 01-.577 0l-4.783-2.763a.577.577 0 01-.289-.501V64.88c0-.206.109-.397.289-.5l4.783-2.762z\"\n}), React.createElement(\"path\", {\n  id: \"cell-c\",\n  fillRule: \"evenodd\",\n  clipRule: \"evenodd\",\n  fill: \"#46483E\",\n  d: \"M36.28 61.87c1.098.65 1.358.255 1.742.035.385-.221 14.695-8.411 15.606-8.857.912-.446 1.315-1.915.114-2.61-1.201-.697-25.41-14.721-24.241-14.12 1.259.646-1.202-.829-2.626-.175-1.425.654-23.231 13.192-24.777 14.075-1.545.883-2.032 1.731-2.027 2.907.004 1.176-.078 27.253 0 28.801.078 1.548.69 2.052 1.506 2.609.816.558 22.901 13.505 24.572 14.41 1.671.907 2.768.597 3.853-.04 1.085-.639 22.727-13.003 23.593-13.554.866-.551 1.653-1.969-.157-2.992-1.811-1.022-14.779-8.693-15.279-8.943s-.796-.255-1.52.151c-.724.408-7.222 4.062-8.013 4.524s-.904.254-1.283.033c-.378-.222-7.085-4.135-7.859-4.571s-.866-.656-.868-1.25c-.001-.593-.018-8.121.023-8.998.04-.877.165-1.074.962-1.548.797-.474 6.695-3.978 7.166-4.293.47-.315 1.459-.345 2.231.108.772.452 6.184 3.647 7.282 4.298\"\n})));","import React from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\n\nimport { useTheme, makeStyles } from '@material-ui/core/styles';\nimport CNodeLogo from '../../static/cnodejs/cnodejs.svg';\n\nlet pathsID = '& ';\npathsID += [\n  '#cell-c',\n  '#cell-n',\n  '#cell-d',\n  '#cell-e',\n].join(',& ');\n\nconst useStyles = makeStyles({\n  light: {\n    [pathsID]: { fill: '#fff' },\n  },\n  lightVariant: {\n    [pathsID]: { fill: '#ccc' },\n  },\n});\n\nconst Logo = (props) => {\n  const theme = useTheme();\n  const classes = useStyles();\n  const { className, reverse, color } = props;\n\n  const isLight =\n    Boolean(color)\n    ? color === 'light'\n    : Boolean(reverse)\n      ? theme.palette.type !== 'light'\n      : theme.palette.type === 'light';\n\n  const style = isLight && (\n    theme.palette.type === 'light'\n    ? classes.light\n    : classes.lightVariant\n  );\n\n  return <CNodeLogo className={clsx(style, className)} />;\n};\n\nLogo.propTypes = {\n  className: PropTypes.string,\n  reverse: PropTypes.bool,\n  color: PropTypes.oneOf(['light', 'dark']),\n};\n\nexport default Logo;\n","import React from 'react';\nimport { NavLink } from 'react-router-dom';\nimport {\n  navTabsArray as navTabs,\n  navIsActive,\n} from '../../common';\n\nimport { makeStyles } from '@material-ui/core/styles';\nimport Grid from '@material-ui/core/Grid';\nimport Button from '@material-ui/core/Button';\n\nimport './normal-nav.styl';\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    '& .type': {\n      color: `${theme.palette.type === 'light' ? '#fff' : '#ccc'} !important`,\n    },\n  },\n}));\n\nconst NormalNav = () => {\n  const classes = useStyles();\n\n  const isActive = path => (match, location) => {\n    return navIsActive(path, location);\n  };\n\n  return (\n    <Grid\n      container\n      justify=\"center\"\n      alignItems=\"center\"\n      className=\"type-content\"\n    >\n      {navTabs.map(({ path, name }) => (\n        <NavLink\n          to={path}\n          key={path}\n          activeClassName={`${classes.root} current`}\n          isActive={isActive(path)}\n        >\n          <Button\n            className=\"type\"\n            disableFocusRipple\n          >\n            {name}\n          </Button>\n        </NavLink>\n      ))}\n    </Grid>\n  );\n};\n\nexport default NormalNav;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport NotesIcon from '@material-ui/icons/Notes';\nimport TopIcon from '@material-ui/icons/Publish';\nimport GoodIcon from '@material-ui/icons/ThumbUp';\nimport QAIcon from '@material-ui/icons/Chat';\nimport ShareIcon from '@material-ui/icons/Share';\nimport JobIcon from '@material-ui/icons/Work';\nimport DevIcon from '@material-ui/icons/Build';\nimport UnknownIcon from '@material-ui/icons/HelpOutline';\n\nconst TopicTypeIcon = (props) => {\n  const {\n    all,\n    good,\n    top,\n    tab,\n    ...rest\n  } = props;\n\n  let typeIcon = <UnknownIcon {...rest} />;\n\n  if (all) {\n    typeIcon = <NotesIcon {...rest} />;\n  } else if (top) {\n    typeIcon = <TopIcon {...rest} />;\n  } else if (good) {\n    typeIcon = <GoodIcon {...rest} />;\n  } else {\n    switch (tab) {\n      case 'ask':\n        typeIcon = <QAIcon {...rest} />;\n        break;\n      case 'share':\n        typeIcon = <ShareIcon {...rest} />;\n        break;\n      case 'job':\n        typeIcon = <JobIcon {...rest} />;\n        break;\n      case 'dev':\n        typeIcon = <DevIcon {...rest} />;\n        break;\n      default:\n        break;\n    }\n  }\n\n  return typeIcon;\n};\n\nTopicTypeIcon.propTypes = {\n  tab: PropTypes.string,\n  all: PropTypes.bool,\n  top: PropTypes.bool,\n  good: PropTypes.bool,\n};\n\nexport default TopicTypeIcon;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { useHistory, useLocation } from 'react-router-dom';\nimport {\n  navTabsArray as navTabs,\n  navIsActive,\n} from '../../common';\n\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport SwipeableDrawer from '@material-ui/core/SwipeableDrawer';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\n\nimport TopicTypeIcon from '../../Components/TopicTypeIcon';\nimport Logo from '../../Components/Logo';\n\nconst useStyles = makeStyles(theme => ({\n  drawerPaper: {\n    width: 214,\n    backgroundColor: theme.palette.type === 'light' ? 'rgba(255,255,255,.96)' : 'rgba(66,66,66,.98)',\n  },\n  toolbar: {\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'flex-start',\n    ...theme.mixins.toolbar,\n  },\n  logo: {\n    paddingLeft: 16,\n    [theme.breakpoints.up('sm')]: {\n      paddingLeft: 24,\n    },\n    '& svg': {\n      height: 32,\n      marginBottom: 2,\n    },\n  },\n  spacing: {\n    marginRight: 6,\n  },\n}));\n\nconst DrawerNav = (props) => {\n  const classes = useStyles();\n  const history = useHistory();\n  const location = useLocation();\n\n  const isActive = path => {\n    return navIsActive(path, location);\n  };\n\n  const handleClose = () => {\n    props.onClose();\n  };\n\n  const handleClick = path => {\n    history.push(path);\n    handleClose();\n  };\n\n  return (\n    <SwipeableDrawer\n      open={props.open}\n      variant=\"temporary\"\n      onClose={handleClose}\n      onOpen={()=>{}}\n      classes={{\n        paper: classes.drawerPaper,\n      }}\n      ModalProps={{\n        keepMounted: true,\n      }}\n    >\n      <div className={`${classes.toolbar} ${classes.logo}`}>\n        <Logo reverse />\n      </div>\n\n      <List>\n        {navTabs.map(({ tab, path, name }) => (\n          <ListItem\n            button\n            key={tab}\n            component=\"a\"\n            selected={isActive(path)}\n            onClick={event => handleClick(path)}\n          >\n            <ListItemIcon className={classes.spacing}>\n              <TopicTypeIcon\n                color=\"inherit\"\n                all={tab === 'all'}\n                good={tab === 'good'}\n                tab={tab}\n              />\n            </ListItemIcon>\n            <ListItemText primary={name} />\n          </ListItem>\n        ))}\n      </List>\n    </SwipeableDrawer>\n  );\n};\n\nDrawerNav.propTypes = {\n  open: PropTypes.bool.isRequired,\n  onClose: PropTypes.func.isRequired,\n};\n\nexport default DrawerNav;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport { useLocation, Link } from 'react-router-dom';\n\nimport { makeStyles } from '@material-ui/core/styles';\nimport withWidth, { isWidthUp } from '@material-ui/core/withWidth';\n\nimport Hidden from '@material-ui/core/Hidden';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport IconButton from '@material-ui/core/IconButton';\nimport MenuIcon from '@material-ui/icons/Menu';\n\nimport Me from '../../Components/Me';\nimport Logo from '../../Components/Logo';\nimport NormalNav from '../Nav/NormalNav';\nimport DrawerNav from '../Nav/DrawerNav';\n\nimport { animateScroll } from 'react-scroll';\nimport './header.styl';\n\nconst useStyles = makeStyles(theme => ({\n  header: theme.palette.type === 'light' ? {\n    backgroundColor: '#2196f3',\n    backgroundImage: 'linear-gradient(150deg, #21d6f3, #2196f3 28%, #ff7ed7 110%)',\n    '@media (max-width: 960px)': {\n      backgroundImage: 'linear-gradient(150deg, #21d6f3, #2196f3 32%, #ff7ed7 106%)',\n    },\n    '@media (max-width: 768px)': {\n      backgroundImage: 'linear-gradient(150deg, #21d6f3, #2196f3 34%, #ff7ed7 104%)',\n    },\n    '@media (max-width: 500px)': {\n      backgroundImage: 'linear-gradient(150deg, #21d6f3, #2196f3 36%, #ff7ed7 102%)',\n    },\n  } : {\n    backgroundColor: '#363636',\n  },\n  toolbar: {\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'flex-start',\n    ...theme.mixins.toolbar,\n  },\n  navPlaceholder: {\n    height: 48,\n    '@media (max-width: 768px)': {\n      height: 38,\n    },\n  },\n  navHidden: {\n    height: 0,\n  },\n}));\n\nconst Header = (props) => {\n  const { width } = props;\n  const classes = useStyles();\n  const location = useLocation();\n\n  const [state, setState] = React.useState({\n    isMobile: false,\n    navHidden: false,\n    drawerOpen: false,\n  });\n\n  const handleScrollToTop = event => {\n    if (event.target === event.currentTarget) {\n      animateScroll.scrollTo(0, {\n        duration: 500,\n        smooth: 'easeInOutQuart',\n      });\n    }\n  };\n\n  const handleToggleNav = () => {\n    let { navHidden, drawerOpen } = state;\n\n    if (isWidthUp('md', width)) {\n      navHidden = !navHidden;\n      drawerOpen = false;\n    } else {\n      drawerOpen = !drawerOpen;\n    }\n\n    setState(prevState => ({ ...prevState, navHidden, drawerOpen }));\n  };\n\n  React.useEffect(() => {\n    const { pathname } = location;\n    const navHidden = pathname !== '/';\n\n    setState(prevState => ({ ...prevState, navHidden }));\n  }, [location]);\n\n  return (\n    <React.Fragment>\n      <div className={classes.toolbar} />\n      <div className={clsx(classes.navPlaceholder, {\n        [classes.navHidden]: !isWidthUp('md', width) || state.navHidden || state.drawerOpen,\n      })} />\n      <AppBar id=\"header\" className={classes.header} position=\"fixed\">\n        <Toolbar onClick={handleScrollToTop}>\n          <IconButton\n            color=\"inherit\"\n            onClick={handleToggleNav}\n          >\n            <MenuIcon />\n          </IconButton>\n          <div id=\"logo\">\n            <Hidden xsDown>\n              <Link to=\"/\">\n                <Logo className=\"logo\" color=\"light\" />\n              </Link>\n            </Hidden>\n          </div>\n\n          <Me />\n        </Toolbar>\n        <Hidden smDown implementation=\"css\">\n          {!state.navHidden && <NormalNav />}\n        </Hidden>\n      </AppBar>\n\n      <Hidden mdUp>\n        <DrawerNav\n          open={state.drawerOpen}\n          onClose={handleToggleNav}\n        />\n      </Hidden>\n    </React.Fragment>\n  );\n};\n\nHeader.propTypes = {\n  width: PropTypes.string.isRequired,\n};\n\nexport default withWidth()(Header);\n","import React from 'react';\n\nimport Button from '@material-ui/core/Button';\nimport Snackbar from '@material-ui/core/Snackbar';\n\nfunction sleep(delay = 0) {\n  return new Promise(resolve => {\n    setTimeout(resolve, delay);\n  });\n}\n\nfunction getLastSeenNotice() {\n  const seen = localStorage.getItem('lastSeenNotice');\n  return !Boolean(seen) ? 0 : parseInt(seen, 10);\n}\n\nlet messages = null;\n\nasync function getMessages() {\n  try {\n    if (!messages) {\n      await sleep(1500); // Soften the pressure on the main thread.\n      const result = await fetch(\n        'https://raw.githubusercontent.com/Fansaly/RCNode/master/messages.json',\n      );\n      messages = await result.json();\n    }\n  } catch (err) {\n    // Swallow the exceptions.\n  }\n\n  messages = messages || [];\n}\n\nconst Notice = () => {\n  const [open, setOpen] = React.useState(false);\n  const [message, setMessage] = React.useState({});\n\n  const handleMessage = () => {\n    const lastSeen = getLastSeenNotice();\n    const unseenMessages = messages.filter(msg => msg.id > lastSeen);\n\n    if (unseenMessages.length > 0) {\n      setMessage(unseenMessages[0]);\n      setOpen(true);\n    }\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n    localStorage.setItem('lastSeenNotice', message.id);\n  };\n\n  React.useEffect(() => {\n    let mounted = true;\n\n    // Prevent search engines from indexing the notification.\n    if (/glebot/.test(navigator.userAgent)) {\n      return;\n    }\n\n    (async () => {\n      await getMessages();\n      if (mounted) {\n        handleMessage();\n      }\n    })();\n\n    return () => mounted = false;\n  }, []);\n\n  return (\n    <Snackbar\n      key={message.id}\n      anchorOrigin={{ vertical: 'top', horizontal: 'center' }}\n      ContentProps={{ 'aria-describedby': 'notification-message' }}\n      message={\n        <span\n          id=\"notification-message\"\n          // eslint-disable-next-line react/no-danger\n          dangerouslySetInnerHTML={{ __html: message.text }}\n        />\n      }\n      action={\n        <Button size=\"small\" color=\"secondary\" onClick={handleClose}>\n          关闭\n        </Button>\n      }\n      open={open}\n      autoHideDuration={20e3}\n      onClose={handleClose}\n      onExited={handleMessage}\n    />\n  );\n};\n\nexport default Notice;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport CssBaseline from '@material-ui/core/CssBaseline';\n\nimport {\n  changeTitle,\n  changeHtmlAttributes,\n  changeBodyAttributes,\n} from './Helper';\nimport Header from './Header';\nimport Notice from './Notice';\nimport './app.styl';\n\nconst initialOptions = {\n  title: 'RCNode',\n  htmlAttributes: null,\n  bodyAttributes: null,\n  withHeader: true,\n};\n\nconst AppFrameContext = React.createContext(null);\n\nconst AppFrame = (props) => {\n  const [options, dispatch] = React.useReducer((state, { type, payload }) => {\n    switch (type) {\n      case 'CHANGE':\n        return {\n          ...state,\n          title: payload.title || state.title,\n          htmlAttributes: payload.htmlAttributes,\n          bodyAttributes: payload.bodyAttributes,\n          withHeader: payload.withHeader,\n        };\n      case 'RESET':\n        return {\n          ...initialOptions,\n        };\n      default:\n        throw new Error(`Unrecognized type ${type}`);\n    }\n  }, initialOptions);\n\n  const { title, htmlAttributes, bodyAttributes, withHeader } = options;\n\n  React.useEffect(() => {\n    changeTitle(title);\n  }, [title]);\n\n  React.useEffect(() => {\n    changeHtmlAttributes(htmlAttributes);\n  }, [htmlAttributes]);\n\n  React.useEffect(() => {\n    changeBodyAttributes(bodyAttributes);\n  }, [bodyAttributes]);\n\n  return (\n    <AppFrameContext.Provider value={dispatch}>\n      <CssBaseline />\n\n      {withHeader && (\n        <React.Fragment>\n          <Header />\n          <Notice />\n        </React.Fragment>\n      )}\n\n      {props.children}\n    </AppFrameContext.Provider>\n  );\n};\n\nAppFrame.propTypes = {\n  children: PropTypes.node.isRequired,\n};\n\nexport default AppFrame;\n\nexport const useChangeApp = () => {\n  const dispatch = React.useContext(AppFrameContext);\n\n  return React.useCallback(options => {\n    const type = options.reset ? 'RESET' : 'CHANGE';\n    dispatch({ type, payload: options });\n  }, [dispatch]);\n};\n","import PropTypes from 'prop-types';\n\nimport { useChangeApp } from './AppFrame';\n\nconst AppWrapper = (props) => {\n  const changeApp = useChangeApp();\n  const {\n    title,\n    htmlAttributes,\n    bodyAttributes,\n    withHeader = true,\n    reset = false,\n  } = props;\n\n  changeApp({\n    title,\n    htmlAttributes,\n    bodyAttributes,\n    withHeader,\n    reset,\n  });\n\n  return props.children;\n};\n\nAppWrapper.propTypes = {\n  children: PropTypes.node.isRequired,\n  title: PropTypes.string,\n  htmlAttributes: PropTypes.object,\n  bodyAttributes: PropTypes.object,\n  withHeader: PropTypes.bool,\n  reset: PropTypes.bool,\n};\n\nexport default AppWrapper;\n","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport { makeStyles } from '@material-ui/core/styles';\nimport Avatar from '@material-ui/core/Avatar';\n\nconst useStyles = makeStyles(theme => ({\n  avatar: {\n    '& a': {\n      display: 'flex',\n    },\n    '& img': {\n      display: 'inline-flex',\n      width: '100%',\n      height: '100%',\n      objectFit: 'contain',\n      color: 'rgba(255, 255, 255, 0.9)',\n      fontSize: 12,\n      lineHeight: 0,\n      textIndent: 20,\n    },\n  },\n}));\n\nconst CustomAvatar = (props) => {\n  const classes = useStyles();\n  const {\n    className,\n    name,\n    image,\n    url,\n  } = props;\n\n  return (\n    <Avatar\n      aria-label=\"Recipe\"\n      className={clsx(\n        classes.avatar,\n        className,\n      )}\n    >\n      {url ? (\n        <Link to={name ? url : '/'}>\n          {image &&\n            <img src={image} alt={name || '用户已注销'} />\n          }\n        </Link>\n      ) : (\n        <a>\n          {image &&\n            <img src={image} alt={name || '用户已注销'} />\n          }\n        </a>\n      )}\n    </Avatar>\n  );\n};\n\nCustomAvatar.propTypes = {\n  className: PropTypes.string,\n};\n\nexport default CustomAvatar;\n","import Moment from 'react-moment';\nimport 'moment/locale/zh-cn';\n\nMoment.globalLocale = 'zh-cn';\n\nexport default Moment;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport { useSelector } from 'react-redux';\nimport { useHistory, Link } from 'react-router-dom';\nimport {\n  randomNumber,\n  removeHtmlTags,\n} from '../../common';\n\nimport { makeStyles } from '@material-ui/core/styles';\nimport withWidth, { isWidthUp } from '@material-ui/core/withWidth';\n\nimport Grid from '@material-ui/core/Grid';\nimport Card from '@material-ui/core/Card';\nimport CardContent from '@material-ui/core/CardContent';\nimport CardActions from '@material-ui/core/CardActions';\nimport Typography from '@material-ui/core/Typography';\nimport Collapse from '@material-ui/core/Collapse';\nimport Button from '@material-ui/core/Button';\n\nimport IconButton from '@material-ui/core/IconButton';\nimport CreateIcon from '@material-ui/icons/Create';\nimport ViewIcon from '@material-ui/icons/Visibility';\nimport ReplyIcon from '@material-ui/icons/Comment';\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\n\nimport TopicTypeIcon from '../../Components/TopicTypeIcon';\nimport Avatar from '../../Components/Avatar';\nimport Moment from '../../Components/Moment';\nimport './topicard.styl';\n\nconst useStyles = makeStyles(theme => ({\n  button: {\n    display: 'flex',\n    padding: 0,\n    fontWeight: 'inherit',\n    fontFamily: 'inherit',\n    lineHeight: 'inherit',\n    letterSpacing: 'inherit',\n    textTransform: 'inherit',\n  },\n  expand: {\n    margin: 0,\n    transform: 'rotate(0deg)',\n    transition: theme.transitions.create('transform', {\n      duration: theme.transitions.duration.shortest,\n    }),\n  },\n  expandOpen: {\n    transform: 'rotate(180deg)',\n  },\n  title: {\n    '& h5': {\n      color: theme.palette.type === 'light' ? 'rgba(0,0,0,.92)' : 'rgba(200,200,200,.95)',\n    },\n  },\n  state: {\n    color: theme.palette.type === 'light' ? 'rgba(0,0,0,.5)' : 'rgba(125,125,125,.5)',\n    '& button': {\n      color: theme.palette.type === 'light' ? 'rgba(0,0,0,.4)' : 'rgba(125,125,125,.4)',\n    },\n  },\n}));\n\nconst TopiCard = (props) => {\n  const {\n    item,\n    simple = false,\n    className,\n    width,\n  } = props;\n\n  const classes = useStyles();\n  const history = useHistory();\n  const { cardPreview } = useSelector(state => state.settings);\n  const [expanded, setExpanded] = React.useState(cardPreview);\n\n  let targetRefs = [];\n\n  const collectTrgetRefs = ref => {\n    if (ref !== null) {\n      targetRefs = [...targetRefs, ref];\n    }\n  };\n\n  const substrContent = content => {\n    const len = randomNumber({ min: 200, max: 400 });\n    return removeHtmlTags(content).substr(0, len);\n  };\n\n  const handleExpandClick = () => {\n    setExpanded(prevState => !prevState);\n  };\n\n  const handleClick = event => {\n    if (targetRefs.includes(event.target)) {\n      history.push(`/topic/${item.id}`);\n    }\n  };\n\n  return (\n    <Card className={clsx('topicard', className, {\n      'expanded': !simple && expanded,\n    })}>\n      <Button\n        component=\"div\"\n        className={classes.button}\n        onClick={handleClick}\n        disableFocusRipple\n      >\n        <Grid\n          container\n          alignItems=\"center\"\n          className=\"topicard-header-wrapper\"\n        >\n          <Grid\n            container\n            alignItems=\"center\"\n            justify=\"flex-start\"\n            className=\"topicard-header\"\n            ref={ref => collectTrgetRefs(ref)}\n          >\n            <Avatar\n              className=\"avatar\"\n              name={item.author.loginname}\n              image={item.author.avatar_url}\n              url={`/user/${item.author.loginname}`}\n            />\n            <Grid\n              container\n              alignItems=\"center\"\n              justify=\"flex-start\"\n              className=\"topicard-title\"\n            >\n              <Grid item className={clsx('title', classes.title)}>\n                {!simple &&\n                  <Grid item className=\"type\">\n                    <IconButton>\n                      <TopicTypeIcon\n                        tab={item.tab}\n                        good={item.good}\n                        top={item.top}\n                      />\n                    </IconButton>\n                  </Grid>\n                }\n                <Typography variant=\"h5\" ref={ref => collectTrgetRefs(ref)}>\n                  <Link to={`/topic/${item.id}`}>{item.title}</Link>\n                </Typography>\n                {!simple &&\n                  <CardActions className=\"action\">\n                    <IconButton\n                      className={clsx(classes.expand, {\n                        [classes.expandOpen]: expanded,\n                      })}\n                      onClick={handleExpandClick}\n                      aria-expanded={expanded}\n                      aria-label=\"Show more\"\n                    >\n                      <ExpandMoreIcon />\n                    </IconButton>\n                  </CardActions>\n                }\n              </Grid>\n            </Grid>\n          </Grid>\n          <Grid container wrap=\"nowrap\" alignItems=\"center\" className=\"state-wrapper\"\n            ref={ref => collectTrgetRefs(ref)}\n          >\n            <Grid container wrap=\"nowrap\" alignItems=\"center\" className={clsx('state', classes.state)}\n              ref={ref => collectTrgetRefs(ref)}\n            >\n              <Grid container item zeroMinWidth wrap=\"nowrap\" alignItems=\"center\"\n                ref={ref => collectTrgetRefs(ref)}\n              >\n                <Grid item zeroMinWidth className=\"author\">\n                  <Link to={`/user/${item.author.loginname}`}>\n                    {item.author.loginname}\n                  </Link>\n                </Grid>\n                {!simple &&\n                  <Grid item className=\"create\">\n                    <IconButton><CreateIcon /></IconButton>\n                    <Moment fromNow>{item.create_at}</Moment>\n                  </Grid>\n                }\n              </Grid>\n              <Grid item className=\"count\">\n                <Grid item className=\"reply\">\n                  <IconButton><ReplyIcon /></IconButton>\n                  {!simple ? (\n                    <span>{item.reply_count}</span>\n                  ) : (\n                    <Moment fromNow>{item.last_reply_at}</Moment>\n                  )}\n                </Grid>\n                {!simple &&\n                  <Grid item className=\"visit\">\n                    <IconButton><ViewIcon /></IconButton>\n                    <span>{item.visit_count}</span>\n                  </Grid>\n                }\n              </Grid>\n            </Grid>\n          </Grid>\n        </Grid>\n      </Button>\n      {!simple &&\n        <Collapse\n          className=\"collapse\"\n          in={expanded}\n          timeout=\"auto\"\n          unmountOnExit={isWidthUp('sm', width)}\n        >\n          <CardContent className=\"context\">\n            <Typography>\n              {substrContent(item.content)}\n            </Typography>\n          </CardContent>\n        </Collapse>\n      }\n    </Card>\n  );\n};\n\nTopiCard.propTypes = {\n  item: PropTypes.object.isRequired,\n  simple: PropTypes.bool,\n  className: PropTypes.string,\n  width: PropTypes.string.isRequired,\n};\n\nexport default withWidth()(TopiCard);\n","export default (str) => {\n  return str.replace(/<[^>]+>/g, '');\n};\n","export const randomNumber = ({ min = 0, max = 1 }) => {\n  min = Math.ceil(min);\n  max = Math.floor(max);\n  return Math.floor(Math.random() * (max - min + 1)) + min;\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\n\nimport { makeStyles } from '@material-ui/core/styles';\nimport TopiCard from '../TopiCard';\n\nconst useStyles = makeStyles(theme => ({\n  margin: {\n    marginTop: 20,\n    '&:first-child': {\n      marginTop: 0,\n    },\n    '@media (max-width: 768px)': {\n      marginTop: 16,\n    },\n  },\n}));\n\nconst TopiCards = ({ items, simple = false, className, classes = {}, ...rest }) => {\n  const styles = useStyles();\n\n  return (\n    <div className={clsx(styles.margin, className, classes.root)} {...rest}>\n      {items.map(item => (\n        <TopiCard className={clsx(classes.card)} simple={simple} item={item} key={item.id} />\n      ))}\n    </div>\n  );\n};\n\nTopiCards.propTypes = {\n  className: PropTypes.string,\n  classes: PropTypes.object,\n  simple: PropTypes.bool,\n  items: PropTypes.array.isRequired,\n};\n\nexport default TopiCards;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\n\nimport Grid from '@material-ui/core/Grid';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport { CSSTransition } from 'react-transition-group';\n\nimport './progress.styl';\n\nconst Progress = (props) => {\n  const { className, status, unmountOnExit = true } = props;\n\n  const handleExited = () => {\n    const { onExited } = props;\n    Boolean(onExited) && onExited();\n  };\n\n  return (\n    <Grid item id=\"progress\" className={clsx(className)}>\n      <CSSTransition\n        className=\"progress loading\"\n        classNames=\"progress\"\n        in={status === 'loading'}\n        timeout={{ enter: 100, exit: 550 }}\n        onExited={handleExited}\n        unmountOnExit={unmountOnExit}\n      >\n        <CircularProgress classes={{ svg: 'loop-color' }} />\n      </CSSTransition>\n    </Grid>\n  );\n};\n\nProgress.propTypes = {\n  status: PropTypes.oneOf(['idle', 'loading', 'success', 'error']).isRequired,\n  onExited: PropTypes.func,\n  unmountOnExit: PropTypes.bool,\n};\n\nexport default Progress;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { useParams } from 'react-router-dom';\nimport { post } from '../../fetch';\n\nimport { makeStyles } from '@material-ui/core/styles';\nimport withWidth, { isWidthUp } from '@material-ui/core/withWidth';\n\nimport Fab from '@material-ui/core/Fab';\nimport Zoom from '@material-ui/core/Zoom';\nimport AppBar from '@material-ui/core/AppBar';\nimport EditIcon from '@material-ui/icons/Edit';\nimport FavoriteBorderIcon from '@material-ui/icons/FavoriteBorder';\nimport FavoriteIcon from '@material-ui/icons/Favorite';\nimport ReplyIcon from '@material-ui/icons/ModeComment';\nimport ShareIcon from '@material-ui/icons/Share';\n\nimport SpeedDial from '@material-ui/lab/SpeedDial';\nimport SpeedDialIcon from '@material-ui/lab/SpeedDialIcon';\nimport SpeedDialAction from '@material-ui/lab/SpeedDialAction';\n\nconst useStyles = makeStyles(theme => ({\n  appbar: {\n    top: 'auto',\n    bottom: 0,\n    boxShadow: 'none',\n  },\n  wrapper: {\n    position: 'relative',\n  },\n  action: {\n    position: 'absolute',\n    right: theme.spacing(3.5),\n    bottom: theme.spacing(4),\n  },\n  fabMoveUp: {\n    transform: 'translate3d(0, -56px, 0)',\n    transition: theme.transitions.create('transform', {\n      duration: theme.transitions.duration.enteringScreen,\n      easing: theme.transitions.easing.easeOut,\n    }),\n  },\n  fabMoveDown: {\n    transform: 'translate3d(0, 0, 0)',\n    transition: theme.transitions.create('transform', {\n      duration: theme.transitions.duration.leavingScreen,\n      easing: theme.transitions.easing.sharp,\n    }),\n  },\n}));\n\nconst ActionDial = (props) => {\n  const {\n    width,\n    single = false,\n    topic = null,\n  } = props;\n\n  const {\n    isAuthed,\n    accesstoken,\n    uname: signedUname,\n  } = useSelector(({ auth }) => auth);\n\n  const visible = useSelector(({ editor }) => !editor.open);\n  const notificationIsOpen = useSelector(({ notification }) => notification.open);\n  const dispatch = useDispatch();\n  const classes = useStyles();\n  const { topic_id } = useParams();\n  const isCancel = React.useRef(false);\n\n  const [state, setState] = React.useState({\n    favorite: undefined,\n    expanded: false,\n    shareURL: null,\n  });\n\n  const handleOpen = () => {\n    if (!visible) {\n      return;\n    }\n\n    setState(prevState => ({\n      ...prevState,\n      expanded: true,\n    }));\n  };\n\n  const handleClose = () => {\n    setState(prevState => ({\n      ...prevState,\n      expanded: false,\n    }));\n  };\n\n  const handleClick = event => {\n    const { expanded } = state;\n\n    setState(prevState => ({\n      ...prevState,\n      expanded: !expanded,\n    }));\n\n    if (expanded && signedUname === topic.uname) {\n      handleUpdate();\n    }\n  };\n\n  const handleShare = event => {\n    handleClose();\n    dispatch({ type: 'OPEN_SHARE', data: state.shareURL });\n  };\n\n  const handleFavorite = async event => {\n    const { favorite } = state;\n\n    const params = {\n      url: favorite\n            ? '/topic_collect/de_collect'\n            : '/topic_collect/collect',\n      params: {\n        accesstoken,\n        topic_id: topic.topic_id,\n      },\n    };\n\n    handleClose();\n\n    const { success, err_msg } = await post(params);\n\n    if (isCancel.current) {\n      return;\n    }\n\n    const message = success\n                    ? favorite ? '取消收藏' : '已收藏'\n                    : {\n                      message: err_msg || '操作失败',\n                      status: 'error',\n                    };\n\n    success && setState(prevState => ({\n      ...prevState,\n      expanded: true,\n      favorite: !favorite,\n    }));\n\n    dispatch({ type: 'OPEN_NOTIFICATION', data: message });\n  };\n\n  const handleReply = event => {\n\n    const config = {\n      action: 'reply',\n      url: `/topic/${topic_id}/replies`,\n      reply_id: topic_id,\n      content: '',\n    };\n\n    handleClose();\n    handleOpenEditor(config);\n  };\n\n  const handleUpdate = () => {\n    const config = {\n      action: 'update',\n      url: '/topics/update',\n      tab: topic.tab,\n      title: topic.title,\n      content: topic.content,\n      topic_id: topic.topic_id,\n    };\n\n    handleOpenEditor(config);\n  };\n\n  const handleCreate = () => {\n    const config = {\n      action: 'create',\n      url: '/topics',\n    };\n\n    handleOpenEditor(config);\n  };\n\n  const handleOpenEditor = config => {\n    dispatch({ type: 'OPEN_EDITOR', data: config });\n  };\n\n  React.useEffect(() => {\n    const { origin, pathname } = window.location;\n\n    setState(prevState => ({\n      ...prevState,\n      shareURL: `${origin}${pathname}`,\n    }));\n\n    return () => isCancel.current = true;\n  }, []);\n\n  React.useEffect(() => {\n    if (topic === null) {\n      return;\n    }\n\n    setState(prevState => ({\n      ...prevState,\n      favorite: typeof prevState.favorite === 'boolean'\n                ? prevState.favorite\n                : Boolean(topic)\n                  ? topic.is_collect\n                  : undefined,\n    }));\n  }, [topic]);\n\n  return (isAuthed &&\n    <AppBar\n      color=\"default\"\n      component=\"div\"\n      className={classes.appbar}\n    >\n      <div className={classes.wrapper}>\n        {single ? (\n          <Zoom in={visible} unmountOnExit>\n            <Fab\n              color=\"secondary\"\n              aria-label=\"Edit\"\n              className={classes.action}\n              onClick={handleCreate}\n            >\n              <EditIcon />\n            </Fab>\n          </Zoom>\n        ) : (Boolean(topic) &&\n          <SpeedDial\n            ariaLabel=\"SpeedDial\"\n            className={clsx(classes.action, {\n              [classes.fabMoveUp]: !isWidthUp('md', width) && notificationIsOpen,\n              [classes.fabMoveDown]: !isWidthUp('md', width) && !notificationIsOpen,\n            })}\n            color=\"secondary\"\n            hidden={!visible}\n            open={state.expanded}\n            onClick={handleClick}\n            onClose={handleClose}\n            onMouseEnter={handleOpen}\n            onMouseLeave={handleClose}\n            icon={signedUname === topic.uname ? (\n              <SpeedDialIcon openIcon={<EditIcon />} />\n            ) : (\n              <SpeedDialIcon />\n            )}\n          >\n            <SpeedDialAction\n              icon={<ReplyIcon />}\n              tooltipTitle=\"\"\n              onClick={handleReply}\n            />\n            <SpeedDialAction\n              icon={state.favorite ? <FavoriteIcon /> : <FavoriteBorderIcon />}\n              tooltipTitle=\"\"\n              onClick={handleFavorite}\n            />\n            <SpeedDialAction\n              icon={<ShareIcon />}\n              tooltipTitle=\"\"\n              onClick={handleShare}\n            />\n          </SpeedDial>\n        )}\n      </div>\n    </AppBar>\n  );\n};\n\nActionDial.propTypes = {\n  width: PropTypes.string.isRequired,\n  single: PropTypes.bool,\n  topic: PropTypes.any,\n};\n\nexport default withWidth()(ActionDial);\n","import React from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\n\nimport { makeStyles } from '@material-ui/core/styles';\nimport Snackbar from '@material-ui/core/Snackbar';\nimport SnackbarContent from '@material-ui/core/SnackbarContent';\nimport IconButton from '@material-ui/core/IconButton';\n\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle';\nimport WarningIcon from '@material-ui/icons/Warning';\nimport ErrorIcon from '@material-ui/icons/Error';\nimport InfoIcon from '@material-ui/icons/Info';\nimport CloseIcon from '@material-ui/icons/Close';\n\nconst useStyles = makeStyles(theme => ({\n  success: {\n    backgroundColor: '#43a047',\n  },\n  error: {\n    backgroundColor: '#d32f2f',\n  },\n  info: {\n    backgroundColor: '#1976d2',\n  },\n  warning: {\n    backgroundColor: '#ffa000',\n  },\n  icon: {\n    fontSize: 20,\n  },\n  iconVariant: {\n    opacity: 0.9,\n    marginRight: theme.spacing(1),\n  },\n  message: {\n    display: 'flex',\n    alignItems: 'center',\n  },\n}));\n\nconst variantIcon = {\n  success: CheckCircleIcon,\n  warning: WarningIcon,\n  error: ErrorIcon,\n  info: InfoIcon,\n};\n\nconst Notification = () => {\n  const classes = useStyles();\n  const dispatch = useDispatch();\n  const {\n    open,\n    message,\n    status,\n  } = useSelector(({ notification }) => {\n    const statusType = ['success', 'warning', 'error', 'info'];\n\n    if (!statusType.includes(notification.status)) {\n      notification.status = 'info';\n    }\n\n    return notification;\n  });\n\n  const handleClose = React.useCallback(() => {\n    dispatch({ type: 'CLOSE_NOTIFICATION' });\n  }, [dispatch]);\n\n  const handleExit = React.useCallback(() => {\n    open && handleClose();\n  }, [open, handleClose]);\n\n  React.useEffect(() => {\n    return () => handleExit();\n  }, [handleExit]);\n\n  const Icon = variantIcon[status];\n  const key = new Date().getTime();\n\n  return (\n    <Snackbar\n      key={key}\n      open={open}\n      anchorOrigin={{\n        vertical: 'bottom',\n        horizontal: 'left',\n      }}\n      autoHideDuration={3000}\n      onClose={handleClose}\n    >\n      <SnackbarContent\n        className={classes[status]}\n        aria-describedby=\"snackbar-message-id\"\n        message={\n          <span id=\"snackbar-message-id\" className={classes.message}>\n            <Icon className={`${classes.icon} ${classes.iconVariant}`} />\n            {message}\n          </span>\n        }\n        action={\n          <IconButton\n            color=\"inherit\"\n            className={classes.close}\n            onClick={handleClose}\n          >\n            <CloseIcon className={classes.icon} />\n          </IconButton>\n        }\n      />\n    </Snackbar>\n  );\n};\n\nexport default Notification;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { makeStyles } from '@material-ui/core/styles';\nimport TextField from '@material-ui/core/TextField';\n\nconst useStyles = makeStyles(theme => ({\n  flex: {\n    margin: 0,\n    '& *': {\n      flex: '1 1 auto',\n      minHeight: 210,\n      padding: 0,\n    },\n    '& textarea': {\n      position: 'absolute',\n      top: 0,\n      left: 0,\n      width: '100%',\n      height: '100%',\n      lineHeight: 1.3125,\n    },\n  },\n}));\n\nconst MarkdownEditor = ({ inputRef, ...props }) => {\n  const classes = useStyles();\n  const {\n    content,\n    disabled,\n    onUpdateContent: updateContent,\n  } = props;\n\n  const handleUpdateContent = event => {\n    updateContent(event);\n  };\n\n  return (\n    <React.Fragment>\n      <TextField\n        className={classes.flex}\n        margin=\"normal\"\n        multiline\n        rows=\"3\"\n        fullWidth\n        id=\"textarea\"\n        placeholder=\"写些什么呢？\"\n        inputRef={inputRef}\n        value={content}\n        disabled={disabled}\n        onChange={handleUpdateContent}\n      />\n    </React.Fragment>\n  );\n};\n\nMarkdownEditor.propTypes = {\n  content: PropTypes.string.isRequired,\n  disabled: PropTypes.bool.isRequired,\n  onUpdateContent: PropTypes.func.isRequired,\n};\n\nexport default MarkdownEditor;\n","import MarkdownIt from 'markdown-it';\nimport checkbox from 'markdown-it-task-checkbox';\nimport emoji from 'markdown-it-emoji';\nimport sub from 'markdown-it-sub';\nimport sup from 'markdown-it-sup';\nimport footnote from 'markdown-it-footnote';\nimport container from 'markdown-it-container';\n\nimport Prism, { alias } from '../../Prism';\nimport { transformOrgURL } from '../../../common';\n\nconst md = new MarkdownIt({\n  html: true,\n  linkify: true,\n  typographer: true,\n  quotes: '“”‘’',\n  highlight: (code, lang) => {\n    lang = typeof lang === 'string' && lang.toLocaleLowerCase();\n    lang = alias[lang] || lang;\n\n    if (!Object.keys(Prism.languages).includes(lang)) {\n      if (Boolean(lang) && process.env.NODE_ENV === 'development') {\n        console.warn(`\\`${lang}' code is highlighted with \\`markup'.`);\n      }\n\n      lang = 'markup';\n    }\n\n    return Prism.highlight(code, Prism.languages[lang]);\n  },\n})\n.use(checkbox)\n.use(emoji)\n.use(sub)\n.use(sup)\n.use(footnote)\n.use(container);\n\nconst atToHtml = ({url, text, prevSpaces = '', nextSpaces = ''}) => {\n  const href = `${process.env.PUBLIC_URL}/user/${url}`;\n  return `${prevSpaces}<a target=\"_blank\" href=\"${href}\">${text}</a>${nextSpaces}`;\n};\n\nmd.renderer.rules.text = (tokens, idx, options, env, self) => {\n  let content = tokens[idx].content;\n\n  if (Boolean(content)) {\n    content = content\n      .replace(/^(@([\\w\\-_]+))$/, atToHtml({url: '$2', text: '$1'}))\n      .replace(/(\\s+)(@([\\w\\-_]+))/g, atToHtml({url: '$3', text: '$2', prevSpaces: '$1'}))\n      .replace(/(@([\\w\\-_]+))(\\s+)/g, atToHtml({url: '$2', text: '$1', nextSpaces: '$3'}));\n  }\n\n  return content;\n};\n\nmd.renderer.rules.link_open = (tokens, idx, options, env, self) => {\n  tokens[idx].attrPush(['target', '_blank']);\n\n  const hrefIdx = tokens[idx].attrIndex('href');\n  const hrefSrc = transformOrgURL(tokens[idx].attrs[hrefIdx][1]);\n\n  if (/^\\/\\w+.*$/.test(hrefSrc)) {\n    tokens[idx].attrs[hrefIdx][1] = `${process.env.PUBLIC_URL}${hrefSrc}`;\n  } else {\n    tokens[idx].attrs[hrefIdx][1] = hrefSrc;\n  }\n\n  for (var i = tokens.length - 1; i >= 0; i--) {\n    const { type, level, content } = tokens[i];\n\n    if (type === 'text' && level !== 0) {\n      tokens[i].content = transformOrgURL(content);\n    }\n  }\n\n  return self.renderToken(tokens, idx, options);\n};\n\nexport default md;\n","import sanitizeHtml from 'sanitize-html';\nimport markdownRender from './markdown-it';\n\nconst blacklist = [ 'style', 'script', 'textarea', 'noscript' ];\n\nexport default (markdownString) => {\n  return sanitizeHtml(markdownRender.render(markdownString), {\n    allowedTags: false,\n    exclusiveFilter: (frame) => {\n      return blacklist.includes(frame.tag);\n    },\n  });\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport { useDispatch } from 'react-redux';\n\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport markdownToHtml from './markdownToHtml';\nimport 'github-markdown-css/github-markdown.css';\nimport './markdown-render.styl';\n\nconst useStyles = makeStyles(theme => ({\n  root: theme.palette.type === 'light' ? {\n    color: '#24292e',\n    '& code': { backgroundColor: 'rgba(27,31,35,.05)' },\n    '& pre, & .highlight pre': { backgroundColor: '#f6f8fa' },\n    '& blockquote': { borderLeftColor: '#dfe2e5' },\n    '& h1, & h2': { borderBottomColor: '#eaecef' },\n    '& img': { backgroundColor: '#fff' },\n    '& a': { color: '#0366d6' },\n    '& hr': {\n      backgroundColor: '#e1e4e8',\n      borderBottomColor: '#eee',\n    },\n    '& table': {\n      '& th, & td': {\n        borderColor: '#dfe2e5',\n      },\n      '& tr': {\n        backgroundColor: '#fff',\n        borderTopColor: '#c6cbd1',\n        '&:nth-child(2n)': {\n          backgroundColor: '#f6f8fa',\n        },\n      },\n    },\n  } : {\n    color: theme.palette.text.primary,\n    '& code': { backgroundColor: 'rgba(200,200,200,.05)' },\n    '& pre, & .highlight pre': { backgroundColor: '#333' },\n    '& blockquote': { borderLeftColor: '#5a5a5a' },\n    '& h1, & h2': { borderBottomColor: '#5d5d5d' },\n    '& img': { backgroundColor: 'transparent' },\n    '& a': { color: '#1858a0' },\n    '& hr': {\n      backgroundColor: '#777',\n      borderBottomColor: '#7c7c7c',\n    },\n    '& table': {\n      '& th, & td': {\n        borderColor: '#3a3b3c',\n      },\n      '& tr': {\n        backgroundColor: 'transparent',\n        borderTopColor: '#2d2e2f',\n        '&:nth-child(2n)': {\n          backgroundColor: '#2a2b2c',\n        },\n      },\n    },\n  },\n}));\n\nconst MarkdownRender = (props) => {\n  const { className, markdownString } = props;\n  const classes = useStyles();\n  const dispatch = useDispatch();\n  const mdRef = React.useRef();\n\n  React.useEffect(() => {\n    const handleClick = event => {\n      const src = event.target.getAttribute('src');\n      dispatch({ type: 'OPEN_ZOOM', data: { src } });\n    };\n\n    const imgs = Array.from(mdRef.current.querySelectorAll('img'));\n    imgs.map(img => img.addEventListener('click', handleClick));\n  }, [dispatch]);\n\n  return (\n    <div\n      ref={mdRef}\n      className={clsx('markdown-body', className, classes.root)}\n      // eslint-disable-next-line react/no-danger\n      dangerouslySetInnerHTML={{\n        __html: markdownToHtml(markdownString),\n      }}\n    />\n  );\n};\n\nMarkdownRender.propTypes = {\n  className: PropTypes.string,\n  markdownString: PropTypes.string.isRequired,\n};\n\nexport default MarkdownRender;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport { useSelector } from 'react-redux';\nimport {\n  navTabsObject as navTabs,\n  topicTypes,\n} from '../../common';\n\nimport { makeStyles } from '@material-ui/core/styles';\nimport Typography from '@material-ui/core/Typography';\nimport IconButton from '@material-ui/core/IconButton';\nimport Hidden from '@material-ui/core/Hidden';\n\nimport Popover from '@material-ui/core/Popover';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\n\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\nimport ArrowRightIcon from '@material-ui/icons/ArrowRight';\nimport FullscreenIcon from '@material-ui/icons/Fullscreen';\nimport FullscreenExitIcon from '@material-ui/icons/FullscreenExit';\nimport PreviewIcon from '@material-ui/icons/LocalLibrary';\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\n\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport Dialog from '@material-ui/core/Dialog';\nimport RadioGroup from '@material-ui/core/RadioGroup';\nimport Radio from '@material-ui/core/Radio';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\n\nimport Avatar from '../../Components/Avatar';\nimport TopicTypeIcon from '../../Components/TopicTypeIcon';\nimport './editor-header.styl';\n\nconst useStyles = makeStyles(theme => ({\n  color: {\n    color: theme.palette.type === 'light' ? '#0366d6' : '#1858a0',\n    '& svg': {\n      color: theme.palette.type === 'light' ? 'rgba(0,0,0,.58)' : 'rgba(230,230,230,.58)',\n    },\n  },\n  text: {\n    padding: 0,\n    paddingRight: 2,\n  },\n  title: {\n    paddingTop: 20,\n    paddingBottom: 0,\n    '& h6': {\n      fontSize: '1.125rem',\n    },\n  },\n  back: {\n    marginLeft: -14,\n  },\n  content: {\n    paddingBottom: 20,\n  },\n}));\n\nconst EditorHeader = (props) => {\n  const {\n    publishTab,\n    onPublishTab,\n    onPreview,\n    onFullScreen,\n    fullScreen,\n    disabled,\n  } = props;\n\n  const { isAuthed, uname, avatar } = useSelector(({ auth }) => auth);\n  const { action } = useSelector(({ editor }) => editor);\n\n  const [moreOpen, setMoreOpen] = React.useState(false);\n  const [selectOpen, setSelectOpen] = React.useState(false);\n  const anchorEl = React.useRef(null);\n  const classes = useStyles();\n\n  const handleCloseSelect = () => {\n    setSelectOpen(false);\n  };\n\n  const handleOpenSelect = () => {\n    setSelectOpen(!disabled);\n  };\n\n  const handleChange = (event, value) => {\n    onPublishTab(value);\n    handleCloseSelect();\n  };\n\n  const handleCloseMore = () => {\n    setMoreOpen(false);\n  };\n\n  const handleOpenMore = () => {\n    setMoreOpen(true);\n  };\n\n  const handlePreview = () => {\n    handleCloseMore();\n    onPreview();\n  };\n\n  const handleFullScreen = () => {\n    handleCloseMore();\n    onFullScreen();\n  };\n\n  return (isAuthed &&\n    <React.Fragment>\n      <div className=\"flex editor-header\">\n        <Avatar\n          name={uname}\n          image={avatar}\n          className=\"avatar\"\n        />\n        <div className=\"flex box\">\n          <Typography className=\"flex editor-uname\">\n            {uname}\n            <ArrowRightIcon color=\"inherit\" />\n          </Typography>\n          {/(create)|(update)/.test(action) &&\n            <Typography className=\"flex editor-tpoic-type\">\n              <Typography\n                className={clsx('flex', classes.color, {\n                  'disabled': disabled,\n                })}\n                onClick={handleOpenSelect}\n                component=\"span\"\n              >\n                {publishTab ? navTabs[publishTab].name : '请选择分类'}\n                <TopicTypeIcon tab={publishTab} />\n              </Typography>\n            </Typography>\n          }\n        </div>\n        <div className=\"editor-header-actions\">\n          <IconButton\n            buttonRef={node => {\n              anchorEl.current = node;\n            }}\n            variant=\"contained\"\n            onClick={handleOpenMore}\n          >\n            <MoreVertIcon />\n          </IconButton>\n        </div>\n      </div>\n\n      <Popover\n        open={moreOpen}\n        anchorEl={anchorEl.current}\n        anchorReference=\"anchorEl\"\n        anchorPosition={{ top: 30, left: 30 }}\n        onClose={handleCloseMore}\n        anchorOrigin={{\n          vertical: 'top',\n          horizontal: 'right',\n        }}\n        transformOrigin={{\n          vertical: 'top',\n          horizontal: 'right',\n        }}\n      >\n        <List>\n          <ListItem button onClick={handlePreview}>\n            <ListItemIcon>\n              <PreviewIcon color=\"inherit\" />\n            </ListItemIcon>\n            <ListItemText\n              className={classes.text}\n              primary=\"预览\"\n            />\n          </ListItem>\n          <Hidden xsDown>\n            <ListItem button onClick={handleFullScreen}>\n              <ListItemIcon>\n                {fullScreen ? (\n                  <FullscreenExitIcon color=\"inherit\" />\n                ) : (\n                  <FullscreenIcon color=\"inherit\" />\n                )}\n              </ListItemIcon>\n              <ListItemText\n                className={classes.text}\n                primary=\"全屏\"\n              />\n            </ListItem>\n          </Hidden>\n        </List>\n      </Popover>\n\n      <Dialog\n        open={selectOpen}\n        maxWidth=\"xs\"\n        onClose={handleCloseSelect}\n      >\n        <DialogTitle className={classes.title}>\n          <IconButton\n            className={classes.back}\n            onClick={handleCloseSelect}\n          >\n            <ArrowBackIcon />\n          </IconButton>\n          请选择一个分类\n        </DialogTitle>\n        <DialogContent className={classes.content}>\n          <RadioGroup\n            aria-label=\"topicType\"\n            name=\"topicType\"\n            value={publishTab}\n            onChange={handleChange}\n          >\n            {topicTypes.map(tab => (\n              <FormControlLabel\n                key={tab}\n                value={tab}\n                label={navTabs[tab].name}\n                control={<Radio />}\n              />\n            ))}\n          </RadioGroup>\n        </DialogContent>\n      </Dialog>\n    </React.Fragment>\n  );\n};\n\nEditorHeader.propTypes = {\n  onPublishTab: PropTypes.func,\n  publishTab: PropTypes.string,\n  onPreview: PropTypes.func.isRequired,\n  onFullScreen: PropTypes.func.isRequired,\n  fullScreen: PropTypes.bool.isRequired,\n  disabled: PropTypes.bool.isRequired,\n};\n\nexport default EditorHeader;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport { makeStyles } from '@material-ui/core/styles';\nimport withWidth, { isWidthDown } from '@material-ui/core/withWidth';\n\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport Typography from '@material-ui/core/Typography';\nimport IconButton from '@material-ui/core/IconButton';\nimport CloseIcon from '@material-ui/icons/Close';\n\nimport { MarkdownRender } from '../../Components/Markdown';\n\nconst useStyles = makeStyles(theme => ({\n  title: {\n    [theme.breakpoints.up('sm')]: {\n      paddingLeft: 36,\n      paddingRight: 36,\n    },\n    '& h2': {\n      position: 'relative',\n      padding: '15px 0',\n      fontSize: '1.25rem',\n      borderBottomWidth: 1,\n      borderBottomStyle: 'dashed',\n      borderBottomColor: theme.palette.type === 'light' ? 'rgba(0,0,0,.08)' : 'rgba(210,210,210,.08)',\n    },\n  },\n  close: {\n    position: 'absolute',\n    top: '50%',\n    right: -10,\n    transform: 'translateY(-50%)',\n  },\n  content: {\n    paddingBottom: 36,\n    [theme.breakpoints.up('sm')]: {\n      paddingLeft: 36,\n      paddingRight: 36,\n    },\n  },\n}));\n\nconst Preview = (props) => {\n  const handleClose = () => {\n    props.onClose();\n  };\n\n  const { width, open, content } = props;\n  const classes = useStyles();\n\n  return (\n    <Dialog\n      open={open}\n      fullWidth\n      maxWidth=\"md\"\n      fullScreen={isWidthDown('xs', width)}\n      onClose={handleClose}\n    >\n      <DialogTitle className={classes.title} disableTypography>\n        <Typography component=\"h2\">\n          预览\n          <IconButton\n            className={classes.close}\n            onClick={handleClose}\n          >\n            <CloseIcon />\n          </IconButton>\n        </Typography>\n      </DialogTitle>\n      <DialogContent className={classes.content}>\n        <MarkdownRender markdownString={content} />\n      </DialogContent>\n    </Dialog>\n  );\n};\n\nPreview.propTypes = {\n  width: PropTypes.string.isRequired,\n  open: PropTypes.bool.isRequired,\n  onClose: PropTypes.func.isRequired,\n  content: PropTypes.string.isRequired,\n};\n\nexport default withWidth()(Preview);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { useLocation } from 'react-router-dom';\nimport { topicTypes, matchTab } from '../../common';\nimport { post } from '../../fetch';\n\nimport { makeStyles } from '@material-ui/core/styles';\nimport withWidth, { isWidthUp } from '@material-ui/core/withWidth';\n\nimport Slide from '@material-ui/core/Slide';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport Button from '@material-ui/core/Button';\nimport TextField from '@material-ui/core/TextField';\n\nimport { MarkdownEditor } from '../../Components/Markdown';\nimport EditorHeader from './EditorHeader';\nimport Preview from './Preview';\n\nconst useStyles = makeStyles(theme => ({\n  editor: {\n    '& #editor .editor-header': {\n      padding: '24px 0 14px 24px',\n    },\n  },\n  title: {\n    margin: 0,\n    padding: '0 24px 18px',\n  },\n  content: {\n    paddingTop: 0,\n    paddingBottom: 0,\n  },\n  actions: {\n    margin: 0,\n    padding: '10px 24px',\n  },\n  button: {\n    margin: 0,\n    minWidth: 110,\n  },\n  doit: {\n    marginLeft: 16,\n  },\n  cancel: {\n    marginLeft: 0,\n  },\n}));\n\nconst Transition = React.forwardRef((props, ref) => {\n  return <Slide direction=\"up\" ref={ref} {...props} />;\n});\n\nconst initialState = {\n  /**\n   * status\n   * 1 idle\n   * 2 working\n   * 3 success\n   * 4 error\n   * -------------------------\n   * set it but never used ^_^\n   */\n  status: 'idle',\n  publishTab: null,\n  title: '',\n  content: '',\n  /**\n   * repo: https://github.com/cnodejs/nodeclub\n   * file: api/v1/topic.js\n   * line: 144\n   */\n  validation: {\n    title: {\n      max: 100,\n      min: 5,\n    },\n    content: {\n      max: null,\n      min: 3,\n    },\n  },\n  isOK: false,\n  isDiff: false,\n  preview: false,\n  fullScreen: false,\n  disabled: false,\n};\n\nconst Editor = (props) => {\n  const { width } = props;\n  const { isAuthed, accesstoken } = useSelector(({ auth }) => auth);\n  const dispatch = useDispatch();\n  const location = useLocation();\n  const classes = useStyles();\n  const isCancel = React.useRef();\n  const titleRef = React.useRef();\n  const contentRef = React.useRef();\n\n  const editor = useSelector(s => s.editor);\n  const { open, action, url, topic_id, reply_id } = editor;\n\n  const [eState, eDispatch] = React.useReducer((state, { type, data }) => {\n    switch (type) {\n      case 'INIT':\n        return { ...state, ...data };\n      case 'SET_PUBLISH_TAB':\n        return { ...state, publishTab: data };\n      case 'CHANGE':\n        return { ...state, ...data };\n      case 'IS_OK':\n        return { ...state, isOK: data };\n      case 'IS_DIFF':\n        return { ...state, isDiff: data };\n      case 'CLOSE_PREVIEW':\n        return { ...state, preview: false };\n      case 'OPEN_PREVIEW':\n        return { ...state, preview: true };\n      case 'TOGGLE_FULL_SCREEN':\n        return { ...state, fullScreen: !state.fullScreen };\n      case 'REQUEST':\n        return {\n          ...state,\n          status: 'working',\n          disabled: true,\n        };\n      case 'REQUEST_END':\n        return {\n          ...state,\n          status: data,\n          disabled: false,\n        };\n      default:\n        return state;\n    }\n  }, initialState);\n\n  const { publishTab, title, content, validation, isOK, preview, fullScreen, disabled } = eState;\n\n  const handleFocus = () => {\n    if (['create', 'update'].includes(action)) {\n      titleRef.current.focus();\n    } else {\n      contentRef.current.focus();\n    }\n  };\n\n  const handlePublishTab = tab => {\n    eDispatch({ type: 'SET_PUBLISH_TAB', data: tab });\n  };\n\n  const handleChange = name => event => {\n    let value = event.target.value;\n\n    if (name === 'title') {\n      value = value.replace(/\\n/g, '');\n    }\n\n    eDispatch({\n      type: 'CHANGE',\n      data: { [name]: value },\n    });\n  };\n\n  const handleOpenPreview = () => {\n    if (!Boolean(content) || content.trim().length < validation.content.min) {\n      dispatch({\n        type: 'OPEN_NOTIFICATION',\n        data: {\n          message: '太短了唷。',\n          status: 'info',\n        },\n      });\n    } else {\n      eDispatch({ type: 'OPEN_PREVIEW' });\n    }\n  };\n\n  const handleClosePreview = () => {\n    eDispatch({ type: 'CLOSE_PREVIEW' });\n  };\n\n  const handleFullScreen = () => {\n    eDispatch({ type: 'TOGGLE_FULL_SCREEN' });\n  };\n\n  const handleClose = React.useCallback((result = {}) => {\n    const { response } = result;\n\n    handleClosePreview();\n\n    if (!disabled) {\n      dispatch({ type: 'CLOSE_EDITOR', data: response ? result : {} });\n    }\n  }, [disabled, dispatch]);\n\n  const checkTab = () => {\n    if (/(reply)/.test(action)) {\n      return true;\n    }\n\n    const result = topicTypes.includes(publishTab);\n\n    if (!result) {\n      dispatch({\n        type: 'OPEN_NOTIFICATION',\n        data: {\n          message: '请选择一个主题分类',\n          status: 'error',\n        },\n      });\n    }\n\n    return result;\n  };\n\n  const handleSubmit = async () => {\n    if (!isOK || !checkTab()) {\n      return;\n    }\n\n    isCancel.current = false;\n    eDispatch({ type: 'REQUEST' });\n\n    const params = {\n      accesstoken,\n      tab: publishTab || undefined,\n      title,\n      content,\n      reply_id,\n      topic_id,\n    };\n\n    const { success, err_msg, data } = await post({ url, params });\n\n    if (isCancel.current) {\n      return;\n    }\n\n    eDispatch({\n      type: 'REQUEST_END',\n      data: success ? 'success' : 'error',\n    });\n\n    if (success) {\n      handleClose({\n        action,\n        request: { ...params },\n        response: { ...data },\n      });\n    }\n\n    const message = success\n      ? action === 'create'\n        ? '发布成功 ^_^'\n        : action === 'update'\n          ? '更新成功 ^_^'\n          : action === 'reply'\n            ? '回复成功 ^_^'\n            : '无效操作'\n      : {\n        status: 'error',\n        message: err_msg\n          ? err_msg\n          : action === 'create'\n            ? '发布失败 :('\n            : action === 'update'\n              ? '更新失败 :('\n              : action === 'reply'\n                ? '回复失败 :('\n                : '无效操作',\n      };\n\n    dispatch({ type: 'OPEN_NOTIFICATION', data: message });\n  };\n\n  React.useEffect(() => {\n    let tab = matchTab(location);\n    tab = topicTypes.includes(tab) ? tab : '';\n\n    eDispatch({ type: 'SET_PUBLISH_TAB', data: tab });\n  }, [location]);\n\n  React.useEffect(() => {\n    return () => open && handleClose();\n  }, [location, open, handleClose]);\n\n  React.useEffect(() => {\n    if (!editor.open) {\n      return;\n    }\n\n    eDispatch({\n      type: 'INIT',\n      data: {\n        ...(editor.tab ? { publishTab: editor.tab } : {}),\n        title: editor.title || '',\n        content: editor.content || '',\n      },\n    });\n  }, [editor]);\n\n  React.useEffect(() => {\n    if (!editor.open) {\n      return;\n    }\n\n    const checkTitle = () => {\n      return (\n        /(reply)/.test(editor.action)\n          ? true\n          : typeof title === 'string'\n            ? title.length >= validation.title.min && title.length <= validation.title.max\n            : false\n      );\n    };\n\n    const checkContent = () => {\n      return (\n        typeof content === 'string'\n          ? content.length >= validation.content.min\n          : false\n      );\n    };\n\n    const result = checkTitle() && checkContent();\n    eDispatch({ type: 'IS_OK', data: result });\n\n    const change = title !== editor.title || content !== editor.content;\n    eDispatch({ type: 'IS_DIFF', data: change });\n  }, [title, content, validation, editor]);\n\n  return (isAuthed &&\n    <React.Fragment>\n      <Dialog\n        className={classes.editor}\n        PaperProps={{id: 'editor'}}\n        open={open}\n        onClose={handleClose}\n        TransitionComponent={Transition}\n        maxWidth=\"sm\"\n        fullWidth\n        fullScreen={!isWidthUp('sm', width) || fullScreen}\n        keepMounted={!isWidthUp('sm', width)}\n        onEntered={handleFocus}\n      >\n        <EditorHeader\n          publishTab={publishTab}\n          onPublishTab={handlePublishTab}\n          onPreview={handleOpenPreview}\n          onFullScreen={handleFullScreen}\n          fullScreen={fullScreen}\n          disabled={disabled}\n        />\n        {['create', 'update'].includes(action) &&\n          <TextField\n            className={classes.title}\n            margin=\"normal\"\n            multiline\n            rows=\"1\"\n            rowsMax=\"3\"\n            fullWidth\n            placeholder=\"标题...\"\n            inputRef={titleRef}\n            value={title}\n            disabled={disabled}\n            onChange={handleChange('title')}\n          />\n        }\n        <DialogContent className={clsx('flex', classes.content)}>\n          <MarkdownEditor\n            disabled={disabled}\n            content={content}\n            inputRef={contentRef}\n            onUpdateContent={handleChange('content')}\n          />\n        </DialogContent>\n        <DialogActions className={classes.actions}>\n          <Button\n            className={clsx(classes.button, classes.cancel)}\n            onClick={handleClose}\n            disabled={disabled}\n            color=\"default\"\n            size=\"large\"\n          >\n            取消\n          </Button>\n          <Button\n            className={clsx(classes.button, classes.doit)}\n            variant=\"contained\"\n            onClick={handleSubmit}\n            disabled={!isOK || disabled}\n            color=\"primary\"\n            size=\"large\"\n          >\n            {action === 'create' ? (\n              '发布'\n            ) : action === 'update' ? (\n              '更新'\n            ) : (\n              '回复'\n            )}\n          </Button>\n        </DialogActions>\n      </Dialog>\n\n      <Preview\n        open={preview}\n        content={content}\n        onClose={handleClosePreview}\n      />\n    </React.Fragment>\n  );\n};\n\nEditor.propTypes = {\n  width: PropTypes.string.isRequired,\n};\n\nexport default withWidth()(Editor);\n","import React from 'react';\n\nconst useLoadmore = (options = {}) => {\n  const [loadmore, setLoadmore] = React.useState(false);\n\n  React.useEffect(() => {\n    const { threshold = 20 } = options;\n\n    const handleScroll = () => {\n      const documentHeight = document.documentElement.offsetHeight || document.body.offsetHeight;\n      const scrollHeight = document.documentElement.scrollTop || document.body.scrollTop;\n      const windowHeight = window.innerHeight;\n\n      if (documentHeight > windowHeight && documentHeight - (windowHeight + scrollHeight) <= threshold) {\n        setLoadmore(true);\n      } else {\n        setLoadmore(false);\n      }\n    };\n\n    document.addEventListener('scroll', handleScroll);\n\n    return () => document.removeEventListener('scroll', handleScroll);\n  }, [options]);\n\n  return loadmore;\n};\n\nexport default useLoadmore;\n","import React from 'react';\nimport { useSelector } from 'react-redux';\nimport { useLocation } from 'react-router-dom';\nimport {\n  matchTab,\n  getNewDataCreate,\n} from '../../common';\nimport { get as getData } from '../../fetch';\n\nimport { AppWrapper } from '../../Layout';\nimport TopiCards from '../../Components/TopiCards';\nimport Progress from '../../Components/Progress';\nimport ActionDial from '../../Components/ActionDial';\nimport Notification from '../../Components/Notification';\nimport Editor from '../../Components/Editor';\nimport useLoadmore from '../../Components/useLoadmore';\n\nconst Home = () => {\n  const isFetching = React.useRef(false);\n  const isFetched = React.useRef(false);\n  const isCancel = React.useRef();\n  const page = React.useRef(1);\n  const { pathname, search } = useLocation();\n\n  const [tab, setTab] = React.useState(null);\n  const [topics, setTopics] = React.useState([]);\n  const [status, setStatus] = React.useState('idle');\n  const loadmore = useLoadmore();\n\n  const fetchTopics = React.useCallback(async options => {\n    isFetching.current = true;\n    setStatus('loading');\n\n    const params = {\n      url: '/topics',\n      params: {\n        tab: options.tab,\n        page: page.current,\n        limit: 20,\n        // limit: isFetched.current ? 1 : 20,\n        mdrender: true,\n      },\n    };\n\n    const { success, data } = await getData(params);\n\n    if (isCancel.current) {\n      return;\n    }\n\n    if (success) {\n      setTopics(prevState => (isFetched.current ? [ ...prevState, data ] : [data]));\n      setStatus('success');\n      isFetched.current = true;\n      page.current += 1;\n    } else {\n      setStatus('error');\n    }\n\n    isFetching.current = false;\n  }, []);\n\n  React.useEffect(() => {\n    isFetching.current = false;\n    isFetched.current = false;\n    page.current = 1;\n\n    setTopics([]);\n    setTab(matchTab({pathname, search}));\n  }, [pathname, search]);\n\n  React.useEffect(() => {\n    if (tab === null || isFetching.current || (isFetched.current && !loadmore)) {\n      return;\n    }\n\n    isCancel.current = false;\n\n    fetchTopics({ tab });\n\n    return () => {\n      isFetching.current = false;\n      isCancel.current = true;\n    };\n  }, [tab, loadmore, fetchTopics]);\n\n  const editorData = useSelector(state => state.editor);\n\n  React.useEffect(() => {\n    const newDataCreate = getNewDataCreate(editorData);\n    newDataCreate && setTopics(prevState => ([ newDataCreate, ...prevState ]));\n  }, [editorData]);\n\n  return (\n    <AppWrapper title=\"RCNode\">\n      <div id=\"container\">\n        <div className=\"wrapper\">\n          <div className=\"topic-list-container\">\n            {topics.map((items, index) => (\n              <TopiCards key={index} items={items} />\n            ))}\n          </div>\n        </div>\n\n        <div className=\"status wrapper\">\n          <Progress status={status} />\n        </div>\n      </div>\n\n      <ActionDial single />\n      <Editor />\n      <Notification />\n    </AppWrapper>\n  );\n};\n\nexport default Home;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { useLocation, useParams, Link } from 'react-router-dom';\n\nimport { post } from '../../fetch';\n\nimport { makeStyles } from '@material-ui/core/styles';\nimport withWidth, { isWidthDown } from '@material-ui/core/withWidth';\n\nimport Grid from '@material-ui/core/Grid';\nimport Avatar from '@material-ui/core/Avatar';\nimport IconButton from '@material-ui/core/IconButton';\n\nimport Popover from '@material-ui/core/Popover';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\n\nimport ThumbUpIcon from '@material-ui/icons/ThumbUpAlt';\nimport ThumbUpCancelIcon from '@material-ui/icons/ThumbUpAltOutlined';\nimport MoreVertIcon from '@material-ui/icons/MoreVert';\nimport ReplyIcon from '@material-ui/icons/Reply';\nimport ShareIcon from '@material-ui/icons/Share';\n\nimport { MarkdownRender } from '../../Components/Markdown';\nimport Moment from '../../Components/Moment';\nimport { scroller } from 'react-scroll';\n\nconst useStyles = makeStyles(theme => ({\n  icon: {\n    minWidth: 'auto',\n  },\n}));\n\nconst TopicReply = (props) => {\n  const { topicAuthor, width } = props;\n  const { topic_id } = useParams();\n  const { hash } = useLocation();\n  const classes = useStyles();\n  const isCancel = React.useRef();\n  const anchorEl = React.useRef(null);\n  const [moreOpen, setMoreOpen] = React.useState(false);\n  const [sharePrefixURL, setSharePrefixURL] = React.useState('');\n\n  const {\n    isAuthed,\n    accesstoken,\n    uname: signedUname,\n  } = useSelector(state => state.auth);\n  const dispatch = useDispatch();\n\n  const [upData, setUpData] = React.useState({\n    ups: props.item.ups.length,\n    isUped: props.item.is_uped,\n  });\n\n  const {\n    author: {\n      loginname: uname,\n      avatar_url: avatar,\n    },\n    id,\n    create_at: createAt,\n    content,\n  } = props.item;\n\n  const handleUp = async () => {\n    if (!isAuthed) {\n      dispatch({ type: 'OPEN_NOTIFICATION', data: '登录后才能 👍 哟~' });\n      return;\n    }\n\n    if (uname === signedUname) {\n      dispatch({ type: 'OPEN_NOTIFICATION', data: '不能 👍 自己的哟~' });\n      return;\n    }\n\n    isCancel.current = false;\n\n    const params = {\n      url: `/reply/${id}/ups`,\n      params: { accesstoken },\n    };\n\n    const { success, err_msg } = await post(params);\n\n    if (isCancel.current) {\n      return;\n    }\n\n    if (success) {\n      setUpData(prevState => {\n        const { ups, isUped } = prevState;\n        return {\n          ups: isUped ? ups - 1 : ups + 1,\n          isUped: !isUped,\n        };\n      });\n    } else if (err_msg) {\n      dispatch({\n        type: 'OPEN_NOTIFICATION',\n        data: {\n          status: 'error',\n          message: err_msg,\n        },\n      });\n    }\n  };\n\n  const handleShare = () => {\n    handleCloseMore();\n    dispatch({\n      type: 'OPEN_SHARE',\n      data: `${sharePrefixURL}#${id}`,\n    });\n  };\n\n  const handleCloseMore = () => {\n    setMoreOpen(false);\n  };\n\n  const handleOpenMore = () => {\n    setMoreOpen(true);\n  };\n\n  const handleReply = () => {\n    handleCloseMore();\n\n    const config = {\n      action: 'reply',\n      url: `/topic/${topic_id}/replies`,\n      reply_id: id,\n      content: `@${uname} `,\n    };\n\n    dispatch({ type: 'OPEN_EDITOR', data: config });\n  };\n\n  const timer = React.useRef();\n\n  React.useEffect(() => {\n    if (hash !== `#${id}`) {\n      return;\n    }\n\n    clearTimeout(timer.current);\n\n    const appHeaderHight = isWidthDown('xs', width) ? 56 : 64;\n    const replieSpacings = 32;\n    let threshold = 10;\n\n    if (isWidthDown('xs', width)) {\n      threshold += replieSpacings / 2;\n    }\n\n    timer.current = setTimeout(() => {\n      scroller.scrollTo(hash, {\n        duration: 500,\n        smooth: 'easeInOutQuart',\n        /**\n         * appHeaderHight => app header height\n         * replieSpacings => spacings between replies\n         * threshold => the highlight reply top offset\n         */\n        offset: -(appHeaderHight + replieSpacings / 2 + threshold),\n      });\n    }, 0);\n\n    return () => clearTimeout(timer.current);\n  }, [hash, id, width]);\n\n  React.useEffect(() => {\n    const { origin, pathname } = window.location;\n    setSharePrefixURL(`${origin}${pathname}`);\n\n    return () => isCancel.current = true;\n  }, []);\n\n  return (\n    <div id={`#${id}`} className={clsx('topic-reply', {\n      'hilite': hash === `#${id}`,\n      'owned': uname === topicAuthor,\n    })}>\n      <div className=\"reply-content\">\n        <Grid container wrap=\"nowrap\" className={clsx('reply-header', classes.header)}>\n          <Avatar aria-label=\"Recipe\" className=\"reply-avatar\">\n            <Link to={uname ? `/user/${uname}` : '/'}>\n              {avatar &&\n                <img\n                  src={avatar}\n                  alt={uname || '用户已注销'}\n                />\n              }\n            </Link>\n          </Avatar>\n\n          <Grid container item zeroMinWidth wrap=\"nowrap\" className=\"reply-attrs\">\n            <Grid container wrap=\"nowrap\" className=\"group\">\n              <Grid container item zeroMinWidth wrap=\"nowrap\" className=\"uname-text\">\n                <Grid item zeroMinWidth>\n                  <Link\n                    className=\"uname\"\n                    to={uname ? `/user/${uname}` : '/'}\n                  >\n                    {uname ? uname : '用户已注销'}\n                  </Link>\n                </Grid>\n                {uname === topicAuthor &&\n                  <Grid item className=\"text\">\n                    [作者]\n                  </Grid>\n                }\n              </Grid>\n              <Grid item className=\"time\">\n                <Moment fromNow>{createAt}</Moment>\n              </Grid>\n            </Grid>\n          </Grid>\n\n          <Grid item className=\"reply-actions\">\n            <IconButton\n              className=\"action up\"\n              onClick={handleUp}\n            >\n              {upData.isUped ? (\n                <ThumbUpIcon />\n              ) : (\n                <ThumbUpCancelIcon />\n              )}\n            </IconButton>\n            {Boolean(upData.ups) &&\n              <span className=\"num\">{upData.ups}</span>\n            }\n            <IconButton\n              className=\"action more\"\n              buttonRef={node => {\n                anchorEl.current = node;\n              }}\n              variant=\"contained\"\n              onClick={handleOpenMore}\n            >\n              <MoreVertIcon />\n            </IconButton>\n            <Popover\n              open={moreOpen}\n              anchorEl={anchorEl.current}\n              anchorReference=\"anchorEl\"\n              anchorPosition={{ top: 30, left: 30 }}\n              onClose={handleCloseMore}\n              anchorOrigin={{\n                vertical: 'top',\n                horizontal: 'right',\n              }}\n              transformOrigin={{\n                vertical: 'top',\n                horizontal: 'right',\n              }}\n            >\n              <List>\n                <ListItem\n                  className=\"action post\"\n                  onClick={handleShare}\n                  button\n                >\n                  <ListItemIcon className={classes.icon}>\n                    <ShareIcon />\n                  </ListItemIcon>\n                </ListItem>\n                {isAuthed &&\n                  <ListItem\n                    className=\"action reply\"\n                    onClick={handleReply}\n                    button\n                  >\n                    <ListItemIcon className={classes.icon}>\n                      <ReplyIcon />\n                    </ListItemIcon>\n                  </ListItem>\n                }\n              </List>\n            </Popover>\n          </Grid>\n        </Grid>\n\n        <div className=\"markdown-container\">\n          <MarkdownRender markdownString={content} />\n        </div>\n      </div>\n    </div>\n  );\n};\n\nTopicReply.propTypes = {\n  topicAuthor: PropTypes.string.isRequired,\n  item: PropTypes.object.isRequired,\n  width: PropTypes.string.isRequired,\n};\n\nexport default withWidth()(TopicReply);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport { useSelector, useDispatch } from 'react-redux';\n\nimport { makeStyles } from '@material-ui/core/styles';\nimport withWidth, { isWidthDown } from '@material-ui/core/withWidth';\n\nimport Grid from '@material-ui/core/Grid';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport IconButton from '@material-ui/core/IconButton';\nimport Fade from '@material-ui/core/Fade';\nimport Button from '@material-ui/core/Button';\nimport CloseIcon from '@material-ui/icons/Close';\nimport ShareIcon from '@material-ui/icons/Share';\nimport ZoomInIcon from '@material-ui/icons/Add';\nimport ZoomOutIcon from '@material-ui/icons/Remove';\nimport ZoomResetIcon from '@material-ui/icons/Search';\n\nconst useStyles = makeStyles(theme => ({\n  fill: {\n    flex: 1,\n  },\n  backdrop: {\n    backgroundColor: theme.palette.type === 'light' ? 'rgba(255,255,255,.85)' : 'rgba(0,0,0,.92)',\n  },\n  actions: {\n    position: 'fixed',\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n    zIndex: 1,\n    top: 0,\n    left: 0,\n    right: 0,\n    height: 56,\n    padding: '0 18px',\n    backgroundColor: theme.palette.type === 'light' ? '#fff' : '#212121',\n    boxShadow: '0 0 1px rgba(0,0,0,.03), 0 0 2px rgba(0,0,0,.08)',\n    [theme.breakpoints.up('sm')]: {\n      height: 64,\n      padding: '0 24px',\n    },\n  },\n  container: {\n    display: 'flex',\n    margin: 0,\n    paddingTop: 56,\n    width: '100%',\n    height: '100%',\n    maxWidth: 'none',\n    maxHeight: 'none',\n    backgroundColor: 'transparent',\n    boxShadow: 'none',\n    userSelect: 'none',\n    outline: 'none',\n    borderRadius: 0,\n    [theme.breakpoints.up('sm')]: {\n      paddingTop: 64,\n    },\n  },\n  content: {\n    display: 'flex',\n    padding: 0,\n  },\n  wrap: {\n    position: 'relative',\n    display: 'flex',\n    flex: 1,\n    alignItems: 'center',\n    justifyContent: 'center',\n    overflow: 'hidden',\n    outline: 'none',\n  },\n  loading: {\n    position: 'absolute',\n    top: '50%',\n    left: '50%',\n    marginTop: -20,\n    marginLeft: -20,\n  },\n  box: {\n    position: 'relative',\n    opacity: 0,\n    transform: 'scale(.9)',\n    transition: 'transform .15s cubic-bezier(0,0,.2,1), opacity 85ms linear 65ms',\n    '&.ready': {\n      opacity: 1,\n      transform: 'none',\n      transitionDuration: '.18s, 85ms',\n      transitionDelay: '0s, 0s',\n    },\n  },\n  target: {\n    display: 'block',\n    position: 'relative',\n    transition: 'transform .3s cubic-bezier(.4,0,.2,1)',\n    boxShadow: ' 0 2px 6px rgba(0,0,0,.16), 0 1px 4px rgba(0,0,0,.03)',\n    cursor: 'default',\n    '&.drag-enabled': {\n      cursor: 'grab',\n      '&.drag-active': {\n        cursor: 'grabbing',\n        transition: 'none',\n      },\n    },\n  },\n  zoom: {\n    position: 'fixed',\n    display: 'flex',\n    flexWrap: 'nowrap',\n    padding: '0 8px',\n    left: 30,\n    bottom: 32,\n    borderRadius: 22,\n    overflow: 'hidden',\n    backgroundColor: theme.palette.type === 'light' ? '#fff' : '#212121',\n    boxShadow: '0 0 2px rgba(0,0,0,.1), 0 2px 5px rgba(0,0,0,.16)',\n    zIndex: 1,\n  },\n  btn: {\n    padding: 10,\n    minWidth: 44,\n    borderRadius: 0,\n  },\n}));\n\nconst defaultState = {\n  /**\n   * position\n   * ------------------\n   *  x, y => transform\n   * iX,iY => initial transform pos for drag beginning\n   * sX,sY => drag start\n   * mX,mY => drag move\n   */\n  x: 0,\n  y: 0,\n  iX: 0,\n  iY: 0,\n  sX: 0,\n  sY: 0,\n  mX: 0,\n  mY: 0,\n  /**\n   * scale\n   * ------------------------\n   * scale => transform scale\n   */\n  scale: 1,\n  scaleLevel: 1,\n  scaleLevels: [ .68, 1, 1.38, 2, 3.21, 4.96 ],\n  /**\n   * spacings\n   * --------\n   * spacings => initial, between zoomRef and zoomWrapRef\n   * dragSpacings => drag, between zoomRef and zoomWrapRef\n   */\n  spacings: 16,\n  dragSpacings: 50,\n  disabledUp: false,\n  disabledDown: false,\n  disabledReset: true,\n  dragEnabled: false,\n  dragActive: false,\n  isTouch: undefined,\n  ready: false,\n};\n\nconst ImageZoom = (props) => {\n  const { width } = props;\n  const { open, src } = useSelector(({ zoom }) => zoom);\n  const [state, setState] = React.useState(defaultState);\n  const dragIsActive = React.useRef();\n  const zoomWrapRef = React.useRef();\n  const zoomBoxRef = React.useRef();\n  const zoomRef = React.useRef();\n  const dispatch = useDispatch();\n  const classes = useStyles();\n\n  const handleClick = event => {\n    const { target } = event;\n    if (\n      !state.ready\n      || target === zoomWrapRef.current\n      || target === zoomBoxRef.current\n    ) {\n      handleClose();\n    }\n  };\n\n  const handleShare = () => {\n    const url = zoomRef.current.src;\n    dispatch({ type: 'OPEN_SHARE', data: url });\n  };\n\n  const handleClose = React.useCallback(() => {\n    dispatch({ type: 'CLOSE_ZOOM' });\n  }, [dispatch]);\n\n  React.useEffect(() => {\n    return () => open && handleClose();\n  }, [open, handleClose]);\n\n  const setViewport = () => {\n    const viewport = document.head.querySelector('meta[name=\"viewport\"]');\n    const content = viewport.content;\n    const scalable = 'user-scalable=no';\n\n    viewport.content = `${content}, ${scalable}`;\n\n    setState(prevState => ({\n      ...prevState,\n      viewport,\n      content,\n    }));\n  };\n\n  const resetViewport = () => {\n    const { viewport, content } = state;\n    viewport && (viewport.content = content);\n  };\n\n  const zoomExit = () => {\n    resetViewport();\n    setState(defaultState);\n  };\n\n  const zoomInit = () => {\n    if (zoomRef.current.complete) {\n      initState();\n    } else {\n      zoomRef.current.addEventListener('load', initState);\n    }\n  };\n\n  const initState = () => {\n    const { spacings } = defaultState;\n    const isTouch = 'ontouchstart' in window;\n\n    const { naturalWidth, naturalHeight } = zoomRef.current;\n\n    const wrapWidth = zoomWrapRef.current.clientWidth;\n    const wrapHeight = zoomWrapRef.current.clientHeight;\n\n    const maxWidth = wrapWidth - 2 * spacings;\n    const maxHeight = wrapHeight - 2 * spacings;\n\n    let initialHeight = naturalHeight;\n\n    if (naturalWidth > maxWidth) {\n      initialHeight *= maxWidth / naturalWidth;\n    }\n\n    if (initialHeight > maxHeight) {\n      initialHeight = maxHeight;\n    }\n\n    const initialWidth = naturalWidth * initialHeight / naturalHeight;\n\n    setState({\n      ...defaultState,\n      ready: true,\n      isTouch,\n      wrapWidth,\n      wrapHeight,\n      maxWidth,\n      maxHeight,\n      naturalWidth,\n      naturalHeight,\n      initialWidth,\n      initialHeight,\n    });\n  };\n\n  // bind drag events, set viewport\n  React.useEffect(() => {\n    const isTouch = state.isTouch;\n\n    if (typeof isTouch !== 'boolean') {\n      return;\n    }\n\n    const getDragThreshold = options => {\n      const {\n        scale,\n        wrapWidth,\n        wrapHeight,\n        maxWidth,\n        maxHeight,\n        initialWidth,\n        initialHeight,\n      } = options;\n      const { dragSpacings } = defaultState;\n\n      const currentWidth = initialWidth * scale;\n      const currentHeight = initialHeight * scale;\n\n      const tX = currentWidth > maxWidth\n                 ? Math.max(0, (currentWidth - wrapWidth) / 2 + dragSpacings)\n                 : 0;\n      const tY = currentHeight > maxHeight\n                 ? Math.max(0, (currentHeight - wrapHeight) / 2 + dragSpacings)\n                 : 0;\n\n      return { tX, tY };\n    };\n\n    const getTransformPos = options => {\n      const { iX, iY, sX, sY, mX, mY } = options;\n      const { tX, tY } = getDragThreshold(options);\n\n      let x, y;\n\n      x = iX + mX - sX;\n      y = iY + mY - sY;\n\n      x = Math.min(tX, Math.max(-tX, x));\n      y = Math.min(tY, Math.max(-tY, y));\n\n      return { x, y };\n    };\n\n    const getEventPos = event => {\n      const x = isTouch ? event.touches[0].pageX : event.clientX;\n      const y = isTouch ? event.touches[0].pageY : event.clientY;\n\n      return { x, y };\n    };\n\n    const dragStart = event => {\n      event.preventDefault();\n\n      if (!state.dragEnabled) { return; }\n\n      const { x, y } = getEventPos(event);\n\n      setState(prevState => ({\n        ...prevState,\n        sX: x,\n        sY: y,\n        dragActive: true,\n      }));\n    };\n\n    const dragMove = event => {\n      event.preventDefault();\n\n      if (!dragIsActive.current) { return; }\n\n      const { x: mX, y: mY } = getEventPos(event);\n\n      setState(prevState => {\n        const { x, y } = getTransformPos({ ...prevState, mX, mY });\n        return { ...prevState, x, y, mX, mY };\n      });\n    };\n\n    const dragEnd = event => {\n      event.preventDefault();\n\n      if (!dragIsActive.current) { return; }\n\n      setState(prevState => ({\n        ...prevState,\n        iX: prevState.x,\n        iY: prevState.y,\n        dragActive: false,\n      }));\n    };\n\n    const bindEvents = () => {\n      const eStart = isTouch ? 'touchstart' : 'mousedown';\n      const eMove = isTouch ? 'touchmove' : 'mousemove';\n      const eEnd = isTouch ? 'touchend' : 'mouseup';\n      const eCancel = isTouch ? 'touchcancel' : 'mouseleave';\n\n      zoomRef.current.addEventListener(eStart, dragStart);\n      zoomRef.current.addEventListener(eMove, dragMove);\n      zoomRef.current.addEventListener(eEnd, dragEnd);\n      zoomRef.current.addEventListener(eCancel, dragEnd);\n    };\n\n    bindEvents();\n    setViewport();\n  }, [state.isTouch, state.dragEnabled]);\n\n  React.useEffect(() => {\n    dragIsActive.current = state.dragActive;\n  }, [state.dragActive]);\n\n  const handleZoom = action => event => {\n    let { scaleLevel, scaleLevels } = state;\n\n    const baseScaleLevel = 1;\n    const minScaleLevel = 0;\n    const maxScaleLevel = scaleLevels.length - 1;\n\n    switch (action) {\n      case 'up':\n        scaleLevel++;\n        break;\n      case 'down':\n        scaleLevel--;\n        break;\n      case 'reset':\n        scaleLevel = baseScaleLevel;\n        break;\n      default:\n        return;\n    }\n\n    scaleLevel = Math.min(\n      Math.max(scaleLevel, minScaleLevel),\n      maxScaleLevel\n    );\n\n    const scale = scaleLevels[scaleLevel];\n    const disabledUp = scaleLevel === maxScaleLevel;\n    const disabledDown = scaleLevel === minScaleLevel;\n    const disabledReset = scaleLevel === baseScaleLevel;\n\n    setState(prevState => ({\n      ...prevState,\n      x: 0,\n      y: 0,\n      iX: 0,\n      iY: 0,\n      scale,\n      scaleLevel,\n      disabledUp,\n      disabledDown,\n      disabledReset,\n    }));\n  };\n\n  // update drag status\n  React.useEffect(() => {\n    if (!state.ready) {\n      return;\n    }\n\n    const scale = state.scale;\n    const maxWidth = state.maxWidth;\n    const maxHeight = state.maxHeight;\n    const initialWidth = state.initialWidth;\n    const initialHeight = state.initialHeight;\n\n    const currentWidth = initialWidth * scale;\n    const currentHeight = initialHeight * scale;\n\n    const dragEnabled = currentWidth > maxWidth || currentHeight > maxHeight;\n\n    setState(prevState => ({\n      ...prevState,\n      dragEnabled,\n    }));\n  }, [\n    // observe\n    state.scale,\n    // other deps\n    state.ready,\n    state.maxWidth, state.maxHeight, state.initialWidth, state.initialHeight,\n  ]);\n\n  // update transform style\n  React.useEffect(() => {\n    if (!Boolean(zoomRef.current)) {\n      return;\n    }\n\n    const transform = `translate(${state.x}px, ${state.y}px) scale(${state.scale})`;\n    zoomRef.current.style.transform = transform;\n  }, [state.x, state.y, state.scale]);\n\n  return (\n    <Dialog\n      open={open}\n      fullWidth\n      maxWidth={false}\n      onClose={handleClose}\n      onEnter={zoomInit}\n      onExited={zoomExit}\n      BackdropProps={{ className: classes.backdrop }}\n      PaperProps={{ className: classes.container }}\n      keepMounted={isWidthDown('xs', width)}\n    >\n      <Grid className={classes.actions}>\n        <Grid className={classes.fill}>\n          <IconButton\n            className={classes.close}\n            onClick={handleClose}\n          >\n            <CloseIcon />\n          </IconButton>\n        </Grid>\n        <IconButton\n          className={classes.share}\n          onClick={handleShare}\n          disabled={!state.ready}\n        >\n          <ShareIcon />\n        </IconButton>\n      </Grid>\n      <DialogContent className={classes.content}>\n        <div\n          ref={zoomWrapRef}\n          className={classes.wrap}\n          onClick={handleClick}\n          onKeyUp={() => {}}\n          role=\"grid\"\n          tabIndex=\"-1\"\n        >\n          <Fade\n            in={!state.ready}\n            className={classes.loading}\n          >\n            <CircularProgress />\n          </Fade>\n          <div\n            ref={zoomBoxRef}\n            className={clsx(classes.box, {\n              'ready': state.ready,\n            })}\n          >\n            <img\n              ref={zoomRef}\n              className={clsx(classes.target, {\n                'drag-enabled': state.dragEnabled,\n                'drag-active': state.dragActive,\n              })}\n              style={{ height: state.initialHeight || 'auto' }}\n              src={src}\n              alt=\"zoom\"\n            />\n          </div>\n        </div>\n        <Grid className={classes.zoom}>\n          <Button\n            className={classes.btn}\n            disabled={state.disabledDown || !state.ready}\n            onClick={handleZoom('down')}\n          >\n            <ZoomOutIcon />\n          </Button>\n          <Button\n            className={classes.btn}\n            disabled={state.disabledReset || !state.ready}\n            onClick={handleZoom('reset')}\n          >\n            <ZoomResetIcon />\n          </Button>\n          <Button\n            className={classes.btn}\n            disabled={state.disabledUp || !state.ready}\n            onClick={handleZoom('up')}\n          >\n            <ZoomInIcon />\n          </Button>\n        </Grid>\n      </DialogContent>\n    </Dialog>\n  );\n};\n\nImageZoom.propTypes = {\n  width: PropTypes.string.isRequired,\n};\n\nexport default withWidth()(ImageZoom);\n","import React from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\n\nimport { makeStyles } from '@material-ui/core/styles';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport TextField from '@material-ui/core/TextField';\n\nimport copy from 'clipboard-copy';\n\nconst useStyles = makeStyles(theme => ({\n  paper: {\n    margin: 10,\n    width: 'calc(100% - 20px)',\n    maxWidth: process.env.NODE_ENV === 'production' ? 615 : 540,\n  },\n  content: {\n    padding: 24,\n    display: 'flex',\n    flexWrap: 'nowrap',\n    alignItems: 'flex-end',\n  },\n  button: {\n    marginLeft: 16,\n    padding: '4px 10px',\n  },\n}));\n\nconst ShareDialog = () => {\n  const classes = useStyles();\n  const dispatch = useDispatch();\n  let { url, open, post } = useSelector(state => state.share);\n\n  const handleCopy = async () => {\n    try {\n      await copy(url);\n    } finally {\n      handleClose();\n    }\n  };\n\n  const getLabel = () => {\n    post = Boolean(post)\n            ? ` - #${post}`\n            : '';\n\n    return `分享链接${post}：`;\n  };\n\n  const handleClose = React.useCallback(() => {\n    dispatch({ type: 'CLOSE_SHARE' });\n  }, [dispatch]);\n\n  const handleExit = React.useCallback(() => {\n    open && handleClose();\n  }, [open, handleClose]);\n\n  React.useEffect(() => {\n    return () => handleExit();\n  }, [handleExit]);\n\n  return (\n    <Dialog\n      open={open}\n      onClose={handleClose}\n      classes={{\n        paper: classes.paper,\n      }}\n    >\n      <DialogContent className={classes.content}>\n        <TextField\n          inputProps={{ readOnly: true }}\n          label={`${getLabel()}`}\n          value={url}\n          fullWidth\n        />\n        <Button\n          className={classes.button}\n          onClick={handleCopy}\n          variant=\"outlined\"\n          size=\"small\"\n          autoFocus\n        >\n          复制\n        </Button>\n      </DialogContent>\n    </Dialog>\n  );\n};\n\nexport default ShareDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport { useSelector } from 'react-redux';\nimport { useParams, Link } from 'react-router-dom';\nimport {\n  navTabsObject as navTabs,\n  getNewDataUpdate,\n  getNewDataReply,\n} from '../../common';\nimport { get as getData } from '../../fetch';\n\nimport { useTheme } from '@material-ui/core/styles';\nimport withWidth, { isWidthDown } from '@material-ui/core/withWidth';\n\nimport Fade from '@material-ui/core/Fade';\nimport Typography from '@material-ui/core/Typography';\nimport CreateIcon from '@material-ui/icons/Create';\nimport ViewIcon from '@material-ui/icons/LocalLibrary';\nimport TagIcon from '@material-ui/icons/LocalOffer';\n\nimport { AppWrapper } from '../../Layout';\nimport TopicReply from './TopicReply';\nimport { MarkdownRender } from '../../Components/Markdown';\nimport ImageZoom from '../../Components/ImageZoom';\nimport Progress from '../../Components/Progress';\n\nimport Avatar from '../../Components/Avatar';\nimport Editor from '../../Components/Editor';\nimport ActionDial from '../../Components/ActionDial';\nimport ShareDialog from '../../Components/ShareDialog';\nimport Notification from '../../Components/Notification';\nimport Moment from '../../Components/Moment';\nimport './topic.styl';\n\nconst Topic = (props) => {\n  const theme = useTheme();\n  const { topic_id } = useParams();\n  const { accesstoken } = useSelector(state => state.auth);\n\n  const [status, setStatus] = React.useState('loading');\n  const [topic, setTopic] = React.useState({});\n  const [replies, setReplies] = React.useState([]);\n  const [dialTopic, setDialTopic] = React.useState(null);\n  const [message, setMessage] = React.useState(null);\n\n  const isCancel = React.useRef();\n  React.useEffect(() => {\n    isCancel.current = false;\n\n    (async () => {\n      const params = {\n        url: `/topic/${topic_id}`,\n        params: { mdrender: false, accesstoken },\n      };\n\n      const { success, data, err_msg } = await getData(params);\n\n      if (isCancel.current) {\n        return;\n      }\n\n      if (success) {\n        const { replies: reps, ...rest } = data;\n\n        setStatus('success');\n        setTopic({ ...rest });\n        setReplies([ ...reps ]);\n        setDialTopic({\n          uname: rest.author.loginname,\n          is_collect: rest.is_collect,\n          content: rest.content,\n          title: rest.title,\n          tab: rest.tab,\n          topic_id,\n        });\n      } else {\n        setStatus('error');\n        setMessage(err_msg);\n      }\n    })();\n\n    return () => isCancel.current = true;\n  }, [topic_id, accesstoken]);\n\n  const editorData = useSelector(state => state.editor);\n\n  React.useEffect(() => {\n    const newDataReply = getNewDataReply(editorData);\n\n    if (newDataReply) {\n      setReplies(prevState => ([\n        ...prevState,\n        newDataReply,\n      ]));\n    }\n\n    const newDataUpdate = getNewDataUpdate(editorData);\n\n    if (newDataUpdate) {\n      setTopic(prevState => ({\n        ...prevState,\n        ...newDataUpdate,\n      }));\n\n      setDialTopic(prevState => ({\n        ...prevState,\n        uname: newDataUpdate.author.loginname,\n        is_collect: newDataUpdate.is_collect,\n        content: newDataUpdate.content,\n        title: newDataUpdate.title,\n        tab: newDataUpdate.tab,\n      }));\n    }\n  }, [editorData]);\n\n  return (\n    <AppWrapper\n      title={topic.title}\n      bodyAttributes={{\n        class: clsx('topic-view', {\n          'error-tips': status === 'error',\n          'zero-spacings': isWidthDown('xs', props.width),\n        }),\n      }}\n    >\n      <div id=\"container\">\n        <Fade in={Boolean(message)}>\n          <div className=\"wrapper tips error\">\n            {message}\n          </div>\n        </Fade>\n\n        {Boolean(topic.title) &&\n          <div id=\"topic\" className={clsx('wrapper', {\n            'dark': theme.palette.type === 'dark',\n          })}>\n            <div className=\"topic-main\">\n              <Typography variant=\"h5\" className=\"title\">\n                {topic.title}\n              </Typography>\n              <div className=\"topic-attrs-wrap\">\n                <div className=\"topic-attrs\">\n                  <span className=\"attr-author\">\n                    <Avatar\n                      className=\"avatar\"\n                      image={topic.author.avatar_url}\n                      name={topic.author.loginname}\n                    />\n                    <Link to={`/user/${topic.author.loginname}`}>\n                      {topic.author.loginname}\n                    </Link>\n                  </span>\n                  <span className=\"attr-create\">\n                    <CreateIcon />\n                    <Moment fromNow>{topic.create_at}</Moment>\n                  </span>\n                  <span className=\"attr-visit\">\n                    <ViewIcon />\n                    <em>{topic.visit_count}</em>\n                    浏览\n                  </span>\n                  {topic.tab &&\n                    <span className=\"attr-tab\">\n                      <TagIcon />\n                      <span className={topic.tab}>\n                        {navTabs[topic.tab].name}\n                      </span>\n                    </span>\n                  }\n                </div>\n              </div>\n\n              <div className=\"markdown-container\">\n                <MarkdownRender markdownString={topic.content} />\n              </div>\n            </div>\n\n            {Boolean(replies.length) &&\n              <div className=\"topic-replies\">\n                {replies.map((item, index) => (\n                  <TopicReply\n                    topicAuthor={topic.author.loginname}\n                    item={item}\n                    key={item.id}\n                  />\n                ))}\n              </div>\n            }\n          </div>\n        }\n\n        <div className=\"status wrapper\">\n          <Progress className=\"mini\" status={status} />\n        </div>\n      </div>\n\n      <ActionDial topic={dialTopic} />\n      <Editor />\n      <ImageZoom />\n      <ShareDialog />\n      <Notification />\n    </AppWrapper>\n  );\n};\n\nTopic.propTypes = {\n  width: PropTypes.string.isRequired,\n};\n\nexport default withWidth()(Topic);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport { useParams } from 'react-router-dom';\nimport { getBingImage, get as getData } from '../../fetch';\n\nimport { makeStyles } from '@material-ui/core';\nimport withWidth, { isWidthUp } from '@material-ui/core/withWidth';\n\nimport SwipeableViews from 'react-swipeable-views';\nimport LinearProgress from '@material-ui/core/LinearProgress';\nimport Fade from '@material-ui/core/Fade';\nimport Tabs from '@material-ui/core/Tabs';\nimport Tab from '@material-ui/core/Tab';\nimport Hidden from '@material-ui/core/Hidden';\n\nimport Avatar from '@material-ui/core/Avatar';\nimport PersonIcon from '@material-ui/icons/Person';\nimport SchoolIcon from '@material-ui/icons/School';\nimport AccessTimeIcon from '@material-ui/icons/AccessTime';\n\nimport { AppWrapper } from '../../Layout';\nimport TopiCard from '../../Components/TopiCard';\nimport Progress from '../../Components/Progress';\nimport Moment from '../../Components/Moment';\nimport { GithubIcon } from '../../Components/Icons';\nimport './user.styl';\n\nconst useStyles = makeStyles(theme => ({\n  cover: {\n    backgroundColor: theme.palette.type === 'light' ? 'rgba(83,156,98,.8)' : 'rgba(69,97,74,.8)',\n  },\n  progress: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    right: 0,\n    height: 3,\n  },\n  colorPrimary: {\n    backgroundColor: theme.palette.type === 'light' ? 'rgba(165,211,247,.8)' : 'rgba(165,211,247,.8)',\n  },\n  barColorPrimary: {\n    backgroundColor: theme.palette.type === 'light' ? '#2698f3' : '#2698f3',\n  },\n  spacings: {\n    marginTop: 30,\n    [theme.breakpoints.down('xs')]: {\n      marginTop: 0,\n    },\n  },\n  tips: {\n    marginTop: 40,\n  },\n  tab: {\n    fontSize: 16,\n  },\n  selected: {\n    color: '#2ac2f9',\n  },\n  indicator: {\n    backgroundColor: '#2ac2f9',\n  },\n}));\n\nconst labelIndex = ['topics', 'replies', 'collections'];\nconst initialState = {\n  topics: {\n    name: '最近创建',\n    data: [],\n    show: true,\n  },\n  replies: {\n    name: '最近回复',\n    data: [],\n    show: false,\n  },\n  collections: {\n    name: '话题收藏',\n    data: [],\n    show: false,\n  },\n};\n\nconst User = (props) => {\n  const { uname } = useParams();\n  const isCancel = React.useRef();\n  const bingImgRef = React.useRef();\n  const [bingImage, setBingImage] = React.useState({ complete: false });\n  const [index, setIndex] = React.useState(0);\n  const [status, setStatus] = React.useState('loading');\n  const [message, setMessage] = React.useState(null);\n  const [profile, setProfile] = React.useState({ uname });\n\n  const [state, dispatch] = React.useReducer((prevState, { type, data }) => {\n    switch (type) {\n      case 'SET_TOPICS':\n        return {\n          ...prevState,\n          topics: {\n            ...prevState.topics,\n            ...data,\n          },\n        };\n      case 'SET_REPLIES':\n        return {\n          ...prevState,\n          replies: {\n            ...prevState.replies,\n            ...data,\n          },\n        };\n      case 'SET_COLLECTIONS':\n        return {\n          ...prevState,\n          collections: {\n            ...prevState.collections,\n            ...data,\n          },\n        };\n      case 'RESTORE':\n        return {\n          ...initialState,\n        };\n      default:\n        throw new Error(`Unrecognized type ${type}`);\n    }\n  }, initialState);\n\n  const handleChange = (event, idx) => {\n    setIndex(idx);\n\n    const type = `SET_${labelIndex[idx].toUpperCase()}`;\n    dispatch({ type, data: { show: true } });\n  };\n\n  const handleChangeIndex = idx => {\n    handleChange(null, idx);\n  };\n\n  React.useEffect(() => {\n    if (!Boolean(bingImgRef.current)) {\n      return;\n    }\n\n    const setBingImageLoadComplete = () => {\n      setBingImage(prevState => ({...prevState, complete: true}));\n    };\n\n    if (!!bingImgRef.current.complete) {\n      setBingImageLoadComplete();\n    } else {\n      bingImgRef.current.addEventListener('load', setBingImageLoadComplete);\n    }\n\n    return () => {\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n      bingImgRef.current.removeEventListener('load', setBingImageLoadComplete);\n    };\n  }, [bingImage.time]);\n\n\n  React.useEffect(() => {\n    isCancel.current = false;\n\n    setStatus('loading');\n    setProfile({ uname });\n    dispatch({ type: 'RESTORE' });\n    setIndex(0);\n\n    (async () => {\n      const params = {\n        url: `/user/${uname}`,\n        params: { mdrender: false },\n      };\n\n      const { success, data, err_msg } = await getData(params);\n\n      if (isCancel.current) {\n        return;\n      }\n\n      if (success) {\n        const { recent_topics, recent_replies, ...rest } = data;\n\n        setProfile({ ...rest });\n        dispatch({ type: 'SET_TOPICS', data: { data: recent_topics } });\n        dispatch({ type: 'SET_REPLIES', data: { data: recent_replies } });\n        setStatus('success');\n      } else {\n        setStatus('error');\n        setMessage(err_msg);\n      }\n    })();\n\n    (async () => {\n      const params = {\n        url: `/topic_collect/${uname}`,\n        params: { mdrender: false },\n      };\n\n      const { success, data } = await getData(params);\n\n      if (!isCancel.current && success) {\n        dispatch({ type: 'SET_COLLECTIONS', data: { data } });\n      }\n    })();\n\n    setBingImage(prevState => ({...prevState, complete: false}));\n\n    (async () => {\n      const data = await getBingImage();\n\n      if (!isCancel.current) {\n        setBingImage(prevState => ({ ...prevState, ...data }));\n      }\n    })();\n\n    return () => isCancel.current = true;\n  }, [uname]);\n\n  const { width } = props;\n  const classes = useStyles();\n  const swipeableViewsRef = React.useRef();\n\n  return (\n    <AppWrapper\n      title={uname}\n      bodyAttributes={{ class: 'user-view' }}\n    >\n      <div className={clsx('cover blur', classes.cover)}>\n        <div className={clsx('bing-image', {\n          'complete': bingImage.complete,\n        })}>\n          {bingImage.url &&\n            <img\n              ref={bingImgRef}\n              src={bingImage.url}\n              alt=\"background image\"\n              title={bingImage.copyright}\n              aria-hidden\n            />\n          }\n        </div>\n        <Fade in={!bingImage.complete}>\n          <LinearProgress\n            className={classes.progress}\n            classes={{\n              colorPrimary: classes.colorPrimary,\n              barColorPrimary: classes.barColorPrimary,\n            }}\n          />\n        </Fade>\n\n        {profile.loginname &&\n          <div className=\"user wrapper\">\n            <Avatar id=\"avatar\" aria-label=\"Recipe\">\n              <img src={profile.avatar_url} alt={profile.loginname} />\n            </Avatar>\n            <div className=\"items\">\n              <Hidden xsDown>\n                <div>\n                  <div className=\"item name\">\n                    <PersonIcon />\n                    {profile.loginname}\n                  </div>\n                  <div className=\"item create\">\n                    <AccessTimeIcon />\n                    <Moment format=\"YYYY-MM-DD HH:mm:ss\">\n                      {profile.create_at}\n                    </Moment>\n                  </div>\n                </div>\n                <div>\n                  {profile.githubUsername &&\n                    <div className=\"item github\">\n                      {GithubIcon}\n                      <a\n                        target=\"_blank\"\n                        href={`https://github.com/${profile.githubUsername}`}\n                      >\n                        {profile.githubUsername}\n                      </a>\n                    </div>\n                  }\n                  <div className=\"item score\">\n                    <SchoolIcon />\n                    {profile.score}\n                  </div>\n                </div>\n              </Hidden>\n              <Hidden smUp>\n                <div>\n                  {profile.githubUsername &&\n                    <div className=\"item github\">\n                      {GithubIcon}\n                      <a\n                        target=\"_blank\"\n                        href={`https://github.com/${profile.githubUsername}`}\n                      >\n                        {profile.githubUsername}\n                      </a>\n                    </div>\n                  }\n                </div>\n                <div>\n                  <div className=\"item create\">\n                    <AccessTimeIcon />\n                    <Moment format=\"YYYY-MM-DD HH:mm:ss\">\n                      {profile.create_at}\n                    </Moment>\n                  </div>\n                </div>\n              </Hidden>\n            </div>\n          </div>\n        }\n      </div>\n\n      <div className={clsx('tab-list', classes.spacings)}>\n        <div className=\"wrapper\">\n          <Tabs\n            classes={{\n              indicator: classes.indicator,\n            }}\n            value={index}\n            onChange={handleChange}\n            centered\n            {\n              ...!isWidthUp('md', width)\n              ? { variant: 'fullWidth' }\n              : {}\n            }\n          >\n            {Object.keys(state).map(key => (\n              <Tab\n                classes={{\n                  root: classes.tab,\n                  selected: classes.selected,\n                }}\n                label={state[key].name}\n                key={state[key].name}\n                disabled={status !== 'success'}\n              />\n            ))}\n          </Tabs>\n        </div>\n      </div>\n\n      <Fade in={Boolean(message)}>\n        <div className={clsx('tips error', {\n          [classes.tips]: Boolean(message),\n        })}>\n          {message}\n        </div>\n      </Fade>\n\n      <div className=\"recent wrapper\">\n        <SwipeableViews\n          index={index}\n          onChangeIndex={handleChangeIndex}\n          enableMouseEvents\n          animateHeight\n          slideStyle={{ overflow: 'hidden' }}\n          ref={swipeableViewsRef}\n        >\n          {Object.keys(state).map(key => (\n            <div className={`r-${key}`} key={key}>\n              <SwipeableViewsTab\n                data={state[key].data}\n                show={state[key].show}\n                ref={swipeableViewsRef}\n              />\n            </div>\n          ))}\n        </SwipeableViews>\n      </div>\n\n      <div className=\"status wrapper\">\n        <Progress className=\"mini\" status={status} />\n      </div>\n    </AppWrapper>\n  );\n};\n\nUser.propTypes = {\n  width: PropTypes.string.isRequired,\n};\n\nexport default withWidth()(User);\n\nconst SwipeableViewsTab = React.forwardRef((props, ref) => {\n  const { data, show } = props;\n  const timer = React.useRef();\n\n  React.useEffect(() => {\n    if (!show) {\n      return;\n    }\n\n    clearTimeout(timer.current);\n\n    timer.current = setTimeout(() => {\n      ref\n        .current\n        .getChildContext()\n        .swipeableViews\n        .slideUpdateHeight();\n    }, 0 * 1e3);\n\n    return () => clearTimeout(timer.current);\n  }, [ref, show, data]);\n\n  return (show && data.map(item => (\n    <TopiCard className=\"profile\" item={item} simple key={item.id} />\n  )));\n});\n\nSwipeableViewsTab.propTypes = {\n  data: PropTypes.array.isRequired,\n  show: PropTypes.bool.isRequired,\n};\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React from \"react\";\nexport default (({\n  styles = {},\n  ...props\n}) => React.createElement(\"svg\", _extends({\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 1440 810\",\n  preserveAspectRatio: \"xMinYMin slice\",\n  \"aria-hidden\": \"true\"\n}, props), React.createElement(\"path\", {\n  id: \"cell-4\",\n  fill: \"#efefee\",\n  d: \"M592.66 0c-15 64.092-30.7 125.285-46.598 183.777C634.056 325.56 748.348 550.932 819.642 809.5h419.672C1184.518 593.727 1083.124 290.064 902.637 0H592.66z\"\n}), React.createElement(\"path\", {\n  id: \"cell-5\",\n  fill: \"#f6f6f6\",\n  d: \"M545.962 183.777c-53.796 196.576-111.592 361.156-163.49 490.74 11.7 44.494 22.8 89.49 33.1 134.883h404.07c-71.294-258.468-185.586-483.84-273.68-625.623z\"\n}), React.createElement(\"path\", {\n  id: \"cell-6\",\n  fill: \"#f7f7f7\",\n  d: \"M153.89 0c74.094 180.678 161.088 417.448 228.483 674.517C449.67 506.337 527.063 279.465 592.56 0H153.89z\"\n}), React.createElement(\"path\", {\n  id: \"cell-7\",\n  fill: \"#fbfbfc\",\n  d: \"M153.89 0H0v809.5h415.57C345.477 500.938 240.884 211.874 153.89 0z\"\n}), React.createElement(\"path\", {\n  id: \"cell-3\",\n  fill: \"#ebebec\",\n  d: \"M1144.22 501.538c52.596-134.583 101.492-290.964 134.09-463.343 1.2-6.1 2.3-12.298 3.4-18.497 0-.2.1-.4.1-.6 1.1-6.3 2.3-12.7 3.4-19.098H902.536c105.293 169.28 183.688 343.158 241.684 501.638v-.1z\"\n}), React.createElement(\"path\", {\n  id: \"cell-1\",\n  fill: \"#e1e1e1\",\n  d: \"M1285.31 0a2161.05 2161.05 0 01-6.9 38.195C1321.507 86.39 1379.603 158.98 1440 257.168V0h-154.69z\"\n}), React.createElement(\"path\", {\n  id: \"cell-2\",\n  fill: \"#e7e7e7\",\n  d: \"M1278.31 38.196c-32.5 171.678-81.09 327.36-133.49 461.642v3.8c41 112.286 71.59 216.573 94.29 305.962l200.59.4V256.768c-60.3-97.988-118.29-170.48-161.39-218.573v.001z\"\n})));","import React from 'react';\nimport clsx from 'clsx';\nimport { useHistory } from 'react-router-dom';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { validateUUID } from '../../common';\nimport { post } from '../../fetch';\n\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport Avatar from '@material-ui/core/Avatar';\nimport Collapse from '@material-ui/core/Collapse';\nimport TextField from '@material-ui/core/TextField';\nimport Typography from '@material-ui/core/Typography';\nimport Button from '@material-ui/core/Button';\n\nimport { AppWrapper } from '../../Layout';\nimport Logo from '../../Components/Logo';\nimport Notification from '../../Components/Notification';\nimport SigninSvg from '../../static/google_signin.svg';\nimport './signin.styl';\n\nconst useStyles = makeStyles(theme => ({\n  svg: theme.palette.type === 'light' ? {} : {\n    '& #cell-1': { fill: '#0d0d0c' },\n    '& #cell-2': { fill: '#141413' },\n    '& #cell-3': { fill: '#181817' },\n    '& #cell-4': { fill: '#1c1d1c' },\n    '& #cell-5': { fill: '#222322' },\n    '& #cell-6': { fill: '#232423' },\n    '& #cell-7': { fill: '#272727' },\n  },\n  root: {\n    '&.success': {\n      '& label': {\n        color: '#508028',\n      },\n      '& .MuiInput-underline': {\n        '&:hover:before': {\n          borderBottomColor: theme.palette.type === 'light' ? 'rgba(128,189,1,.87)' : 'rgba(108,168,3,.87)',\n        },\n        '&:before': {\n          borderBottomColor: theme.palette.type === 'light' ? '#56b700' : '#519217',\n        },\n        '&:after': {\n          borderBottomColor: theme.palette.type === 'light' ? '#80bd01' : '#519217',\n        },\n      },\n    },\n    '&.error': {\n      '& label': {\n        color: theme.palette.type === 'light' ? '#f44336' : '#b92c22',\n      },\n      '& .MuiInput-underline': {\n        '&:after': {\n          borderBottomColor: theme.palette.type === 'light' ? '#f44336' : '#b92c22',\n        },\n      },\n    },\n    '&.focus': {\n      '& label': {\n        color: '#46483e',\n      },\n      '& .MuiInput-underline': {\n        '&:after': {\n          borderBottomColor: '#46483e',\n        },\n      },\n    },\n    '& .MuiInput-underline': {\n      '&:hover:before': {\n        borderBottomWidth: 1,\n        borderBottomColor: 'rgba(70,72,69,.8)',\n      },\n      '&:after': {\n        borderBottomColor: 'rgba(70,72,69,.8)',\n      },\n    },\n  },\n}));\n\nconst Signin = () => {\n  const classes = useStyles();\n  const history = useHistory();\n  const dispatch = useDispatch();\n  const isCancel = React.useRef();\n  const { isAuthed, ...authRest } = useSelector(state => state.auth);\n\n  const [state, setState] = React.useState({\n    status: isAuthed ? 'success' : 'idle',\n    focus: isAuthed === false,\n    isUUID: isAuthed === true,\n    diff: isAuthed === false,\n    ...authRest,\n    isAuthed,\n  });\n\n  const handleChange = name => event => {\n    const value = event.target.value.trim();\n    const { accesstoken } = authRest;\n    const condition = value === accesstoken;\n\n    setState(prevState => ({\n      ...prevState,\n      status: condition ? 'success' : 'idle',\n      [name]: value,\n      isUUID: validateUUID(value),\n      diff: condition === false,\n    }));\n  };\n\n  const handleOnFocus = () => {\n    setState(prevState => ({ ...prevState, focus: true }));\n  };\n\n  const handleOnBlur = () => {\n    setState(prevState => ({ ...prevState, focus: false }));\n  };\n\n  const handleClick = () => {\n    if (history.length > 1) {\n      history.goBack();\n    } else {\n      history.push('/');\n    }\n  };\n\n  const validateUser = async () => {\n    const { accesstoken } = state;\n    const params = {\n      url: '/accesstoken',\n      params: { accesstoken },\n    };\n\n    const { success, data, err_msg } = await post(params);\n\n    if (isCancel.current) {\n      return;\n    }\n\n    if (success) {\n      const auth = {\n        isAuthed: true,\n        accesstoken,\n        avatar: data.avatar_url,\n        uname: data.loginname,\n        uid: data.id,\n      };\n\n      dispatch({ type: 'UPDATE_AUTH', data: auth });\n\n      setState(prevState => ({\n        ...prevState,\n        status: 'success',\n        diff: false,\n        ...auth,\n      }));\n    } else {\n      setState(prevState => ({ ...prevState, status: 'error' }));\n\n      if (err_msg) {\n        dispatch({\n          type: 'OPEN_NOTIFICATION',\n          data: {\n            message: err_msg,\n            status: 'error',\n          },\n        });\n      }\n    }\n  };\n\n  const handleSubmit = event => {\n    event.preventDefault();\n\n    const { isUUID, diff } = state;\n\n    if (isUUID && diff) {\n      isCancel.current = false;\n\n      validateUser();\n    }\n  };\n\n  React.useEffect(() => {\n    return () => isCancel.current = true;\n  }, []);\n\n  return (\n    <AppWrapper\n      title=\"登录\"\n      withHeader={false}\n      htmlAttributes={{ id: 'signin' }}\n    >\n      <div className=\"container flex\">\n        <SigninSvg className={`${classes.svg} bg`} />\n\n        <div className=\"flex area top\" />\n        <div className=\"flex area mid\">\n          <div className=\"logo\">\n            <Logo color=\"dark\" />\n          </div>\n\n          <Collapse in={state.isAuthed}>\n            {state.isAuthed &&\n              <div className={clsx('auth-user', {\n                'show': state.isAuthed,\n                'diff': state.diff,\n              })}>\n                <div className=\"avatar\">\n                  <Avatar className=\"item\" alt={state.uname} src={state.avatar} />\n                </div>\n                <Typography className=\"name\">\n                  <span className=\"item\">{state.uname}</span>\n                </Typography>\n              </div>\n            }\n          </Collapse>\n\n          <form\n            noValidate\n            autoComplete=\"off\"\n            onSubmit={handleSubmit}\n          >\n            <TextField\n              fullWidth\n              id=\"accesstoken\"\n              label=\"Access Token\"\n              margin=\"normal\"\n              spellCheck=\"false\"\n              autoFocus={!state.isAuthed}\n              error={state.status === 'error'}\n              className={clsx(classes.root, state.status, {\n                'focus': state.focus,\n              })}\n              onChange={handleChange('accesstoken')}\n              value={state.accesstoken || ''}\n              onFocus={handleOnFocus}\n              onBlur={handleOnBlur}\n            />\n            <div className=\"btn\">\n              <Button\n                variant=\"outlined\"\n                {\n                  ...\n                  state.diff\n                  ? {\n                    type: 'submit',\n                    disabled: !state.isUUID,\n                  } : {\n                    onClick: handleClick,\n                    autoFocus: state.isAuthed,\n                  }\n                }\n              >\n                {state.diff ? '授权' : '完成'}\n              </Button>\n            </div>\n          </form>\n        </div>\n        <div className=\"flex area bot\" />\n      </div>\n\n      <Notification />\n    </AppWrapper>\n  );\n};\n\nexport default Signin;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { Link } from 'react-router-dom';\nimport { post } from '../../fetch';\n\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport ExpansionPanel from '@material-ui/core/ExpansionPanel';\nimport ExpansionPanelSummary from '@material-ui/core/ExpansionPanelSummary';\nimport ExpansionPanelDetails from '@material-ui/core/ExpansionPanelDetails';\nimport ExpansionPanelActions from '@material-ui/core/ExpansionPanelActions';\nimport Grid from '@material-ui/core/Grid';\nimport Typography from '@material-ui/core/Typography';\nimport Button from '@material-ui/core/Button';\nimport Divider from '@material-ui/core/Divider';\n\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore';\nimport AtIcon from '@material-ui/icons/AlternateEmail';\nimport ReplyIcon from '@material-ui/icons/Reply';\nimport NewTabIcon from '@material-ui/icons/OpenInNew';\n\nimport Avatar from '../../Components/Avatar';\nimport Moment from '../../Components/Moment';\nimport { MarkdownRender } from '../../Components/Markdown';\n\nconst useStyles = makeStyles(theme => ({\n  unRead: {\n    boxShadow: '0 1px 2px 0 rgba(245,0,87,.16),0 1px 1px 0 rgba(245,0,87,.12),0 2px 1px -1px rgba(245,0,87,.1)',\n    '&:before': {\n      backgroundColor: 'rgba(245,0,87,.12)',\n    },\n  },\n  summary: {\n    '@media (max-width: 768px)': {\n      paddingLeft: 20,\n      paddingRight: 20,\n    },\n    '@media (max-width: 600px)': {\n      paddingLeft: 16,\n      paddingRight: 16,\n    },\n    '@media (max-width: 420px)': {\n      paddingLeft: 14,\n      paddingRight: 14,\n    },\n  },\n  content: {\n    maxWidth: '100%',\n    minWidth: 0,\n  },\n  moreUnRead: {\n    color: 'rgba(245,0,87,.7)',\n  },\n  avatar: {\n    marginRight: 10,\n  },\n  title: {\n    fontSize: 16,\n    lineHeight: '1.5em',\n  },\n  uname: {\n    display: 'block',\n    fontWeight: 700,\n  },\n  time: {\n    paddingLeft: 10,\n    '& time': {\n      marginLeft: 3,\n    },\n    '& div': {\n      display: 'flex',\n      alignItems: 'center',\n    },\n  },\n  sizeAt: {\n    fontSize: 18,\n    transform: 'translateY(-1px)',\n  },\n  sizeReply: {\n    fontSize: 20,\n    transform: 'translateY(-1.5px)',\n  },\n  gray: {\n    color: theme.palette.type === 'light' ? 'rgba(0,0,0,.5)' : 'rgba(130,130,130,.5)',\n  },\n  actions: {\n    paddingLeft: 14,\n    paddingRight: 14,\n    '@media (max-width: 600px)': {\n      paddingTop: 12,\n      paddingBottom: 12,\n    },\n    '@media (max-width: 420px)': {\n      paddingLeft: 12,\n      paddingRight: 12,\n    },\n  },\n  btn: {\n    padding: '6px 10px',\n  },\n  icon: {\n    marginLeft: 2,\n    fontSize: 14,\n  },\n}));\n\nconst MessageCard = (props) => {\n  const [state, setState] = React.useState({ ...props.item });\n  const { accesstoken } = useSelector(({ auth }) => auth);\n  const disptach = useDispatch();\n  const isCancel = React.useRef(false);\n\n  React.useEffect(() => {\n    return () => isCancel.current = true;\n  }, []);\n\n  const markMessage = async () => {\n    const params = {\n      url: `/message/mark_one/${state.id}`,\n      params: { accesstoken },\n    };\n\n    const { success } = await post(params);\n\n    if (!isCancel.current && success) {\n      disptach({ type: 'READ_MESSAGE' });\n      setState(prevState => ({ ...prevState, has_read: true }));\n    }\n  };\n\n  const handleChange = (event, expanded) => {\n    if (!state.has_read) {\n      markMessage();\n    }\n  };\n\n  const classes = useStyles();\n  const { hasRead } = props;\n\n  return (\n    <ExpansionPanel\n      className={clsx({\n        [classes.unRead]: !state.has_read && !hasRead,\n      })}\n      onChange={handleChange}\n    >\n      <ExpansionPanelSummary\n        classes={{\n          root: classes.summary,\n          content: classes.content,\n          expandIcon: clsx({\n            [classes.moreUnRead]: !state.has_read && !hasRead,\n          }),\n        }}\n        expandIcon={<ExpandMoreIcon />}\n      >\n        <Grid container wrap=\"nowrap\" alignItems=\"center\">\n          <Grid item className={classes.avatar}>\n            <Avatar\n              name={state.author.loginname}\n              image={state.author.avatar_url}\n            />\n          </Grid>\n          <Grid container item zeroMinWidth wrap=\"wrap\" alignItems=\"center\">\n            <Grid container item zeroMinWidth wrap=\"wrap\" alignItems=\"center\">\n              <Typography noWrap component=\"h4\" className={classes.title}>\n                {state.topic.title}\n              </Typography>\n            </Grid>\n            <Grid container item zeroMinWidth wrap=\"nowrap\" alignItems=\"center\">\n              <Grid item zeroMinWidth>\n                <Typography noWrap component=\"span\" className={clsx(classes.uname, classes.gray)}>\n                  {state.author.loginname}\n                </Typography>\n              </Grid>\n              <Grid item className={classes.time}>\n                <Typography noWrap component=\"div\" className={classes.gray}>\n                  {state.type === 'reply' ? (\n                    <ReplyIcon className={classes.sizeReply} />\n                  ) : (\n                    <AtIcon className={classes.sizeAt} />\n                  )}\n                  <Moment fromNow>{state.reply.create_at}</Moment>\n                </Typography>\n              </Grid>\n            </Grid>\n          </Grid>\n        </Grid>\n      </ExpansionPanelSummary>\n      <ExpansionPanelDetails>\n        <MarkdownRender markdownString={state.reply.content} />\n      </ExpansionPanelDetails>\n      <Divider />\n      <ExpansionPanelActions className={classes.actions}>\n        <Button\n          component={Link}\n          className={classes.btn}\n          to={`/user/${state.author.loginname}`}\n          target=\"_blank\"\n          size=\"medium\"\n        >\n          浏览用户\n          <NewTabIcon className={classes.icon} />\n        </Button>\n        <Button\n          component={Link}\n          className={classes.btn}\n          to={`/topic/${state.topic.id}#${state.reply.id}`}\n          target=\"_blank\"\n          size=\"medium\"\n          color=\"primary\"\n        >\n          前往查看\n          <NewTabIcon className={classes.icon} />\n        </Button>\n      </ExpansionPanelActions>\n    </ExpansionPanel>\n  );\n};\n\nMessageCard.propTypes = {\n  item: PropTypes.object.isRequired,\n  hasRead: PropTypes.bool.isRequired,\n};\n\nexport default MessageCard;\n","import React from 'react';\nimport clsx from 'clsx';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { useHistory } from 'react-router-dom';\nimport {\n  get as getData,\n  post,\n} from '../../fetch';\n\nimport { makeStyles } from '@material-ui/core/styles';\n\nimport Fade from '@material-ui/core/Fade';\nimport Grid from '@material-ui/core/Grid';\nimport Tooltip from '@material-ui/core/Tooltip';\nimport IconButton from '@material-ui/core/IconButton';\nimport MarkAllIcon from '@material-ui/icons/DoneAll';\n\nimport { AppWrapper } from '../../Layout';\nimport MessageCard from './MessageCard';\nimport Progress from '../../Components/Progress';\n\nconst useStyles = makeStyles(theme => ({\n  spacings: {\n    marginTop: 40,\n    marginBottom: 10,\n    padding: '0 7px',\n    '@media (max-width: 768px)': {\n      marginTop: 30,\n      marginBottom: 8,\n    },\n    '@media (max-width: 600px)': {\n      marginTop: 20,\n      marginBottom: 4,\n    },\n  },\n  text: {\n    position: 'relative',\n    flex: 1,\n    marginRight: 8,\n    fontSize: 14,\n    color: theme.palette.type === 'light' ? 'rgba(0,0,0,.6)' : 'rgba(190,190,190,.6)',\n    pointerEvents: 'none',\n    transition: 'opacity .15s cubic-bezier(.4,0,.2,1)',\n    '@media (max-width: 600px)': {\n      marginRight: 4,\n    },\n    '& span': {\n      position: 'absolute',\n      top: -9,\n      right: 0,\n      whiteSpace: 'nowrap',\n    },\n  },\n  opacity: {\n    opacity: .6,\n  },\n  error: {\n    color: theme.palette.secondary.main,\n  },\n}));\n\nconst Message = () => {\n  const [items, setItems] = React.useState([]);\n  const [state, setState] = React.useState({\n    status: 'loading',\n    err_msg: '发生错误',\n  });\n  const { isAuthed, accesstoken, message } = useSelector(s => ({\n    ...s.auth,\n    message: { ...s.message },\n  }));\n  const isCancel = React.useRef(false);\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const classes = useStyles();\n\n  const markAllMessage = () => {\n    items.map(item => item.has_read = true);\n    setItems(items);\n  };\n\n  const handleMarkAllMessage = async () => {\n    isCancel.current = false;\n\n    const params = {\n      url: '/message/mark_all',\n      params: { accesstoken },\n    };\n\n    const { success } = await post(params);\n\n    if (!isCancel.current && success) {\n      markAllMessage();\n      dispatch({ type: 'READ_ALL_MESSAGE' });\n    }\n  };\n\n  React.useEffect(() => {\n    if (!Boolean(accesstoken)) {\n      return;\n    }\n\n    (async () => {\n      const params = {\n        url: '/messages',\n        params: {\n          accesstoken,\n          mdrender: false,\n        },\n      };\n\n      const {\n        success,\n        data: {\n          hasnot_read_messages: unRead = [],\n          has_read_messages: hasRead = [],\n        },\n        err_msg,\n      } = await getData(params);\n\n      if (isCancel.current) {\n        return;\n      }\n\n      if (success) {\n        dispatch({ type: 'UPDATE_MESSAGE', data: unRead.length });\n\n        setState({ status: 'success' });\n        setItems([ ...unRead, ...hasRead ]);\n      } else {\n        setState(prevState => ({\n          status: 'error',\n          err_msg: err_msg ? err_msg : prevState.err_msg,\n        }));\n      }\n    })();\n\n    return () => isCancel.current = true;\n  }, [accesstoken, dispatch]);\n\n  React.useEffect(() => {\n    if (!isAuthed) {\n      history.push('/');\n    }\n  }, [isAuthed, history]);\n\n  return (\n    <AppWrapper title=\"消息\">\n      <div className=\"wrapper\">\n        <Grid container alignItems=\"center\" justify=\"flex-end\" className={classes.spacings}>\n          <Grid item className={clsx(classes.text, {\n            [classes.opacity]: state.status !== 'success' || message.count === 0,\n            [classes.error]: state.status === 'error',\n          })}>\n            <Fade unmountOnExit in={state.status === 'loading'}>\n              <span>获取消息中……</span>\n            </Fade>\n            <Fade unmountOnExit in={state.status === 'error'}>\n              <span>{state.err_msg}</span>\n            </Fade>\n            <Fade unmountOnExit in={state.status === 'success' && !Boolean(items.length)}>\n              <span>没有消息哦</span>\n            </Fade>\n            <Fade unmountOnExit in={state.status === 'success' && Boolean(items.length) && !Boolean(message.count)}>\n              <span>已读全部消息</span>\n            </Fade>\n            <Fade unmountOnExit in={state.status === 'success' && Boolean(message.count)}>\n              <span>{message.count} 条未读消息</span>\n            </Fade>\n          </Grid>\n          <Tooltip\n            title=\"全部标为已读\"\n            enterDelay={500}\n            placement=\"left-start\"\n            disableTouchListener\n          >\n            <span>\n            <IconButton\n              onClick={handleMarkAllMessage}\n              disabled={state.status !== 'success' || message.count === 0}\n              disableRipple\n            >\n              <MarkAllIcon />\n            </IconButton>\n            </span>\n          </Tooltip>\n        </Grid>\n\n        {items.map(item => (\n          <MessageCard key={item.id} item={item} hasRead={item.has_read} />\n        ))}\n      </div>\n\n      <div className=\"status wrapper\">\n        <Progress status={state.status} />\n      </div>\n    </AppWrapper>\n  );\n};\n\nexport default Message;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport clsx from 'clsx';\nimport { useSelector, useDispatch } from 'react-redux';\n\nimport { useTheme, makeStyles } from '@material-ui/core/styles';\nimport withWidth, { isWidthDown } from '@material-ui/core/withWidth';\n\nimport Typography from '@material-ui/core/Typography';\nimport IconButton from '@material-ui/core/IconButton';\nimport Button from '@material-ui/core/Button';\nimport Switch from '@material-ui/core/Switch';\nimport Paper from '@material-ui/core/Paper';\nimport Slider from '@material-ui/core/Slider';\n\nimport Brightness4Icon from '@material-ui/icons/Brightness4';\nimport Brightness7Icon from '@material-ui/icons/Brightness7';\n\nimport { AppWrapper } from '../../Layout';\nimport './settings.styl';\n\nconst useStyles = makeStyles(theme => ({\n  title: {\n    marginTop: 30,\n    marginBottom: 14,\n    paddingLeft: 1,\n    paddingRight: 1,\n    fontSize: 15,\n  },\n  mark: {\n    backgroundColor: 'transparent',\n  },\n}));\n\nconst Settings = (props) => {\n  const theme = useTheme();\n  const classes = useStyles();\n  const dispatch = useDispatch();\n  const {\n    auth: { isAuthed },\n    settings,\n  } = useSelector(state => state);\n\n  const handleToggleThemeMode = () => {\n    const themeMode = theme.palette.type === 'light' ? 'dark' : 'light';\n    dispatch({\n      type: 'UPDATE_SETTINGS',\n      data: { ...settings, themeMode },\n    });\n  };\n\n  const handleChangeAutoFollow = () => {\n    const autoFollow = !settings.autoFollow;\n    dispatch({\n      type: 'UPDATE_SETTINGS',\n      data: { ...settings, autoFollow },\n    });\n  };\n\n  const handleCardPreview = () => {\n    dispatch({\n      type: 'UPDATE_SETTINGS',\n      data: {\n        ...settings,\n        cardPreview: !settings.cardPreview,\n      },\n    });\n  };\n\n  const handleChangeTime = (event, value) => {\n    dispatch({\n      type: 'UPDATE_SETTINGS',\n      data: {\n        ...settings,\n        time: value * 60,\n      },\n    });\n  };\n\n  const handleRestoreSettings = () => {\n    dispatch({ type: 'RESTORE_SETTINGS' });\n  };\n\n  return (\n    <AppWrapper title=\"设置\">\n      <div id=\"settings\" className=\"wrapper\">\n        <Typography className={classes.title}>外观</Typography>\n        <Paper>\n          <div className=\"setting\">\n            <div className=\"setting-label\">主题模式</div>\n            <IconButton\n              color=\"inherit\"\n              onClick={handleToggleThemeMode}\n              disabled={settings.autoFollow}\n            >\n              {settings.themeMode === 'light' ? <Brightness4Icon /> : <Brightness7Icon />}\n            </IconButton>\n          </div>\n          <div className=\"setting\">\n            <div className=\"setting-label\">跟随系统</div>\n            <Switch\n              className=\"switch\"\n              checked={settings.autoFollow}\n              onChange={handleChangeAutoFollow}\n              color=\"primary\"\n            />\n          </div>\n        </Paper>\n\n        <Typography className={classes.title}>卡片</Typography>\n        <Paper>\n          <div className=\"setting\">\n            <div className=\"setting-label\">摘要预览</div>\n            <Switch\n              className=\"switch\"\n              checked={settings.cardPreview}\n              onChange={handleCardPreview}\n              color=\"primary\"\n            />\n          </div>\n        </Paper>\n\n        <Typography className={classes.title}>消息</Typography>\n        <Paper>\n          <div\n            className={clsx('setting', {\n              'nano': isWidthDown('xs', props.width),\n            })}\n          >\n            <div className=\"setting-label\">提醒间隔（分钟）</div>\n            <div className=\"setting-wrapper\">\n              <Slider\n                disabled={!isAuthed}\n                min={0}\n                max={10}\n                step={null}\n                value={settings.time / 60}\n                marks={[\n                  { value: 0, label: '关' },\n                  { value: 1, label: '1' },\n                  { value: 3, label: '3' },\n                  { value: 5, label: '5' },\n                  { value: 10, label: '10' },\n                ]}\n                onChange={handleChangeTime}\n                classes={{\n                  mark: classes.mark,\n                  markActive: classes.mark,\n                }}\n              />\n            </div>\n          </div>\n        </Paper>\n\n        <Typography className={classes.title}>重置</Typography>\n        <Paper>\n          <div className=\"setting\">\n            <div className=\"setting-label\">将所有设置还原为原始默认设置</div>\n            <Button\n              onClick={handleRestoreSettings}\n              variant=\"outlined\"\n            >\n              重置\n            </Button>\n          </div>\n        </Paper>\n      </div>\n    </AppWrapper>\n  );\n};\n\nSettings.propTypes = {\n  width: PropTypes.string.isRequired,\n};\n\nexport default withWidth()(Settings);\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React from \"react\";\nexport default (({\n  styles = {},\n  ...props\n}) => React.createElement(\"svg\", _extends({\n  xmlns: \"http://www.w3.org/2000/svg\",\n  viewBox: \"0 0 512 512\"\n}, props), React.createElement(\"path\", {\n  d: \"M369.5 32H142.4C81.5 32 32 82.6 32 144.6v222.8c0 62 49.5 112.6 110.4 112.6h227.2c60.9 0 110.5-50.6 110.5-112.6V144.6C480 82.6 430.5 32 369.5 32zM175 251v.7c0 10.9-9.1 20.4-19.9 20.4h-23.3c-10.8 0-19.9-9.5-19.9-20.4V148.1c1-10.8 9.2-20.2 19.9-20.2h23.3c10.9 0 19.9 9.8 19.9 20.8V251zm122 147.4c0 11.4-8.9 17.6-20.1 17.6h-41.8c-11.2 0-20.1-8.1-20.1-19.6v-29.3c0-23.3 18.1-42.3 41-42.3s41 19 41 42.3v31.3zM400 251v.7c0 10.9-9.1 20.4-19.9 20.4h-24.3c-10.8 0-19.9-9.5-19.9-20.4V148.1c1-10.8 9.2-20.2 19.9-20.2h24.3c10.8 0 19.9 9.8 19.9 20.8V251z\"\n})));","import React from 'react';\nimport clsx from 'clsx';\nimport { useHistory } from 'react-router-dom';\n\nimport { makeStyles } from '@material-ui/core/styles';\nimport Button from '@material-ui/core/Button';\n\nimport { AppWrapper } from '../../Layout';\nimport MdOutletIcon from '../../static/ionicons_md_outlet.svg';\n\nconst useStyles = makeStyles(theme => ({\n  main: {\n    paddingTop: 120,\n    flexDirection: 'column',\n    [theme.breakpoints.down('sm')]: {\n      position: 'fixed',\n      top: 0,\n      right: 0,\n      bottom: 0,\n      left: 0,\n      padding: 0,\n      overflow: 'hidden',\n    },\n  },\n  center: {\n    justifyContent: 'center',\n    alignItems: 'center',\n  },\n  wrapper: {\n    flexDirection: 'row',\n    marginBottom: 40,\n    [theme.breakpoints.down('sm')]: {\n      flexDirection: 'column',\n      marginBottom: 62,\n      marginTop: -32,\n    },\n  },\n  h1: {\n    marginRight: 45,\n    paddingRight: 45,\n    fontSize: 80,\n    borderRight: '3px solid #7b7b7b',\n    [theme.breakpoints.down('sm')]: {\n      marginRight: 0,\n      marginBottom: 32,\n      paddingRight: 0,\n      border: 'none',\n    },\n  },\n  p: {\n    fontSize: 20,\n    textAlign: 'left',\n    flexDirection: 'column',\n  },\n  icon: {\n    width: '1em',\n    height: '1em',\n    fontSize: 60,\n    fill: theme.palette.text.primary,\n  },\n  button: {\n    paddingTop: 10,\n    paddingBottom: 10,\n    [theme.breakpoints.down('sm')]: {\n      marginBottom: 32,\n    },\n  },\n}));\n\nconst NotFound = () => {\n  const classes = useStyles();\n  const history = useHistory();\n\n  const handleBackToHome = () => {\n    history.push('/');\n  };\n\n  return (\n    <AppWrapper title=\"404\" withHeader={false}>\n      <div className={clsx(\n        'flex',\n        classes.main,\n        classes.center,\n      )}>\n        <div className={clsx(\n          'flex',\n          classes.wrapper,\n          classes.center,\n        )}>\n          <h1 className={classes.h1}>404</h1>\n          <p className={clsx(\n            'flex',\n            classes.p,\n            classes.center,\n          )}>\n            <MdOutletIcon className={classes.icon} />\n            <span>Page not Found</span>\n          </p>\n        </div>\n        <Button\n          className={classes.button}\n          variant=\"outlined\"\n          onClick={handleBackToHome}\n        >\n          Back to Home\n        </Button>\n      </div>\n    </AppWrapper>\n  );\n};\n\nexport default NotFound;\n","import React from 'react';\nimport {\n  BrowserRouter,\n  Route,\n  Switch,\n  Redirect,\n} from 'react-router-dom';\n\nimport { Provider, useSelector } from 'react-redux';\nimport store from './store';\n\nimport ThemeProvider from './Components/Theme';\nimport ScrollToTop from './Components/ScrollToTop';\nimport Loadding from './Components/Loadding';\n\nimport { AppFrame } from './Layout';\nimport Home from './Views/Home';\nimport Topic from './Views/Topic';\nimport User from './Views/User';\nimport Signin from './Views/Signin';\nimport Message from './Views/Message';\nimport Settings from './Views/Settings';\nimport NotFound from './Views/404';\n\nlet Test = NotFound;\n\nif (process.env.NODE_ENV === 'development') {\n  Test = React.lazy(() => import('./Views/Test'));\n}\n\nconst PrivateRoute = ({ component: Component, ...rest }) => {\n  const { isAuthed } = useSelector(({ auth }) => auth);\n\n  return (\n    <Route\n      {...rest}\n      render={props => (\n        isAuthed ? (\n          <Component {...props} />\n        ) : (\n          <Redirect to=\"/\" />\n        )\n      )}\n    />\n  );\n};\n\nconst App = () => {\n  return (\n    <Provider store={store}>\n      <ThemeProvider>\n        <BrowserRouter basename={process.env.PUBLIC_URL}>\n          <AppFrame>\n            <ScrollToTop />\n            <React.Suspense fallback={<Loadding />}>\n              <Switch>\n                <Route exact path=\"/\" component={Home} />\n                <Route exact path=\"/topic/:topic_id\" component={Topic} />\n                <Route exact path=\"/user/:uname\" component={User} />\n                <Route exact path=\"/signin/\" component={Signin} />\n                <PrivateRoute exact path=\"/message/\" component={Message} />\n                <Route exact path=\"/settings/\" component={Settings} />\n                <Route exact path=\"/test/\" component={Test} />\n                <Route path=\"*\" component={NotFound} />\n              </Switch>\n            </React.Suspense>\n          </AppFrame>\n        </BrowserRouter>\n      </ThemeProvider>\n    </Provider>\n  );\n};\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.register();\n"],"sourceRoot":""}